"use strict";(self.webpackChunkangularPoc=self.webpackChunkangularPoc||[]).push([[179],{2011:(ht,Se,V)=>{V.d(Se,{Dh:()=>fe,GT:()=>ue,cc:()=>Re,hO:()=>Be,on:()=>q,pX:()=>ae,xv:()=>ge});var d=V(4650),$=V(9260),k=V(2122);ht=V.hmd(ht);const se=["ngOnDestroy"],ae=(Te,De,Pe,Oe={})=>new Proxy(Te,{get:(Me,Ae)=>Pe.runOutsideAngular(()=>{var $e;if(Te[Ae])return!(null===($e=Oe?.spy)||void 0===$e)&&$e.get&&Oe.spy.get(Ae,Te[Ae]),Te[Ae];if(se.indexOf(Ae)>-1)return()=>{};const ee=De.toPromise().then(ce=>{const Ie=ce&&ce[Ae];return"function"==typeof Ie?Ie.bind(ce):Ie&&Ie.then?Ie.then(Q=>Pe.run(()=>Q)):Pe.run(()=>Ie)});return new Proxy(()=>{},{get:(ce,Ie)=>ee[Ie],apply:(ce,Ie,Q)=>ee.then(X=>{var he;const oe=X&&X(...Q);return!(null===(he=Oe?.spy)||void 0===he)&&he.apply&&Oe.spy.apply(Ae,Q,oe),oe})})})}),ue=(Te,De)=>{De.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(Oe=>{Object.defineProperty(Te.prototype,Oe,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,Oe))})})};class ye{constructor(De){return De}}const fe=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function q(Te,De,Pe){const Me="object"==typeof Pe&&Pe||{};Me.name=Me.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const $e=$.Z.apps.filter(ee=>ee&&ee.name===Me.name)[0]||De.runOutsideAngular(()=>$.Z.initializeApp(Te,Me));try{JSON.stringify(Te)!==JSON.stringify($e.options)&&Z("error",`${$e.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye($e)}const Z=(Te,...De)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Te](...De)},J={provide:ye,useFactory:q,deps:[fe,d.R0b,[new d.FiY,ge]]};let Be=(()=>{class Te{constructor(Pe){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",d.q4F.full,Pe.toString())}static initializeApp(Pe,Oe){return{ngModule:Te,providers:[{provide:fe,useValue:Pe},{provide:ge,useValue:Oe}]}}}return Te.\u0275fac=function(Pe){return new(Pe||Te)(d.LFG(d.Lbi))},Te.\u0275mod=d.oAB({type:Te}),Te.\u0275inj=d.cJS({providers:[J]}),Te})();function Re(Te,De,Pe,Oe,Me){const[,Ae,$e]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===Te)||[];if(Ae)return function Ge(Te,De){try{return Te.toString()===De.toString()}catch{return Te===De}}(Me,$e)||(me("error",`${De} was already initialized on the ${Pe} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Me,was:$e})),Ae;{const ee=Oe();return globalThis.\u0275AngularfireInstanceCache.push([Te,ee,Me]),ee}}const rt=!!ht.hot,me=(Te,...De)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Te](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ht,Se,V)=>{V.d(Se,{q4:()=>Bu,iC:()=>bn,fc:()=>na,HU:()=>ec,vb:()=>ln,JM:()=>ai});var d=V(4650),$=V(259),k=V(5861),se=V(9681),ae=V(2090),ue=V(4859),ye=V(1877),fe=V(8766);const ge="@firebase/installations",q="0.6.4",J=`w:${q}`,Be="FIS_v2",De=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function Oe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Me(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Ae(D,T){return $e.apply(this,arguments)}function $e(){return($e=(0,k.Z)(function*(D,T){const H=(yield T.json()).error;return De.create("request-failed",{requestName:D,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function ee({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ce(D,{refreshToken:T}){const R=ee(D);return R.append("Authorization",function he(D){return`${Be} ${D}`}(T)),R}function Ie(D){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function oe(D,T){return Le.apply(this,arguments)}function Le(){return(Le=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:R}){const H=Oe(D),Y=ee(D),re=T.getImmediate({optional:!0});if(re){const lt=yield re.getHeartbeatsHeader();lt&&Y.append("x-firebase-client",lt)}const tt={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:Be,appId:D.appId,sdkVersion:J})},pt=yield Ie(()=>fetch(H,tt));if(pt.ok){const lt=yield pt.json();return{fid:lt.fid||R,registrationStatus:2,refreshToken:lt.refreshToken,authToken:Me(lt.authToken)}}throw yield Ae("Create Installation",pt)})).apply(this,arguments)}function Ue(D){return new Promise(T=>{setTimeout(T,D)})}const sn=/^[cdef][\w-]{21}$/;function bt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function Bt(D){return function _t(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return sn.test(R)?R:""}catch{return""}}function Et(D){return`${D.appName}!${D.appId}`}const Xt=new Map;function cr(D,T){const R=Et(D);ei(R,T),function ss(D,T){const R=function xn(){return!$n&&"BroadcastChannel"in self&&($n=new BroadcastChannel("[Firebase] FID Change"),$n.onmessage=D=>{ei(D.data.key,D.data.fid)}),$n}();R&&R.postMessage({key:D,fid:T}),function os(){0===Xt.size&&$n&&($n.close(),$n=null)}()}(R,T)}function ei(D,T){const R=Xt.get(D);if(R)for(const H of R)H(T)}let $n=null;const Gn="firebase-installations-store";let hi=null;function Di(){return hi||(hi=(0,fe.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Gn)}})),hi}function _n(D,T){return yr.apply(this,arguments)}function yr(){return(yr=(0,k.Z)(function*(D,T){const R=Et(D),Y=(yield Di()).transaction(Gn,"readwrite"),re=Y.objectStore(Gn),ke=yield re.get(R);return yield re.put(T,R),yield Y.done,(!ke||ke.fid!==T.fid)&&cr(D,T.fid),T})).apply(this,arguments)}function et(D){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,k.Z)(function*(D){const T=Et(D),H=(yield Di()).transaction(Gn,"readwrite");yield H.objectStore(Gn).delete(T),yield H.done})).apply(this,arguments)}function kr(D,T){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*(D,T){const R=Et(D),Y=(yield Di()).transaction(Gn,"readwrite"),re=Y.objectStore(Gn),ke=yield re.get(R),tt=T(ke);return void 0===tt?yield re.delete(R):yield re.put(tt,R),yield Y.done,tt&&(!ke||ke.fid!==tt.fid)&&cr(D,tt.fid),tt})).apply(this,arguments)}function zn(D){return ti.apply(this,arguments)}function ti(){return(ti=(0,k.Z)(function*(D){let T;const R=yield kr(D.appConfig,H=>{const Y=xt(H),re=ft(D,Y);return T=re.registrationPromise,re.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function xt(D){return dr(D||{fid:bt(),registrationStatus:0})}function ft(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(De.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},H=function Rt(D,T){return En.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:H}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:kn(D)}:{installationEntry:T}}function En(){return(En=(0,k.Z)(function*(D,T){try{const R=yield oe(D,T);return _n(D.appConfig,R)}catch(R){throw Pe(R)&&409===R.customData.serverCode?yield et(D.appConfig):yield _n(D.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function kn(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,k.Z)(function*(D){let T=yield vr(D.appConfig);for(;1===T.registrationStatus;)yield Ue(100),T=yield vr(D.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield zn(D);return H||R}return T})).apply(this,arguments)}function vr(D){return kr(D,T=>{if(!T)throw De.create("installation-not-found");return dr(T)})}function dr(D){return function Ti(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ot(D,T){return Si.apply(this,arguments)}function Si(){return(Si=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},R){const H=jt(D,R),Y=ce(D,R),re=T.getImmediate({optional:!0});if(re){const lt=yield re.getHeartbeatsHeader();lt&&Y.append("x-firebase-client",lt)}const tt={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:J,appId:D.appId}})},pt=yield Ie(()=>fetch(H,tt));if(pt.ok)return Me(yield pt.json());throw yield Ae("Generate Auth Token",pt)})).apply(this,arguments)}function jt(D,{fid:T}){return`${Oe(D)}/${T}/authTokens:generate`}function ni(D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,k.Z)(function*(D,T=!1){let R;const H=yield kr(D.appConfig,re=>{if(!Yt(re))throw De.create("not-registered");const ke=re.authToken;if(!T&&Zn(ke))return re;if(1===ke.requestStatus)return R=He(D,T),re;{if(!navigator.onLine)throw De.create("app-offline");const tt=z(re);return R=yt(D,tt),tt}});return R?yield R:H.authToken})).apply(this,arguments)}function He(D,T){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(D,T){let R=yield Xe(D.appConfig);for(;1===R.authToken.requestStatus;)yield Ue(100),R=yield Xe(D.appConfig);const H=R.authToken;return 0===H.requestStatus?ni(D,T):H})).apply(this,arguments)}function Xe(D){return kr(D,T=>{if(!Yt(T))throw De.create("not-registered");return function O(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function yt(D,T){return St.apply(this,arguments)}function St(){return(St=(0,k.Z)(function*(D,T){try{const R=yield Ot(D,T),H=Object.assign(Object.assign({},T),{authToken:R});return yield _n(D.appConfig,H),R}catch(R){if(!Pe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield _n(D.appConfig,H)}else yield et(D.appConfig);throw R}})).apply(this,arguments)}function Yt(D){return void 0!==D&&2===D.registrationStatus}function Zn(D){return 2===D.requestStatus&&!function W(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function z(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function P(){return(P=(0,k.Z)(function*(D){const T=D,{installationEntry:R,registrationPromise:H}=yield zn(T);return H?H.catch(console.error):ni(T).catch(console.error),R.fid})).apply(this,arguments)}function Ee(){return(Ee=(0,k.Z)(function*(D,T=!1){const R=D;return yield Ye(R),(yield ni(R,T)).token})).apply(this,arguments)}function Ye(D){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(D){const{registrationPromise:T}=yield zn(D);T&&(yield T)})).apply(this,arguments)}function xl(D){return De.create("missing-app-config-values",{valueName:D})}const Rl="installations",ko=D=>{const T=D.getProvider("app").getImmediate(),R=function Po(D){if(!D||!D.options)throw xl("App Configuration");if(!D.name)throw xl("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!D.options[R])throw xl(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},zc=D=>{const T=D.getProvider("app").getImmediate(),R=(0,se._getProvider)(T,Rl).getImmediate();return{getId:()=>function F(D){return P.apply(this,arguments)}(R),getToken:Y=>function te(D){return Ee.apply(this,arguments)}(R,Y)}};(function Ml(){(0,se._registerComponent)(new ue.wA(Rl,ko,"PUBLIC")),(0,se._registerComponent)(new ue.wA("installations-internal",zc,"PRIVATE"))})(),(0,se.registerVersion)(ge,q),(0,se.registerVersion)(ge,q,"esm2017");const Eu="@firebase/remote-config",Kn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cs{constructor(T,R,H,Y){this.client=T,this.storage=R,this.storageCache=H,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,Y=H<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,k.Z)(function*(){const[H,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,H))return Y;T.eTag=Y&&Y.eTag;const re=yield R.client.fetch(T),ke=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&ke.push(R.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(ke),re})()}}function gi(D=navigator){return D.languages&&D.languages[0]||D.language}class Ai{constructor(T,R,H,Y,re,ke){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=H,this.projectId=Y,this.apiKey=re,this.appId=ke}fetch(T){var R=this;return(0,k.Z)(function*(){const[H,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},pt={sdk_version:R.sdkVersion,app_instance_id:H,app_instance_id_token:Y,app_id:R.appId,language_code:gi()},lt={method:"POST",headers:tt,body:JSON.stringify(pt)},Lt=fetch(ke,lt),It=new Promise((Ni,Sr)=>{T.signal.addEventListener(()=>{const sa=new Error("The operation was aborted.");sa.name="AbortError",Sr(sa)})});let Wi;try{yield Promise.race([Lt,It]),Wi=yield Lt}catch(Ni){let Sr="fetch-client-network";throw"AbortError"===Ni?.name&&(Sr="fetch-timeout"),Kn.create(Sr,{originalErrorMessage:Ni?.message})}let vn=Wi.status;const ia=Wi.headers.get("ETag")||void 0;let gr,Mi;if(200===Wi.status){let Ni;try{Ni=yield Wi.json()}catch(Sr){throw Kn.create("fetch-client-parse",{originalErrorMessage:Sr?.message})}gr=Ni.entries,Mi=Ni.state}if("INSTANCE_STATE_UNSPECIFIED"===Mi?vn=500:"NO_CHANGE"===Mi?vn=304:("NO_TEMPLATE"===Mi||"EMPTY_CONFIG"===Mi)&&(gr={}),304!==vn&&200!==vn)throw Kn.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:ia,config:gr}})()}}class rr{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,H)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:H}){var Y=this;return(0,k.Z)(function*(){yield function Nl(D,T){return new Promise((R,H)=>{const Y=Math.max(T-Date.now(),0),re=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(re),H(Kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const re=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function Cn(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const ke={throttleEndTimeMillis:Date.now()+(0,ae.$s)(H),backoffCount:H+1};return yield Y.storage.setThrottleMetadata(ke),Y.attemptFetch(T,ke)}})()}}class Du{constructor(T,R,H,Y,re){this.app=T,this._client=R,this._storageCache=H,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bs(D,T){const R=D.target.error||void 0;return Kn.create(T,{originalErrorMessage:R&&R?.message})}const xi="app_namespace_store";class _i{constructor(T,R,H,Y=function mi(){return new Promise((D,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=H=>{T(bs(H,"storage-open"))},R.onsuccess=H=>{D(H.target.result)},R.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(xi,{keyPath:"compositeKey"})}}catch(R){T(Kn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=H,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const H=yield R.openDbPromise;return new Promise((Y,re)=>{const tt=H.transaction([xi],"readonly").objectStore(xi),pt=R.createCompositeKey(T);try{const lt=tt.get(pt);lt.onerror=Lt=>{re(bs(Lt,"storage-get"))},lt.onsuccess=Lt=>{const It=Lt.target.result;Y(It?It.value:void 0)}}catch(lt){re(Kn.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(T,R){var H=this;return(0,k.Z)(function*(){const Y=yield H.openDbPromise;return new Promise((re,ke)=>{const pt=Y.transaction([xi],"readwrite").objectStore(xi),lt=H.createCompositeKey(T);try{const Lt=pt.put({compositeKey:lt,value:R});Lt.onerror=It=>{ke(bs(It,"storage-set"))},Lt.onsuccess=()=>{re()}}catch(Lt){ke(Kn.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const H=yield R.openDbPromise;return new Promise((Y,re)=>{const tt=H.transaction([xi],"readwrite").objectStore(xi),pt=R.createCompositeKey(T);try{const lt=tt.delete(pt);lt.onerror=Lt=>{re(bs(Lt,"storage-delete"))},lt.onsuccess=()=>{Y()}}catch(lt){re(Kn.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ds{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),H=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),re=yield R;re&&(T.lastFetchStatus=re);const ke=yield H;ke&&(T.lastSuccessfulFetchTimestampMillis=ke);const tt=yield Y;tt&&(T.activeConfig=tt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Cg(){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,k.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Ta(){(0,se._registerComponent)(new ue.wA("remote-config",function D(T,{instanceIdentifier:R}){const H=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kn.create("registration-window");if(!(0,ae.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:re,apiKey:ke,appId:tt}=H.options;if(!re)throw Kn.create("registration-project-id");if(!ke)throw Kn.create("registration-api-key");if(!tt)throw Kn.create("registration-app-id");const pt=new _i(tt,H.name,R=R||"firebase"),lt=new Ds(pt),Lt=new ye.Yd(Eu);Lt.logLevel=ye.in.ERROR;const It=new Ai(Y,se.SDK_VERSION,R,re,ke,tt),Wi=new rr(It,pt),vn=new Cs(Wi,pt,lt,Lt),ia=new Du(H,vn,lt,pt,Lt);return function In(D){const T=(0,ae.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ia),ia},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Eu,"0.4.4"),(0,se.registerVersion)(Eu,"0.4.4","esm2017")}();const Ts="/firebase-messaging-sw.js",Lo="/firebase-cloud-messaging-push-scope",Sa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qc="google.c.a.c_id",Jh="google.c.a.c_l",Dg="google.c.a.ts",Aa="google.c.a.e";var us=(()=>{return(D=us||(us={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",us;var D})();function io(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tg(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),Y=new Uint8Array(H.length);for(let re=0;re<H.length;++re)Y[re]=H.charCodeAt(re);return Y}const xa="fcm_token_details_db",Su="fcm_token_object_Store";function Wc(D){return Au.apply(this,arguments)}function Au(){return Au=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(xa))return null;let T=null;return(yield(0,fe.X3)(xa,5,{upgrade:(H=(0,k.Z)(function*(Y,re,ke,tt){var pt;if(re<2||!Y.objectStoreNames.contains(Su))return;const lt=tt.objectStore(Su),Lt=yield lt.index("fcmSenderId").get(D);if(yield lt.clear(),Lt)if(2===re){const It=Lt;if(!It.auth||!It.p256dh||!It.endpoint)return;T={token:It.fcmToken,createTime:null!==(pt=It.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:io(It.vapidKey)}}}else if(3===re){const It=Lt;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:io(It.auth),p256dh:io(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:io(It.vapidKey)}}}else if(4===re){const It=Lt;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:io(It.auth),p256dh:io(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:io(It.vapidKey)}}}}),function(re,ke,tt,pt){return H.apply(this,arguments)})})).close(),yield(0,fe.Lj)(xa),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Zc(T)?T:null;var H}),Au.apply(this,arguments)}function Zc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Uo="firebase-messaging-store";let Vo=null;function Bo(){return Vo||(Vo=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Uo)}})),Vo}function xu(D){return oo.apply(this,arguments)}function oo(){return(oo=(0,k.Z)(function*(D){const T=ao(D),H=yield(yield Bo()).transaction(Uo).objectStore(Uo).get(T);if(H)return H;{const Y=yield Wc(D.appConfig.senderId);if(Y)return yield jo(D,Y),Y}})).apply(this,arguments)}function jo(D,T){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(D,T){const R=ao(D),Y=(yield Bo()).transaction(Uo,"readwrite");return yield Y.objectStore(Uo).put(T,R),yield Y.done,T})).apply(this,arguments)}function Mu(D){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,k.Z)(function*(D){const T=ao(D),H=(yield Bo()).transaction(Uo,"readwrite");yield H.objectStore(Uo).delete(T),yield H.done})).apply(this,arguments)}function ao({appConfig:D}){return D.appId}const Yn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ol(D,T){return On.apply(this,arguments)}function On(){return(On=(0,k.Z)(function*(D,T){const R=yield Ss(D),H=Pu(T),Y={method:"POST",headers:R,body:JSON.stringify(H)};let re;try{re=yield(yield fetch(Nu(D.appConfig),Y)).json()}catch(ke){throw Yn.create("token-subscribe-failed",{errorInfo:ke?.toString()})}if(re.error)throw Yn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw Yn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Fl(D,T){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,k.Z)(function*(D,T){const R=yield Ss(D),H=Pu(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(H)};let re;try{re=yield(yield fetch(`${Nu(D.appConfig)}/${T.token}`,Y)).json()}catch(ke){throw Yn.create("token-update-failed",{errorInfo:ke?.toString()})}if(re.error)throw Yn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw Yn.create("token-update-no-token");return re.token})).apply(this,arguments)}function Dr(D,T){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(D,T){const H={method:"DELETE",headers:yield Ss(D)};try{const re=yield(yield fetch(`${Nu(D.appConfig)}/${T}`,H)).json();if(re.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Y){throw Yn.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function Nu({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ss(D){return fr.apply(this,arguments)}function fr(){return(fr=(0,k.Z)(function*({appConfig:D,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Pu({p256dh:D,auth:T,endpoint:R,vapidKey:H}){const Y={web:{endpoint:R,auth:T,p256dh:D}};return H!==Sa&&(Y.web.applicationPubKey=H),Y}const uo=6048e5;function tf(D){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(D){const T=yield rf(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:io(T.getKey("auth")),p256dh:io(T.getKey("p256dh"))},H=yield xu(D.firebaseDependencies);if(H){if(Yc(H.subscriptionOptions,R))return Date.now()>=H.createTime+uo?kt(D,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield Dr(D.firebaseDependencies,H.token)}catch(Y){console.warn(Y)}return nf(D.firebaseDependencies,R)}return nf(D.firebaseDependencies,R)})).apply(this,arguments)}function Ll(D){return lo.apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(D){const T=yield xu(D.firebaseDependencies);T&&(yield Dr(D.firebaseDependencies,T.token),yield Mu(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function kt(D,T){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,k.Z)(function*(D,T){try{const R=yield Fl(D.firebaseDependencies,T),H=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield jo(D.firebaseDependencies,H),R}catch(R){throw yield Ll(D),R}})).apply(this,arguments)}function nf(D,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,k.Z)(function*(D,T){const H={token:yield Ol(D,T),createTime:Date.now(),subscriptionOptions:T};return yield jo(D,H),H.token})).apply(this,arguments)}function rf(D,T){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,k.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tg(T)})})).apply(this,arguments)}function Yc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Ul(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function sf(D,T){if(!T.notification)return;D.notification={};const R=T.notification.title;R&&(D.notification.title=R);const H=T.notification.body;H&&(D.notification.body=H);const Y=T.notification.image;Y&&(D.notification.image=Y);const re=T.notification.icon;re&&(D.notification.icon=re)}(T,D),function we(D,T){T.data&&(D.data=T.data)}(T,D),function Jt(D,T){var R,H,Y,re,ke;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;D.fcmOptions={};const tt=null!==(Y=null===(H=T.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==Y?Y:null===(re=T.notification)||void 0===re?void 0:re.click_action;tt&&(D.fcmOptions.link=tt);const pt=null===(ke=T.fcmOptions)||void 0===ke?void 0:ke.analytics_label;pt&&(D.fcmOptions.analyticsLabel=pt)}(T,D),T}function af(D){return"object"==typeof D&&!!D&&qc in D}function Qc(D,T){const R=[];for(let H=0;H<D.length;H++)R.push(D.charAt(H)),H<T.length&&R.push(T.charAt(H));return R.join("")}function Vl(D){return Yn.create("missing-app-config-values",{valueName:D})}Qc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $o{constructor(T,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function pr(D){if(!D||!D.options)throw Vl("App Configuration Object");if(!D.name)throw Vl("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const H of T)if(!R[H])throw Vl(H);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function $i(D){return Go.apply(this,arguments)}function Go(){return(Go=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ts,{scope:Lo}),D.swRegistration.update().catch(()=>{})}catch(T){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Xc(D,T){return ku.apply(this,arguments)}function ku(){return(ku=(0,k.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield $i(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function uf(D,T){return zo.apply(this,arguments)}function zo(){return(zo=(0,k.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Sa)})).apply(this,arguments)}function qr(){return(qr=(0,k.Z)(function*(D,T){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield uf(D,T?.vapidKey),yield Xc(D,T?.serviceWorkerRegistration),tf(D)})).apply(this,arguments)}function qo(D,T,R){return As.apply(this,arguments)}function As(){return(As=(0,k.Z)(function*(D,T,R){const H=$s(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[qc],message_name:R[Jh],message_time:R[Dg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $s(D){switch(D){case us.NOTIFICATION_CLICKED:return"notification_open";case us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wo(){return(Wo=(0,k.Z)(function*(D,T){const R=T.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===us.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Ul(R)):D.onMessageHandler.next(Ul(R)));const H=R.data;af(H)&&"1"===H[Aa]&&(yield qo(D,R.messageType,H))})).apply(this,arguments)}const Bl="@firebase/messaging",Gs=D=>{const T=new $o(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Jc(D,T){return Wo.apply(this,arguments)}(T,R)),T},ka=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:H=>function Lr(D,T){return qr.apply(this,arguments)}(T,H)}};function jl(){return ed.apply(this,arguments)}function ed(){return(ed=(0,k.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cf(){(0,se._registerComponent)(new ue.wA("messaging",Gs,"PUBLIC")),(0,se._registerComponent)(new ue.wA("messaging-internal",ka,"PRIVATE")),(0,se.registerVersion)(Bl,"0.12.4"),(0,se.registerVersion)(Bl,"0.12.4","esm2017")}();const nd="analytics",ii="firebase_id",Hl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hf="https://www.googletagmanager.com/gtag/js",Tr=new ye.Yd("@firebase/analytics");function ff(D){return Promise.all(D.map(T=>T.catch(R=>R)))}function Mg(D,T){const R=document.createElement("script");R.src=`${hf}?l=${D}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Oa(D,T,R,H,Y,re){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*(D,T,R,H,Y,re){const ke=H[Y];try{if(ke)yield T[ke];else{const pt=(yield ff(R)).find(lt=>lt.measurementId===Y);pt&&(yield T[pt.appId])}}catch(tt){Tr.error(tt)}D("config",Y,re)})).apply(this,arguments)}function Rs(D,T,R,H,Y){return ls.apply(this,arguments)}function ls(){return(ls=(0,k.Z)(function*(D,T,R,H,Y){try{let re=[];if(Y&&Y.send_to){let ke=Y.send_to;Array.isArray(ke)||(ke=[ke]);const tt=yield ff(R);for(const pt of ke){const lt=tt.find(It=>It.measurementId===pt),Lt=lt&&T[lt.appId];if(!Lt){re=[];break}re.push(Lt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),D("event",H,Y||{})}catch(re){Tr.error(re)}})).apply(this,arguments)}function Ko(D){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(hf)&&R.src.includes(D))return R;return null}const si=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ua=new class Ng{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function zs(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function pf(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(D){var T;const{appId:R,apiKey:H}=D,Y={method:"GET",headers:zs(H)},re=Hl.replace("{app-id}",R),ke=yield fetch(re,Y);if(200!==ke.status&&304!==ke.status){let tt="";try{const pt=yield ke.json();null!==(T=pt.error)&&void 0!==T&&T.message&&(tt=pt.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:tt})}return ke.json()})).apply(this,arguments)}function co(D){return ho.apply(this,arguments)}function ho(){return(ho=(0,k.Z)(function*(D,T=Ua,R){const{appId:H,apiKey:Y,measurementId:re}=D.options;if(!H)throw si.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:H};throw si.create("no-api-key")}const ke=T.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Ba;return setTimeout((0,k.Z)(function*(){tt.abort()}),void 0!==R?R:6e4),Va({appId:H,apiKey:Y,measurementId:re},ke,tt,T)})).apply(this,arguments)}function Va(D,T,R){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,k.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:R},H,Y=Ua){var re;const{appId:ke,measurementId:tt}=D;try{yield $l(H,T)}catch(pt){if(tt)return Tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${pt?.message}]`),{appId:ke,measurementId:tt};throw pt}try{const pt=yield pf(D);return Y.deleteThrottleMetadata(ke),pt}catch(pt){const lt=pt;if(!Gl(lt)){if(Y.deleteThrottleMetadata(ke),tt)return Tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:ke,measurementId:tt};throw pt}const Lt=503===Number(null===(re=lt?.customData)||void 0===re?void 0:re.httpStatus)?(0,ae.$s)(R,Y.intervalMillis,30):(0,ae.$s)(R,Y.intervalMillis),It={throttleEndTimeMillis:Date.now()+Lt,backoffCount:R+1};return Y.setThrottleMetadata(ke,It),Tr.debug(`Calling attemptFetch again in ${Lt} millis`),Va(D,It,H,Y)}})).apply(this,arguments)}function $l(D,T){return new Promise((R,H)=>{const Y=Math.max(T-Date.now(),0),re=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(re),H(si.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Gl(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Ba{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let zl,Xo;function Yo(){return(Yo=(0,k.Z)(function*(D,T,R,H,Y){if(Y&&Y.global)D("event",R,H);else{const re=yield T;D("event",R,Object.assign(Object.assign({},H),{send_to:re}))}})).apply(this,arguments)}function ql(D){Xo=D}function ja(D){zl=D}function ad(){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,k.Z)(function*(){if(!(0,ae.hl)())return Tr.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return Tr.warn(si.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Jo(){return(Jo=(0,k.Z)(function*(D,T,R,H,Y,re,ke){var tt;const pt=co(D);pt.then(vn=>{R[vn.measurementId]=vn.appId,D.options.measurementId&&vn.measurementId!==D.options.measurementId&&Tr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>Tr.error(vn)),T.push(pt);const lt=ad().then(vn=>{if(vn)return H.getId()}),[Lt,It]=yield Promise.all([pt,lt]);Ko(re)||Mg(re,Lt.measurementId),Xo&&(Y("consent","default",Xo),ql(void 0)),Y("js",new Date);const Wi=null!==(tt=ke?.config)&&void 0!==tt?tt:{};return Wi.origin="firebase",Wi.update=!0,null!=It&&(Wi[ii]=It),Y("config",Lt.measurementId,Wi),zl&&(Y("set",zl),ja(void 0)),Lt.measurementId})).apply(this,arguments)}class gf{constructor(T){this.app=T}_delete(){return delete zi[this.app.options.appId],Promise.resolve()}}let zi={},Wl=[];const Ha={};let Zl,oi,qi="dataLayer",Zs=!1;function ea(D,T,R){!function Kl(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((H,Y)=>`(${Y+1}) ${H}`).join(" "),R=si.create("invalid-analytics-context",{errorInfo:T});Tr.warn(R.message)}}();const H=D.options.appId;if(!H)throw si.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw si.create("no-api-key");Tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zi[H])throw si.create("already-exists",{id:H});if(!Zs){!function rd(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(qi);const{wrappedGtag:re,gtagCore:ke}=function Fu(D,T,R,H,Y){let re=function(...ke){window[H].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function id(D,T,R,H){function re(){return(re=(0,k.Z)(function*(ke,tt,pt){try{"event"===ke?yield Rs(D,T,R,tt,pt):"config"===ke?yield Oa(D,T,R,H,tt,pt):"consent"===ke?D("consent","update",pt):D("set",tt)}catch(lt){Tr.error(lt)}})).apply(this,arguments)}return function Y(ke,tt,pt){return re.apply(this,arguments)}}(re,D,T,R),{gtagCore:re,wrappedGtag:window[Y]}}(zi,Wl,Ha,qi,"gtag");oi=re,Zl=ke,Zs=!0}return zi[H]=function ud(D,T,R,H,Y,re,ke){return Jo.apply(this,arguments)}(D,Wl,Ha,T,Zl,qi,R),new gf(D)}function Yl(){return po.apply(this,arguments)}function po(){return(po=(0,k.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Qt="@firebase/analytics";!function dd(){(0,se._registerComponent)(new ue.wA(nd,(T,{options:R})=>ea(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,se._registerComponent)(new ue.wA("analytics-internal",function D(T){try{const R=T.getProvider(nd).getImmediate();return{logEvent:(H,Y,re)=>function vf(D,T,R,H){D=(0,ae.m9)(D),function fo(D,T,R,H,Y){return Yo.apply(this,arguments)}(oi,zi[D.app.options.appId],T,R,H).catch(Y=>Tr.error(Y))}(R,H,Y,re)}}catch(R){throw si.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,se.registerVersion)(Qt,"0.9.4"),(0,se.registerVersion)(Qt,"0.9.4","esm2017")}();var hd=V(4408),fd=V(7565);const fy=new class If extends fd.v{}(class Ql extends hd.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(T,R,H):(T.flush(this),0)}});var py=V(4986),Ga=V(8505),Ln=V(5363),pd=V(9468);const Bu=new d.GfV("7.5.0"),Xl="__angularfire_symbol__analyticsIsSupportedValue",Zr="__angularfire_symbol__analyticsIsSupported",Ms="__angularfire_symbol__remoteConfigIsSupportedValue",Jl="__angularfire_symbol__remoteConfigIsSupported",za="__angularfire_symbol__messagingIsSupportedValue",Ks="__angularfire_symbol__messagingIsSupported";function ai(D,T,R){if(T){if(1===T.length)return T[0];const re=T.filter(ke=>ke.app===R);if(1===re.length)return re[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[Zr]||(globalThis[Zr]=Yl().then(D=>globalThis[Xl]=D).catch(()=>globalThis[Xl]=!1)),globalThis[Ks]||(globalThis[Ks]=jl().then(D=>globalThis[za]=D).catch(()=>globalThis[za]=!1)),globalThis[Jl]||(globalThis[Jl]=Cg().then(D=>globalThis[Ms]=D).catch(()=>globalThis[Ms]=!1));const ln=(D,T)=>{const R=T?[T]:(0,$.C6)(),H=[];return R.forEach(Y=>{Y.container.getProvider(D).instances.forEach(ke=>{H.includes(ke)||H.push(ke)})}),H};function yn(){}class bf{constructor(T,R=fy){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,H){const Y=this.zone;return this.delegate.schedule(function(ke){Y.runGuarded(()=>{T.apply(this,[ke])})},R,H)}}class md{constructor(T){this.zone=T,this.task=null}call(T,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yn,{},yn,yn)),R.pipe((0,Ga.b)({next:H,complete:H,error:H})).subscribe(T).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ec=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new bf(Zone.current)),this.insideAngular=R.run(()=>new bf(Zone.current,py.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ns(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function na(D){return D.pipe((0,Ln.Q)(Ns().outsideAngular))}function bn(D){return Ns(),function st(D){return function(R){return(R=R.lift(new md(D.ngZone))).pipe((0,pd.R)(D.outsideAngular),(0,Ln.Q)(D.insideAngular))}}(Ns())(D)}},8401:(ht,Se,V)=>{V.d(Se,{$:()=>Nu,A:()=>Z,B:()=>Re,G:()=>zc,H:()=>Sn,J:()=>rr,L:()=>Zn,M:()=>Tu,N:()=>bg,P:()=>py,Q:()=>qc,R:()=>cd,T:()=>Jh,U:()=>Sa,V:()=>us,W:()=>io,X:()=>Wc,Y:()=>ri,Z:()=>Ol,_:()=>Fl,a:()=>La,a0:()=>tf,a1:()=>Ll,a2:()=>kt,a3:()=>nf,a4:()=>rf,a5:()=>Yc,a6:()=>sf,a7:()=>we,a8:()=>af,a9:()=>Qc,aA:()=>W,aB:()=>pt,aC:()=>na,aD:()=>mo,aE:()=>Er,aI:()=>zs,aL:()=>Aa,aa:()=>$i,ab:()=>Xc,ac:()=>uf,af:()=>qo,ag:()=>$s,ah:()=>Jc,ak:()=>Uo,al:()=>Ou,an:()=>hf,ao:()=>Zo,ap:()=>Ie,aq:()=>zt,ar:()=>Ye,as:()=>Pe,at:()=>ks,au:()=>Ni,av:()=>Nt,aw:()=>Oe,ax:()=>ee,ay:()=>vn,az:()=>X,b:()=>si,c:()=>za,d:()=>gy,e:()=>gd,f:()=>st,g:()=>H,h:()=>D,i:()=>Uu,j:()=>ke,k:()=>Id,l:()=>Ef,m:()=>bd,o:()=>fe,r:()=>hd,s:()=>wf,u:()=>fy});var d=V(5861),$=V(2090),k=V(9681),se=V(1877),ae=V(655),ue=V(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ge=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new se.Yd("@firebase/auth");function De(w,...g){Te.logLevel<=se.in.ERROR&&Te.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function Pe(w,...g){throw $e(w,...g)}function Oe(w,...g){return $e(w,...g)}function Me(w,g,_){const I=Object.assign(Object.assign({},Ge()),{[g]:_});return new $.LL("auth","Firebase",I).create(g,{appName:w.name})}function Ae(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Pe(w,"argument-error"),Me(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(w,...g){if("string"!=typeof w){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return rt.create(w,...g)}function ee(w,g,..._){if(!w)throw $e(g,..._)}function ce(w){const g="INTERNAL ASSERTION FAILED: "+w;throw De(g),new Error(g)}function Ie(w,g){w||ce(g)}const Q=new Map;function X(w){Ie(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(Ie(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function Le(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===_t()||"https:"===_t()}function _t(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class bt{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ie(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bt(w,g){Ie(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Et{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cr=new bt(3e4,6e4);function Wt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function wt(w,g,_,I){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(w,g,_,I,x={}){return ss(w,x,(0,d.Z)(function*(){let U={},ne={};I&&("GET"===g?ne=I:U={body:JSON.stringify(I)});const xe=(0,$.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),Qe=yield w._getAdditionalHeaders();return Qe["Content-Type"]="application/json",w.languageCode&&(Qe["X-Firebase-Locale"]=w.languageCode),Et.fetch()(Es(w,w.config.apiHost,_,xe),Object.assign({method:g,headers:Qe,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function ss(w,g,_){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},Xt),g);try{const x=new ji(w),U=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const ne=yield U.json();if("needConfirmation"in ne)throw Gn(w,"account-exists-with-different-credential",ne);if(U.ok&&!("errorMessage"in ne))return ne;{const xe=U.ok?ne.errorMessage:ne.error.message,[Qe,ot]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qe)throw Gn(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===Qe)throw Gn(w,"email-already-in-use",ne);if("USER_DISABLED"===Qe)throw Gn(w,"user-disabled",ne);const Ht=I[Qe]||Qe.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Me(w,Ht,ot);Pe(w,Ht)}}catch(x){if(x instanceof $.ZR)throw x;Pe(w,"internal-error",{message:String(x)})}})).apply(this,arguments)}function xn(w,g,_,I){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(w,g,_,I,x={}){const U=yield wt(w,g,_,I,x);return"mfaPendingCredential"in U&&Pe(w,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function Es(w,g,_,I){const x=`${g}${_}?${I}`;return w.config.emulator?Bt(w.config,x):`${w.config.apiScheme}://${x}`}class ji{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Oe(this.auth,"network-request-failed")),cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(w,g,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Oe(w,g,I);return x.customData._tokenResponse=_,x}function Di(){return(Di=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function _n(w,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function et(w,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function kr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ti(){return(ti=(0,d.Z)(function*(w,g=!1){const _=(0,$.m9)(w),I=yield _.getIdToken(g),x=ft(I);ee(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const U="object"==typeof x.firebase?x.firebase:void 0,ne=U?.sign_in_provider;return{claims:x,token:I,authTime:kr(xt(x.auth_time)),issuedAtTime:kr(xt(x.iat)),expirationTime:kr(xt(x.exp)),signInProvider:ne||null,signInSecondFactor:U?.sign_in_second_factor||null}})).apply(this,arguments)}function xt(w){return 1e3*Number(w)}function ft(w){const[g,_,I]=w.split(".");if(void 0===g||void 0===_||void 0===I)return De("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,$.tV)(_);return x?JSON.parse(x):(De("Failed to decode base64 JWT payload"),null)}catch(x){return De("Caught error parsing JWT payload as JSON",x?.toString()),null}}function En(w,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof $.ZR&&qn(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function qn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class vr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class dr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=kr(this.lastLoginAt),this.creationTime=kr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ti(w){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(w){var g;const _=w.auth,I=yield w.getIdToken(),x=yield En(w,et(_,{idToken:I}));ee(x?.users.length,_,"internal-error");const U=x.users[0];w._notifyReloadListener(U);const ne=null!==(g=U.providerUserInfo)&&void 0!==g&&g.length?Wn(U.providerUserInfo):[],xe=ni(w.providerData,ne),Ht=!!w.isAnonymous&&!(w.email&&U.passwordHash||xe?.length),Nn={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:xe,metadata:new dr(U.createdAt,U.lastLoginAt),isAnonymous:Ht};Object.assign(w,Nn)})).apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(w){const g=(0,$.m9)(w);yield Ti(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ni(w,g){return[...w.filter(I=>!g.some(x=>x.providerId===I.providerId)),...g]}function Wn(w){return w.map(g=>{var{providerId:_}=g,I=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function be(){return(be=(0,d.Z)(function*(w,g){const _=yield ss(w,{},(0,d.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:U}=w.config,ne=Es(w,x,"/v1/token",`key=${U}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",Et.fetch()(ne,{method:"POST",headers:xe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ee(g.idToken,"internal-error"),ee(typeof g.idToken<"u","internal-error"),ee(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Rt(w){const g=ft(w);return ee(g,"internal-error"),ee(typeof g.exp<"u","internal-error"),ee(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,d.Z)(function*(){return ee(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:U,expiresIn:ne}=yield function He(w,g){return be.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(x,U,Number(ne))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:x,expirationTime:U}=_,ne=new Xe;return I&&(ee("string"==typeof I,"internal-error",{appName:g}),ne.refreshToken=I),x&&(ee("string"==typeof x,"internal-error",{appName:g}),ne.accessToken=x),U&&(ee("number"==typeof U,"internal-error",{appName:g}),ne.expirationTime=U),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return ce("not implemented")}}function yt(w,g){ee("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class St{constructor(g){var{uid:_,auth:I,stsTokenManager:x}=g,U=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new dr(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const I=yield En(_,_.stsTokenManager.getToken(_.auth,g));return ee(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function zn(w){return ti.apply(this,arguments)}(this,g)}reload(){return function Si(w){return jt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new St(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,d.Z)(function*(){let x=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Ti(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield En(g,function hi(w,g){return Di.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,x,U,ne,xe,Qe,ot,Ht;const Nn=null!==(I=_.displayName)&&void 0!==I?I:void 0,Pi=null!==(x=_.email)&&void 0!==x?x:void 0,Ys=null!==(U=_.phoneNumber)&&void 0!==U?U:void 0,oa=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,aa=null!==(xe=_.tenantId)&&void 0!==xe?xe:void 0,Gu=null!==(Qe=_._redirectEventId)&&void 0!==Qe?Qe:void 0,zu=null!==(ot=_.createdAt)&&void 0!==ot?ot:void 0,qu=null!==(Ht=_.lastLoginAt)&&void 0!==Ht?Ht:void 0,{uid:Td,emailVerified:Iy,isAnonymous:Mf,providerData:zg,stsTokenManager:Wa}=_;ee(Td&&Wa,g,"internal-error");const Sd=Xe.fromJSON(this.name,Wa);ee("string"==typeof Td,g,"internal-error"),yt(Nn,g.name),yt(Pi,g.name),ee("boolean"==typeof Iy,g,"internal-error"),ee("boolean"==typeof Mf,g,"internal-error"),yt(Ys,g.name),yt(oa,g.name),yt(aa,g.name),yt(Gu,g.name),yt(zu,g.name),yt(qu,g.name);const Wu=new St({uid:Td,auth:g,email:Pi,emailVerified:Iy,displayName:Nn,isAnonymous:Mf,photoURL:oa,phoneNumber:Ys,tenantId:aa,stsTokenManager:Sd,createdAt:zu,lastLoginAt:qu});return zg&&Array.isArray(zg)&&(Wu.providerData=zg.map(Zu=>Object.assign({},Zu))),Gu&&(Wu._redirectEventId=Gu),Wu}static _fromIdTokenResponse(g,_,I=!1){return(0,d.Z)(function*(){const x=new Xe;x.updateFromServerResponse(_);const U=new St({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:I});return yield Ti(U),U})()}}const Zn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,d.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,d.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,d.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function W(w,g,_){return`firebase:${w}:${g}:${_}`}class z{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:x,name:U}=this.auth;this.fullUserKey=W(this.userKey,x.apiKey,U),this.fullPersistenceKey=W("persistence",x.apiKey,U),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?St._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,d.Z)(function*(){if(!_.length)return new z(X(Zn),g,I);const x=(yield Promise.all(_.map(function(){var ot=(0,d.Z)(function*(Ht){if(yield Ht._isAvailable())return Ht});return function(Ht){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let U=x[0]||X(Zn);const ne=W(I,g.config.apiKey,g.name);let xe=null;for(const ot of _)try{const Ht=yield ot._get(ne);if(Ht){const Nn=St._fromJSON(g,Ht);ot!==U&&(xe=Nn),U=ot;break}}catch{}const Qe=x.filter(ot=>ot._shouldAllowMigration);return U._shouldAllowMigration&&Qe.length?(U=Qe[0],xe&&(yield U._set(ne,xe.toJSON())),yield Promise.all(_.map(function(){var ot=(0,d.Z)(function*(Ht){if(Ht!==U)try{yield Ht._remove(ne)}catch{}});return function(Ht){return ot.apply(this,arguments)}}())),new z(U,g,I)):new z(U,g,I)})()}}function O(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ee(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(F(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ze(g))return"Blackberry";if(Dt(g))return"Webos";if(P(g))return"Safari";if((g.includes("chrome/")||te(g))&&!g.includes("edge/"))return"Chrome";if(Ye(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function F(w=(0,$.z$)()){return/firefox\//i.test(w)}function P(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function te(w=(0,$.z$)()){return/crios\//i.test(w)}function Ee(w=(0,$.z$)()){return/iemobile/i.test(w)}function Ye(w=(0,$.z$)()){return/android/i.test(w)}function ze(w=(0,$.z$)()){return/blackberry/i.test(w)}function Dt(w=(0,$.z$)()){return/webos/i.test(w)}function zt(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Nt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function wr(w=(0,$.z$)()){return zt(w)||Ye(w)||Dt(w)||ze(w)||/windows phone/i.test(w)||Ee(w)}function Po(w,g=[]){let _;switch(w){case"Browser":_=O((0,$.z$)());break;case"Worker":_=`${O((0,$.z$)())}-${w}`;break;default:_=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${I}`}class xl{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=U=>new Promise((ne,xe)=>{try{ne(g(U))}catch(Qe){xe(Qe)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===g)return;const I=[];try{for(const x of _.queue)yield x(g),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const U of I)try{U()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Rl{constructor(g,_,I){this.app=g,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ko(this),this.idTokenSubscription=new ko(this),this.beforeStateQueue=new xl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=X(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,U;if(!I._deleted&&(I.persistenceManager=yield z.create(I,g),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(U=I.currentUser)||void 0===U?void 0:U.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let U=x,ne=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Qe=U?._redirectEventId,ot=yield _.tryRedirectSignIn(g);(!xe||xe===Qe)&&ot?.user&&(U=ot.user,ne=!0)}if(!U)return _.directlySetCurrentUser(null);if(!U._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(U)}catch(xe){U=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xe))}return U?_.reloadAndSetCurrentUserOrClear(U):_.directlySetCurrentUser(null)}return ee(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===U._redirectEventId?_.directlySetCurrentUser(U):_.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){try{yield Ti(g)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function mn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const I=g?(0,$.m9)(g):null;return I&&ee(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return g&&ee(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(X(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,d.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&X(g)||_._popupRedirectResolver;ee(I,_,"argument-error"),_.redirectPersistenceManager=yield z.create(_,[X(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,x){if(this._deleted)return()=>{};const U="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(ne,this,"internal-error"),ne.then(()=>U(this.currentUser)),"function"==typeof _?g.addObserver(_,I,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function Er(w){return(0,$.m9)(w)}class ko{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zc(w,g,_){const I=Er(w);ee(I._canInitEmulator,I,"emulator-config-failed"),ee(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,U=Ml(g),{host:ne,port:xe}=function Eu(w){const g=Ml(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const U=x[1];return{host:U,port:Oo(I.substr(U.length+1))}}{const[U,ne]=I.split(":");return{host:U,port:Oo(ne)}}}(g);I.config.emulator={url:`${U}//${ne}${null===xe?"":`:${xe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ne,port:xe,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function on(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ml(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Oo(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Sn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ce("not implemented")}_getIdTokenResponse(g){return ce("not implemented")}_linkToIdToken(g,_){return ce("not implemented")}_getReauthenticationResolver(g){return ce("not implemented")}}function Or(w,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:resetPassword",Wt(w,g))})).apply(this,arguments)}function Gr(w,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Je(w,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",Wt(w,g))})).apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPassword",Wt(w,g))})).apply(this,arguments)}function as(w,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:sendOobCode",Wt(w,g))})).apply(this,arguments)}function pi(w,g){return In.apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Iu(w,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function qt(w,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Fo(w,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(w,g){return as(w,g)})).apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Wt(w,g))})).apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Wt(w,g))})).apply(this,arguments)}class gi extends Sn{constructor(g,_,I,x=null){super("password",I),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new gi(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new gi(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Mn(w,g){return Fr.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Is(w,g){return Ir.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Pe(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return Gr(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Cu(w,g){return Cs.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:Pe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ai(w,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithIdp",Wt(w,g))})).apply(this,arguments)}class rr extends Sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new rr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Pe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x}=_,U=(0,ae._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const ne=new rr(I,x);return ne.idToken=U.idToken||void 0,ne.accessToken=U.accessToken||void 0,ne.secret=U.secret,ne.nonce=U.nonce,ne.pendingToken=U.pendingToken||null,ne}_getIdTokenResponse(g){return Ai(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Ai(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ai(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Pl(w,g){return bu.apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:sendVerificationCode",Wt(w,g))})).apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,g))})).apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(w,g){const _=yield xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,g));if(_.temporaryProof)throw Gn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ig={USER_NOT_FOUND:"user-not-found"};function _i(){return(_i=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Wt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ig)})).apply(this,arguments)}class Ds extends Sn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Ds({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Ds({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Du(w,g){return bs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function xi(w,g){return Cr.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function mi(w,g){return _i.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:U}=g;return I||_||x||U?new Ds({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:U}):null}}class br{constructor(g){var _,I,x,U,ne,xe;const Qe=(0,$.zd)((0,$.pd)(g)),ot=null!==(_=Qe.apiKey)&&void 0!==_?_:null,Ht=null!==(I=Qe.oobCode)&&void 0!==I?I:null,Nn=function Ta(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Qe.mode)&&void 0!==x?x:null);ee(ot&&Ht&&Nn,"argument-error"),this.apiKey=ot,this.operation=Nn,this.code=Ht,this.continueUrl=null!==(U=Qe.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(ne=Qe.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(xe=Qe.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const _=function kl(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||_||g||w}(g);try{return new br(_)}catch{return null}}}let Tu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return gi._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=br.parseLink(I);return ee(x,"argument-error"),gi._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ts{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Lo extends Ts{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Sa extends Lo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ee("providerId"in _&&"signInMethod"in _,"argument-error"),rr._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ee(g.idToken||g.accessToken,"argument-error"),rr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Sa.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Sa.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:U,nonce:ne,providerId:xe}=g;if(!I&&!x&&!_&&!U||!xe)return null;try{return new Sa(xe)._credential({idToken:_,accessToken:I,nonce:ne,pendingToken:U})}catch{return null}}}let bg=(()=>{class w extends Lo{constructor(){super("facebook.com")}static credential(_){return rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),qc=(()=>{class w extends Lo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Jh=(()=>{class w extends Lo{constructor(){super("github.com")}static credential(_){return rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Aa extends Sn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Ai(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Ai(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ai(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x,pendingToken:U}=_;return I&&x&&U&&I===x?new Aa(I,U):null}static _create(g,_){return new Aa(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class us extends Ts{constructor(g){ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return us.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return us.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Aa.fromJSON(g);return ee(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return Aa._create(I,_)}catch{return null}}}let io=(()=>{class w extends Lo{constructor(){super("twitter.com")}static credential(_,I){return rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Tg(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signUp",Wt(w,g))})).apply(this,arguments)}class Ri{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,x=!1){return(0,d.Z)(function*(){const U=yield St._fromIdTokenResponse(g,I,x),ne=Su(I);return new Ri({user:U,providerId:ne,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const x=Su(I);return new Ri({user:g,providerId:x,_tokenResponse:I,operationType:_})})()}}function Su(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Wc(w){return Au.apply(this,arguments)}function Au(){return(Au=(0,d.Z)(function*(w){var g;const _=Er(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Ri({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Tg(_,{returnSecureToken:!0}),x=yield Ri._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Zc extends $.ZR{constructor(g,_,I,x){var U;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:g.name,tenantId:null!==(U=g.tenantId)&&void 0!==U?U:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,x){return new Zc(g,_,I,x)}}function Kc(w,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?Zc._fromErrorAndOperation(w,U,g,I):U})}function so(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Uo(w,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);yield oo(!0,_,g);const{providerUserInfo:I}=yield _n(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=so(I||[]);return _.providerData=_.providerData.filter(U=>x.has(U.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Bo(w,g){return xu.apply(this,arguments)}function xu(){return(xu=(0,d.Z)(function*(w,g,_=!1){const I=yield En(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Ri._forOperation(w,"link",I)})).apply(this,arguments)}function oo(w,g,_){return jo.apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(w,g,_){yield Ti(g);const x=!1===w?"provider-already-linked":"no-such-provider";ee(so(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function Ru(w,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(w,g,_=!1){const{auth:I}=w,x="reauthenticate";try{const U=yield En(w,Kc(I,x,g,w),_);ee(U.idToken,I,"internal-error");const ne=ft(U.idToken);ee(ne,I,"internal-error");const{sub:xe}=ne;return ee(w.uid===xe,I,"user-mismatch"),Ri._forOperation(w,x,U)}catch(U){throw"auth/user-not-found"===U?.code&&Pe(I,"user-mismatch"),U}})).apply(this,arguments)}function Ra(w,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(w,g,_=!1){const I="signIn",x=yield Kc(w,I,g),U=yield Ri._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(U.user)),U})).apply(this,arguments)}function ri(w,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(w,g){return Ra(Er(w),g)})).apply(this,arguments)}function Ol(w,g){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);return yield oo(!1,_,g.providerId),Bo(_,g)})).apply(this,arguments)}function Fl(w,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(w,g){return Ru((0,$.m9)(w),g)})).apply(this,arguments)}function Dr(w,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithCustomToken",Wt(w,g))})).apply(this,arguments)}function Nu(w,g){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(w,g){const _=Er(w),I=yield Dr(_,{token:g,returnSecureToken:!0}),x=yield Ri._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class fr{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Pu._fromServerResponse(g,_):Pe(g,"internal-error")}}class Pu extends fr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Pu(_)}}function uo(w,g,_){var I;ee((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ee(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ee(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ee(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function tf(w,g,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&uo(I,x,_),yield Iu(I,x)})).apply(this,arguments)}function Ll(w,g,_){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(w,g,_){yield Or((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function kt(w,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(w,g){yield Je((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function nf(w,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),I=yield Or(_,{oobCode:g}),x=I.requestType;switch(ee(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(I.mfaInfo,_,"internal-error");default:ee(I.email,_,"internal-error")}let U=null;return I.mfaInfo&&(U=fr._fromServerResponse(Er(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:U},operation:x}})).apply(this,arguments)}function rf(w,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(w,g){const{data:_}=yield nf((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function Yc(w,g,_){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(w,g,_){const I=Er(w),x=yield Tg(I,{returnSecureToken:!0,email:g,password:_}),U=yield Ri._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(U.user),U})).apply(this,arguments)}function sf(w,g,_){return ri((0,$.m9)(w),Tu.credential(g,_))}function we(w,g,_){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};ee(_.handleCodeInApp,I,"argument-error"),_&&uo(I,x,_),yield qt(I,x)})).apply(this,arguments)}function af(w,g){return"EMAIL_SIGNIN"===br.parseLink(g)?.operation}function Qc(w,g,_){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w),x=Tu.credentialWithLink(g,_||Le());return ee(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ri(I,x)})).apply(this,arguments)}function Vl(w,g){return $o.apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:createAuthUri",Wt(w,g))})).apply(this,arguments)}function $i(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(w,g){const I={identifier:g,continueUri:Ue()?Le():"http://localhost"},{signinMethods:x}=yield Vl((0,$.m9)(w),I);return x||[]})).apply(this,arguments)}function Xc(w,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&uo(_.auth,x,g);const{email:U}=yield pi(_.auth,x);U!==w.email&&(yield w.reload())})).apply(this,arguments)}function uf(w,g,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&uo(I.auth,U,_);const{email:ne}=yield Fo(I.auth,U);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function Lr(w,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,d.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function qo(w,g){return As.apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,$.m9)(w),U={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ne=yield En(I,Lr(I.auth,U));I.displayName=ne.displayName||null,I.photoURL=ne.photoUrl||null;const xe=I.providerData.find(({providerId:Qe})=>"password"===Qe);xe&&(xe.displayName=I.displayName,xe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ne)})).apply(this,arguments)}function $s(w,g){return Wo((0,$.m9)(w),g,null)}function Jc(w,g){return Wo((0,$.m9)(w),null,g)}function Wo(w,g,_){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(w,g,_){const{auth:I}=w,U={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(U.email=g),_&&(U.password=_);const ne=yield En(w,Gr(I,U));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Gs{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class ka extends Gs{constructor(g,_,I,x){super(g,_,I),this.username=x}}class cf extends Gs{constructor(g,_){super(g,"facebook.com",_)}}class jl extends ka{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class ed extends Gs{constructor(g,_){super(g,"google.com",_)}}class df extends ka{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Ou(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function lf(w){var g,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},U=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const ne=null===(_=null===(g=ft(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Gs(U,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!I)return null;switch(I){case"facebook.com":return new cf(U,x);case"github.com":return new jl(U,x);case"google.com":return new ed(U,x);case"twitter.com":return new df(U,x,w.screenName||null);case"custom":case"anonymous":return new Gs(U,null);default:return new Gs(U,I,x)}}(_)}class pn{constructor(g,_,I){this.type=g,this.credential=_,this.auth=I}static _fromIdtoken(g,_){return new pn("enroll",g,_)}static _fromMfaPendingCredential(g){return new pn("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return pn._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return pn._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Hl{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=Er(g),x=_.customData._serverResponse,U=(x.mfaInfo||[]).map(xe=>fr._fromServerResponse(I,xe));ee(x.mfaPendingCredential,I,"internal-error");const ne=pn._fromMfaPendingCredential(x.mfaPendingCredential);return new Hl(ne,U,function(){var xe=(0,d.Z)(function*(Qe){const ot=yield Qe._process(I,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const Ht=Object.assign(Object.assign({},x),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(_.operationType){case"signIn":const Nn=yield Ri._fromIdTokenResponse(I,_.operationType,Ht);return yield I._updateCurrentUser(Nn.user),Nn;case"reauthenticate":return ee(_.user,I,"internal-error"),Ri._forOperation(_.user,_.operationType,Ht);default:Pe(I,"internal-error")}});return function(Qe){return xe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function hf(w,g){var _;const I=(0,$.m9)(w),x=g;return ee(g.customData.operationType,I,"argument-error"),ee(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Hl._fromError(I,x)}function Tr(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:start",Wt(w,g))}class rd{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>fr._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new rd(g)}getSession(){var g=this;return(0,d.Z)(function*(){return pn._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var I=this;return(0,d.Z)(function*(){const x=g,U=yield I.getSession(),ne=yield En(I.user,x._process(I.user.auth,U,_));return yield I.user._updateTokensIfNecessary(ne),I.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){const I="string"==typeof g?g:g.uid,x=yield _.user.getIdToken();try{const U=yield En(_.user,function Mg(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(w,g))}(_.user.auth,{idToken:x,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ne})=>ne!==I),yield _.user._updateTokensIfNecessary(U),yield _.user.reload()}catch(U){throw U}})()}}const Oa=new WeakMap;function Zo(w){const g=(0,$.m9)(w);return Oa.has(g)||Oa.set(g,rd._fromUser(g)),Oa.get(g)}const Rs="__sak";class ls{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Rs,"1"),this.storage.removeItem(Rs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const si=(()=>{class w extends ls{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function id(){const w=(0,$.z$)();return P(w)||zt(w)}()&&function Al(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=wr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),U=this.localCache[I];x!==U&&_(I,U,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((xe,Qe,ot)=>{this.notifyListeners(xe,ot)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(_.newValue!==xe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const U=()=>{const xe=this.storage.getItem(x);!I&&this.localCache[x]===xe||this.notifyListeners(x,xe)},ne=this.storage.getItem(x);!function Tt(){return(0,$.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?U():setTimeout(U,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const U of Array.from(x))U(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,U=this;return(0,d.Z)(function*(){yield x().call(U,_,I),U.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,d.Z)(function*(){const U=yield I().call(x,_);return x.localCache[_]=JSON.stringify(U),U})()}_remove(_){var I=()=>super._remove,x=this;return(0,d.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),La=(()=>{class w extends ls{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Ua=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(U=>U.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,d.Z)(function*(){const x=_,{eventId:U,eventType:ne,data:xe}=x.data,Qe=I.handlersMap[ne];if(!Qe?.size)return;x.ports[0].postMessage({status:"ack",eventId:U,eventType:ne});const ot=Array.from(Qe).map(function(){var Nn=(0,d.Z)(function*(Pi){return Pi(x.origin,xe)});return function(Pi){return Nn.apply(this,arguments)}}()),Ht=yield function Ng(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(ot);x.ports[0].postMessage({status:"done",eventId:U,eventType:ne,response:Ht})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function zs(w="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return w+_}class pf{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var x=this;return(0,d.Z)(function*(){const U=typeof MessageChannel<"u"?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let ne,xe;return new Promise((Qe,ot)=>{const Ht=zs("",20);U.port1.start();const Nn=setTimeout(()=>{ot(new Error("unsupported_event"))},I);xe={messageChannel:U,onMessage(Pi){const Ys=Pi;if(Ys.data.eventId===Ht)switch(Ys.data.status){case"ack":clearTimeout(Nn),ne=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),Qe(Ys.data.response);break;default:clearTimeout(Nn),clearTimeout(ne),ot(new Error("invalid_response"))}}},x.handlers.add(xe),U.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:g,eventId:Ht,data:_},[U.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function Fn(){return window}function ho(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function Gi(){return(Gi=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ba="firebaseLocalStorageDb",fo="firebaseLocalStorage",Yo="fbase_key";class cs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Qo(w,g){return w.transaction([fo],g?"readwrite":"readonly").objectStore(fo)}function qs(){const w=indexedDB.open(Ba,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(fo,{keyPath:Yo})}catch(x){_(x)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains(fo)?g(I):(I.close(),yield function Lu(){const w=indexedDB.deleteDatabase(Ba);return new cs(w).toPromise()}(),g(yield qs()))}))})}function sd(w,g,_){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(w,g,_){const I=Qo(w,!0).put({[Yo]:g,value:_});return new cs(I).toPromise()})).apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(w,g){const _=Qo(w,!1).get(g),I=yield new cs(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Xo(w,g){const _=Qo(w,!0).delete(g);return new cs(_).toPromise()}const Uu=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield qs()),_.db})()}_withRetries(_){var I=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const U=yield I._openDb();return yield _(U)}catch(U){if(x++>3)throw U;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return ho()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Ua._getInstance(function Gl(){return ho()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(x,U){return{keyProcessed:(yield _._poll()).includes(U.key)}});return function(x,U){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(x,U){return["keyChanged"]});return function(x,U){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function Va(){return Gi.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new pf(_.activeServiceWorker);const U=yield _.sender._send("ping",{},800);U&&null!==(I=U[0])&&void 0!==I&&I.fulfilled&&null!==(x=U[0])&&void 0!==x&&x.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function $l(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield qs();return yield sd(_,Rs,"1"),yield Xo(_,Rs),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(U=>sd(U,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,d.Z)(function*(){const x=yield I._withRetries(U=>function od(w,g){return Ws.apply(this,arguments)}(U,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(x=>Xo(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const I=yield _._withRetries(ne=>{const xe=Qo(ne,!1).getAll();return new cs(xe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],U=new Set;for(const{fbase_key:ne,value:xe}of I)U.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(xe)&&(_.notifyListeners(ne,xe),x.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!U.has(ne)&&(_.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const U of Array.from(x))U(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function ud(w,g){return wt(w,"POST","/v2/accounts/mfaSignIn:start",Wt(w,g))}function zi(){return(zi=(0,d.Z)(function*(w){return(yield wt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ha(w){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=x=>{const U=Oe("internal-error");U.customData=x,_(U)},I.type="text/javascript",I.charset="UTF-8",function Wl(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function qi(w){return`__${w}${Math.floor(1e6*Math.random())}`}const oi=1e12;class Zs{constructor(g){this.auth=g,this.counter=oi,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new mf(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||oi;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||oi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var I;return null===(I=_._widgets.get(g||oi))||void 0===I||I.execute(),""})()}}class mf{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ee(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kl(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ea=qi("rcb"),Pg=new bt(3e4,6e4);class Yl{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Fn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ee(function po(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Fn().grecaptcha):new Promise((I,x)=>{const U=Fn().setTimeout(()=>{x(Oe(g,"network-request-failed"))},Pg.get());Fn()[ea]=()=>{Fn().clearTimeout(U),delete Fn()[ea];const xe=Fn().grecaptcha;if(!xe)return void x(Oe(g,"internal-error"));const Qe=xe.render;xe.render=(ot,Ht)=>{const Nn=Qe(ot,Ht);return this.counter++,Nn},this.hostLanguage=_,I(xe)},Ha(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:ea,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(U),x(Oe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Fn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $a{load(g){return(0,d.Z)(function*(){return new Zs(g)})()}clearedOneInstance(){}}const go="recaptcha",yf={theme:"light",type:"image"};class cd{constructor(g,_=Object.assign({},yf),I){this.parameters=_,this.type=go,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Er(I),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ee(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $a:new Yl,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(U=>{const ne=xe=>{xe&&(g.tokenChangeListeners.delete(ne),U(xe))};g.tokenChangeListeners.add(ne),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=Fn()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ee(Ue()&&!ho(),g.auth,"internal-error"),yield function Vu(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function gf(w){return zi.apply(this,arguments)}(g.auth);ee(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vf{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Ds._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function wf(w,g,_){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,d.Z)(function*(w,g,_){const I=Er(w),x=yield fd(I,g,(0,$.m9)(_));return new vf(x,U=>ri(I,U))})).apply(this,arguments)}function Ef(w,g,_){return dd.apply(this,arguments)}function dd(){return(dd=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w);yield oo(!1,I,"phone");const x=yield fd(I.auth,g,(0,$.m9)(_));return new vf(x,U=>Ol(I,U))})).apply(this,arguments)}function hd(w,g,_){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w),x=yield fd(I.auth,g,(0,$.m9)(_));return new vf(x,U=>Fl(I,U))})).apply(this,arguments)}function fd(w,g,_){return If.apply(this,arguments)}function If(){return(If=(0,d.Z)(function*(w,g,_){var I;const x=yield _.verify();try{let U;if(ee("string"==typeof x,w,"argument-error"),ee(_.type===go,w,"argument-error"),U="string"==typeof g?{phoneNumber:g}:g,"session"in U){const ne=U.session;if("phoneNumber"in U)return ee("enroll"===ne.type,w,"internal-error"),(yield Tr(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ee("signin"===ne.type,w,"internal-error");const xe=(null===(I=U.multiFactorHint)||void 0===I?void 0:I.uid)||U.multiFactorUid;return ee(xe,w,"missing-multi-factor-info"),(yield ud(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Pl(w,{phoneNumber:U.phoneNumber,recaptchaToken:x});return ne}}finally{_._reset()}})).apply(this,arguments)}function fy(w,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(w,g){yield Bo((0,$.m9)(w),g)})).apply(this,arguments)}let py=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Er(_)}verifyPhoneNumber(_,I){return fd(this.auth,_,(0,$.m9)(I))}static credential(_,I){return Ds._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?Ds._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ga(w,g){return g?X(g):(ee(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Ln extends Sn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ai(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Ai(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Ai(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function pd(w){return Ra(w.auth,new Ln(w),w.bypassAuthState)}function Bu(w){const{auth:g,user:_}=w;return ee(_,g,"internal-error"),Ru(_,new Ln(w),w.bypassAuthState)}function Xl(w){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return ee(_,g,"internal-error"),Bo(_,new Ln(w),w.bypassAuthState)})).apply(this,arguments)}class Ms{constructor(g,_,I,x,U=!1){this.auth=g,this.resolver=I,this.user=x,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(I,x){g.pendingPromise={resolve:I,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(U){g.reject(U)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:U,tenantId:ne,error:xe,type:Qe}=g;if(xe)return void _.reject(xe);const ot={auth:_.auth,requestUri:I,sessionId:x,tenantId:ne||void 0,postBody:U||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Qe)(ot))}catch(Ht){_.reject(Ht)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return pd;case"linkViaPopup":case"linkViaRedirect":return Xl;case"reauthViaPopup":case"reauthViaRedirect":return Bu;default:Pe(this.auth,"internal-error")}}resolve(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jl=new bt(2e3,1e4);function za(w,g,_){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(w,g,_){const I=Er(w);Ae(w,g,Ts);const x=Ga(I,_);return new ai(I,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function gd(w,g,_){return kg.apply(this,arguments)}function kg(){return(kg=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w);Ae(I.auth,g,Ts);const x=Ga(I.auth,_);return new ai(I.auth,"reauthViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}function gy(w,g,_){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w);Ae(I.auth,g,Ts);const x=Ga(I.auth,_);return new ai(I.auth,"linkViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}let ai=(()=>{class w extends Ms{constructor(_,I,x,U,ne){super(_,I,U,ne),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const I=yield _.execute();return ee(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ie(1===_.filter.length,"Popup operations only handle one event");const I=zs();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Oe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Jl.get())};_()}}return w.currentPopupAction=null,w})();const yn=new Map;class bf extends Ms{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let I=yn.get(_.auth._key());if(!I){try{const U=(yield function md(w,g){return ec.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(U)}catch(x){I=()=>Promise.reject(x)}yn.set(_.auth._key(),I)}return _.bypassAuthState||yn.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const x=yield I.auth._redirectUserForId(g.eventId);if(x)return I.user=x,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ec(){return(ec=(0,d.Z)(function*(w,g){const _=bn(g),I=_o(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function Ns(w,g){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(w,g){return _o(w)._set(bn(g),"true")})).apply(this,arguments)}function mo(){yn.clear()}function na(w,g){yn.set(w._key(),g)}function _o(w){return X(w._redirectPersistence)}function bn(w){return W("pendingRedirect",w.config.apiKey,w.name)}function st(w,g,_){return function tc(w,g,_){return ra.apply(this,arguments)}(w,g,_)}function ra(){return(ra=(0,d.Z)(function*(w,g,_){const I=Er(w);Ae(w,g,Ts),yield I._initializationPromise;const x=Ga(I,_);return yield Ns(x,I),x._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function D(w,g,_){return function T(w,g,_){return R.apply(this,arguments)}(w,g,_)}function R(){return(R=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w);Ae(I.auth,g,Ts),yield I.auth._initializationPromise;const x=Ga(I.auth,_);yield Ns(x,I.auth);const U=yield Lt(I);return x._openRedirect(I.auth,g,"reauthViaRedirect",U)})).apply(this,arguments)}function H(w,g,_){return function Y(w,g,_){return re.apply(this,arguments)}(w,g,_)}function re(){return(re=(0,d.Z)(function*(w,g,_){const I=(0,$.m9)(w);Ae(I.auth,g,Ts),yield I.auth._initializationPromise;const x=Ga(I.auth,_);yield oo(!1,I,g.providerId),yield Ns(x,I.auth);const U=yield Lt(I);return x._openRedirect(I.auth,g,"linkViaRedirect",U)})).apply(this,arguments)}function ke(w,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(w,g){return yield Er(w)._initializationPromise,pt(w,g,!1)})).apply(this,arguments)}function pt(w,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(w,g,_=!1){const I=Er(w),x=Ga(I,g),ne=yield new bf(I,x,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield I._persistUserIfCurrent(ne.user),yield I._setRedirectUser(null,g)),ne})).apply(this,arguments)}function Lt(w){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(w){const g=zs(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class vn{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Mi(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gr(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!gr(g)){const x=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Oe(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ia(g))}saveEventToCache(g){this.cachedEventUids.add(ia(g)),this.lastProcessedEventTime=Date.now()}}function ia(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function gr({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Ni(w){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(w,g={}){return wt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const sa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Df=/^https?/;function nc(){return(nc=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Ni(w);for(const _ of g)try{if(my(_))return}catch{}Pe(w,"unauthorized-domain")})).apply(this,arguments)}function my(w){const g=Le(),{protocol:_,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===I}if(!Df.test(_))return!1;if(sa.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Tf=new bt(3e4,6e4);function Fg(){const w=Fn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let qa=null;function _d(w){return qa=qa||function Lg(w){return new Promise((g,_)=>{var I,x,U;function ne(){Fg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Fg(),_(Oe(w,"network-request-failed"))},timeout:Tf.get()})}if(null!==(x=null===(I=Fn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(U=Fn().gapi)||void 0===U||!U.load){const xe=qi("iframefcb");return Fn()[xe]=()=>{gapi.load?ne():_(Oe(w,"network-request-failed"))},Ha(`https://apis.google.com/js/api.js?onload=${xe}`).catch(Qe=>_(Qe))}ne()}}).catch(g=>{throw qa=null,g})}(w),qa}const _y=new bt(5e3,15e3),SE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wy(w){const g=w.config;ee(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?Bt(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},x=vy.get(w.config.apiHost);x&&(I.eid=x);const U=w._getFrameworks();return U.length&&(I.fw=U.join(",")),`${_}?${(0,$.xO)(I).slice(1)}`}function Sf(){return Sf=(0,d.Z)(function*(w){const g=yield _d(w),_=Fn().gapi;return ee(_,w,"internal-error"),g.open({where:document.body,url:wy(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SE,dontclear:!0},I=>new Promise(function(){var x=(0,d.Z)(function*(U,ne){yield I.restyle({setHideOnLeave:!1});const xe=Oe(w,"network-request-failed"),Qe=Fn().setTimeout(()=>{ne(xe)},_y.get());function ot(){Fn().clearTimeout(Qe),U(I)}I.ping(ot).then(ot,()=>{ne(xe)})});return function(U,ne){return x.apply(this,arguments)}}()))}),Sf.apply(this,arguments)}const Af={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hu{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ks(w,g,_,I,x,U){ee(w.config.authDomain,w,"auth-domain-config-required"),ee(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:k.SDK_VERSION,eventId:x};if(g instanceof Ts){g.setDefaultLanguage(w.languageCode),ne.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Qe,ot]of Object.entries(U||{}))ne[Qe]=ot}if(g instanceof Lo){const Qe=g.getScopes().filter(ot=>""!==ot);Qe.length>0&&(ne.scopes=Qe.join(","))}w.tenantId&&(ne.tid=w.tenantId);const xe=ne;for(const Qe of Object.keys(xe))void 0===xe[Qe]&&delete xe[Qe];return`${function Ed({config:w}){return w.emulator?Bt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(xe).slice(1)}`}const jg="webStorageSupport",Id=class AE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=La,this._completeRedirectFn=pt,this._overrideRedirectResult=na}_openPopup(g,_,I,x){var U=this;return(0,d.Z)(function*(){var ne;Ie(null===(ne=U.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const xe=ks(g,_,I,Le(),x);return function Ps(w,g,_,I=500,x=600){const U=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-I)/2,0).toString();let xe="";const Qe=Object.assign(Object.assign({},Af),{width:I.toString(),height:x.toString(),top:U,left:ne}),ot=(0,$.z$)().toLowerCase();_&&(xe=te(ot)?"_blank":_),F(ot)&&(g=g||"http://localhost",Qe.scrollbars="yes");const Ht=Object.entries(Qe).reduce((Pi,[Ys,oa])=>`${Pi}${Ys}=${oa},`,"");if(function Rn(w=(0,$.z$)()){var g;return zt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ot)&&"_self"!==xe)return function Vg(w,g){const _=document.createElement("a");_.href=w,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",xe),new Hu(null);const Nn=window.open(g||"",xe,Ht);ee(Nn,w,"popup-blocked");try{Nn.focus()}catch{}return new Hu(Nn)}(g,xe,zs())})()}_openRedirect(g,_,I,x){var U=this;return(0,d.Z)(function*(){return yield U._originValidation(g),function co(w){Fn().location.href=w}(ks(g,_,I,Le(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:U}=this.eventManagers[_];return x?Promise.resolve(x):(Ie(U,"If manager is not set, promise should be"),U)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const I=yield function Ug(w){return Sf.apply(this,arguments)}(g),x=new vn(g);return I.register("authEvent",U=>(ee(U?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=I,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(jg,{type:jg},x=>{var U;const ne=null===(U=x?.[0])||void 0===U?void 0:U[jg];void 0!==ne&&_(!!ne),Pe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Og(w){return nc.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return wr()||P()||zt()}};class Cd{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return ce("unexpected MultiFactorSessionType")}}}class rc extends Cd{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new rc(g)}_finalizeEnroll(g,_,I){return function ff(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(w,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Jo(w,g){return wt(w,"POST","/v2/accounts/mfaSignIn:finalize",Wt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bd=(()=>{class w{constructor(){}static assertion(_){return rc._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var vi="@firebase/auth";class Hg{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{g(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function wi(w){(0,k._registerComponent)(new ue.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:U,authDomain:ne}=I.options;return((xe,Qe)=>{ee(U&&!U.includes(":"),"invalid-api-key",{appName:xe.name}),ee(!ne?.includes(":"),"argument-error",{appName:xe.name});const ot={apiKey:U,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Po(w)},Ht=new Rl(xe,Qe,ot);return function oe(w,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(X);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,g?.popupRedirectResolver)}(Ht,_),Ht})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ue.wA("auth-internal",g=>{const _=Er(g.getProvider("auth").getImmediate());return new Hg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(vi,"0.21.4",function $g(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(vi,"0.21.4","esm2017")}("Browser")},2090:(ht,Se,V)=>{V.d(Se,{$s:()=>yt,BH:()=>Ae,DV:()=>hi,Dv:()=>qn,G6:()=>sn,GJ:()=>ji,L:()=>ge,LL:()=>cr,Pz:()=>Me,Sg:()=>$e,UG:()=>Ie,UI:()=>_n,US:()=>ue,Wj:()=>Ti,Wl:()=>ss,Yr:()=>_t,ZB:()=>J,ZR:()=>Xt,aH:()=>Oe,b$:()=>he,cI:()=>ei,dS:()=>Si,eu:()=>bt,g5:()=>k,gK:()=>vr,gQ:()=>ti,h$:()=>fe,hl:()=>mn,hu:()=>$,jU:()=>Q,lb:()=>Ot,m9:()=>Zn,ne:()=>xt,p$:()=>Z,pd:()=>zn,r3:()=>Gn,ru:()=>X,tV:()=>q,uI:()=>ce,ug:()=>jt,vZ:()=>yr,w1:()=>Le,w9:()=>Es,xO:()=>kr,xb:()=>Di,z$:()=>ee,zI:()=>Bt,zd:()=>nr});const $=function(W,z){if(!W)throw k(z)},k=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},se=function(W){const z=[];let O=0;for(let F=0;F<W.length;F++){let P=W.charCodeAt(F);P<128?z[O++]=P:P<2048?(z[O++]=P>>6|192,z[O++]=63&P|128):55296==(64512&P)&&F+1<W.length&&56320==(64512&W.charCodeAt(F+1))?(P=65536+((1023&P)<<10)+(1023&W.charCodeAt(++F)),z[O++]=P>>18|240,z[O++]=P>>12&63|128,z[O++]=P>>6&63|128,z[O++]=63&P|128):(z[O++]=P>>12|224,z[O++]=P>>6&63|128,z[O++]=63&P|128)}return z},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,z){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let P=0;P<W.length;P+=3){const te=W[P],Ee=P+1<W.length,Ye=Ee?W[P+1]:0,ze=P+2<W.length,Dt=ze?W[P+2]:0;let Rn=(15&Ye)<<2|Dt>>6,Tt=63&Dt;ze||(Tt=64,Ee||(Rn=64)),F.push(O[te>>2],O[(3&te)<<4|Ye>>4],O[Rn],O[Tt])}return F.join("")},encodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(W):this.encodeByteArray(se(W),z)},decodeString(W,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(W):function(W){const z=[];let O=0,F=0;for(;O<W.length;){const P=W[O++];if(P<128)z[F++]=String.fromCharCode(P);else if(P>191&&P<224){const te=W[O++];z[F++]=String.fromCharCode((31&P)<<6|63&te)}else if(P>239&&P<365){const ze=((7&P)<<18|(63&W[O++])<<12|(63&W[O++])<<6|63&W[O++])-65536;z[F++]=String.fromCharCode(55296+(ze>>10)),z[F++]=String.fromCharCode(56320+(1023&ze))}else{const te=W[O++],Ee=W[O++];z[F++]=String.fromCharCode((15&P)<<12|(63&te)<<6|63&Ee)}}return z.join("")}(this.decodeStringToByteArray(W,z))},decodeStringToByteArray(W,z){this.init_();const O=z?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let P=0;P<W.length;){const te=O[W.charAt(P++)],Ye=P<W.length?O[W.charAt(P)]:0;++P;const Dt=P<W.length?O[W.charAt(P)]:64;++P;const Nt=P<W.length?O[W.charAt(P)]:64;if(++P,null==te||null==Ye||null==Dt||null==Nt)throw new ye;F.push(te<<2|Ye>>4),64!==Dt&&(F.push(Ye<<4&240|Dt>>2),64!==Nt&&F.push(Dt<<6&192|Nt))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(W){const z=se(W);return ue.encodeByteArray(z,!0)},ge=function(W){return fe(W).replace(/\./g,"")},q=function(W){try{return ue.decodeString(W,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function Z(W){return J(void 0,W)}function J(W,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return z}for(const O in z)!z.hasOwnProperty(O)||!Be(O)||(W[O]=J(W[O],z[O]));return W}function Be(W){return"__proto__"!==W}const Te=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=W&&q(W[1]);return z&&JSON.parse(z)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},Oe=()=>{var W;return null===(W=Te())||void 0===W?void 0:W.config},Me=W=>{var z;return null===(z=Te())||void 0===z?void 0:z[`_${W}`]};class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,O)=>{this.resolve=z,this.reject=O})}wrapCallback(z){return(O,F)=>{O?this.reject(O):this.resolve(F),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(O):z(O,F))}}}function $e(W,z){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=z||"demo-project",P=W.iat||0,te=W.sub||W.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:P,exp:P+3600,auth_time:P,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},W);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ee)),""].join(".")}function ee(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ee())}function Ie(){var W;const z=null===(W=Te())||void 0===W?void 0:W.forceEnvironment;if("node"===z)return!0;if("browser"===z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Q(){return"object"==typeof self&&self.self===self}function X(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){const W=ee();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function _t(){return!1}function sn(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mn(){try{return"object"==typeof indexedDB}catch{return!1}}function bt(){return new Promise((W,z)=>{try{let O=!0;const F="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(F);P.onsuccess=()=>{P.result.close(),O||self.indexedDB.deleteDatabase(F),W(!0)},P.onupgradeneeded=()=>{O=!1},P.onerror=()=>{var te;z((null===(te=P.error)||void 0===te?void 0:te.message)||"")}}catch(O){z(O)}})}function Bt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Xt extends Error{constructor(z,O,F){super(O),this.code=z,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,Xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cr.prototype.create)}}class cr{constructor(z,O,F){this.service=z,this.serviceName=O,this.errors=F}create(z,...O){const F=O[0]||{},P=`${this.service}/${z}`,te=this.errors[z],Ee=te?function Wt(W,z){return W.replace(wt,(O,F)=>{const P=z[F];return null!=P?String(P):`<${F}?>`})}(te,F):"Error";return new Xt(P,`${this.serviceName}: ${Ee} (${P}).`,F)}}const wt=/\{\$([^}]+)}/g;function ei(W){return JSON.parse(W)}function ss(W){return JSON.stringify(W)}const $n=function(W){let z={},O={},F={},P="";try{const te=W.split(".");z=ei(q(te[0])||""),O=ei(q(te[1])||""),P=te[2],F=O.d||{},delete O.d}catch{}return{header:z,claims:O,data:F,signature:P}},Es=function(W){const O=$n(W).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},ji=function(W){const z=$n(W).claims;return"object"==typeof z&&!0===z.admin};function Gn(W,z){return Object.prototype.hasOwnProperty.call(W,z)}function hi(W,z){if(Object.prototype.hasOwnProperty.call(W,z))return W[z]}function Di(W){for(const z in W)if(Object.prototype.hasOwnProperty.call(W,z))return!1;return!0}function _n(W,z,O){const F={};for(const P in W)Object.prototype.hasOwnProperty.call(W,P)&&(F[P]=z.call(O,W[P],P,W));return F}function yr(W,z){if(W===z)return!0;const O=Object.keys(W),F=Object.keys(z);for(const P of O){if(!F.includes(P))return!1;const te=W[P],Ee=z[P];if(et(te)&&et(Ee)){if(!yr(te,Ee))return!1}else if(te!==Ee)return!1}for(const P of F)if(!O.includes(P))return!1;return!0}function et(W){return null!==W&&"object"==typeof W}function kr(W){const z=[];for(const[O,F]of Object.entries(W))Array.isArray(F)?F.forEach(P=>{z.push(encodeURIComponent(O)+"="+encodeURIComponent(P))}):z.push(encodeURIComponent(O)+"="+encodeURIComponent(F));return z.length?"&"+z.join("&"):""}function nr(W){const z={};return W.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[P,te]=F.split("=");z[decodeURIComponent(P)]=decodeURIComponent(te)}}),z}function zn(W){const z=W.indexOf("?");if(!z)return"";const O=W.indexOf("#",z);return W.substring(z,O>0?O:void 0)}class ti{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,O){O||(O=0);const F=this.W_;if("string"==typeof z)for(let Nt=0;Nt<16;Nt++)F[Nt]=z.charCodeAt(O)<<24|z.charCodeAt(O+1)<<16|z.charCodeAt(O+2)<<8|z.charCodeAt(O+3),O+=4;else for(let Nt=0;Nt<16;Nt++)F[Nt]=z[O]<<24|z[O+1]<<16|z[O+2]<<8|z[O+3],O+=4;for(let Nt=16;Nt<80;Nt++){const Rn=F[Nt-3]^F[Nt-8]^F[Nt-14]^F[Nt-16];F[Nt]=4294967295&(Rn<<1|Rn>>>31)}let Dt,zt,P=this.chain_[0],te=this.chain_[1],Ee=this.chain_[2],Ye=this.chain_[3],ze=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(Dt=Ye^te&(Ee^Ye),zt=1518500249):(Dt=te^Ee^Ye,zt=1859775393):Nt<60?(Dt=te&Ee|Ye&(te|Ee),zt=2400959708):(Dt=te^Ee^Ye,zt=3395469782);const Rn=(P<<5|P>>>27)+Dt+ze+zt+F[Nt]&4294967295;ze=Ye,Ye=Ee,Ee=4294967295&(te<<30|te>>>2),te=P,P=Rn}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+Ye&4294967295,this.chain_[4]=this.chain_[4]+ze&4294967295}update(z,O){if(null==z)return;void 0===O&&(O=z.length);const F=O-this.blockSize;let P=0;const te=this.buf_;let Ee=this.inbuf_;for(;P<O;){if(0===Ee)for(;P<=F;)this.compress_(z,P),P+=this.blockSize;if("string"==typeof z){for(;P<O;)if(te[Ee]=z.charCodeAt(P),++Ee,++P,Ee===this.blockSize){this.compress_(te),Ee=0;break}}else for(;P<O;)if(te[Ee]=z[P],++Ee,++P,Ee===this.blockSize){this.compress_(te),Ee=0;break}}this.inbuf_=Ee,this.total_+=O}digest(){const z=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&O,O/=256;this.compress_(this.buf_);let F=0;for(let P=0;P<5;P++)for(let te=24;te>=0;te-=8)z[F]=this.chain_[P]>>te&255,++F;return z}}function xt(W,z){const O=new ft(W,z);return O.subscribe.bind(O)}class ft{constructor(z,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{z(this)}).catch(F=>{this.error(F)})}next(z){this.forEachObserver(O=>{O.next(z)})}error(z){this.forEachObserver(O=>{O.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,O,F){let P;if(void 0===z&&void 0===O&&void 0===F)throw new Error("Missing Observer.");P=function En(W,z){if("object"!=typeof W||null===W)return!1;for(const O of z)if(O in W&&"function"==typeof W[O])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:O,complete:F},void 0===P.next&&(P.next=kn),void 0===P.error&&(P.error=kn),void 0===P.complete&&(P.complete=kn);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),te}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,z)}sendOne(z,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{O(this.observers[z])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const qn=function(W,z,O,F){let P;if(F<z?P="at least "+z:F>O&&(P=0===O?"none":"no more than "+O),P)throw new Error(W+" failed: Was called with "+F+(1===F?" argument.":" arguments.")+" Expects "+P+".")};function vr(W,z){return`${W} failed: ${z} argument `}function Ti(W,z,O,F){if((!F||O)&&"function"!=typeof O)throw new Error(vr(W,z)+"must be a valid function.")}function Ot(W,z,O,F){if((!F||O)&&("object"!=typeof O||null===O))throw new Error(vr(W,z)+"must be a valid context object.")}const Si=function(W){const z=[];let O=0;for(let F=0;F<W.length;F++){let P=W.charCodeAt(F);if(P>=55296&&P<=56319){const te=P-55296;F++,$(F<W.length,"Surrogate pair missing trail surrogate."),P=65536+(te<<10)+(W.charCodeAt(F)-56320)}P<128?z[O++]=P:P<2048?(z[O++]=P>>6|192,z[O++]=63&P|128):P<65536?(z[O++]=P>>12|224,z[O++]=P>>6&63|128,z[O++]=63&P|128):(z[O++]=P>>18|240,z[O++]=P>>12&63|128,z[O++]=P>>6&63|128,z[O++]=63&P|128)}return z},jt=function(W){let z=0;for(let O=0;O<W.length;O++){const F=W.charCodeAt(O);F<128?z++:F<2048?z+=2:F>=55296&&F<=56319?(z+=4,O++):z+=3}return z};function yt(W,z=1e3,O=2){const F=z*Math.pow(O,W),P=Math.round(.5*F*(Math.random()-.5)*2);return Math.min(144e5,F+P)}function Zn(W){return W&&W._delegate?W._delegate:W}},8126:(ht,Se,V)=>{var d=V(4650);let $=null;function k(){return $}class ae{}const ue=new d.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function fe(){return(0,d.LFG)(q)}()},providedIn:"platform"}),n})();const ge=new d.OlP("Location Initialized");let q=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function J(){return new q((0,d.LFG)(ue))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let rt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Te)},providedIn:"root"}),n})();const me=new d.OlP("appBaseHref");let Te=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Re(Ae(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function Me(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,Ae(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Be,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(d.LFG(rt))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Oe(){return new Pe((0,d.LFG)(rt))}()},providedIn:"root"}),n})();function Ae(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Decimal=0]="Decimal",ce[ce.Percent=1]="Percent",ce[ce.Currency=2]="Currency",ce[ce.Scientific=3]="Scientific",ce))(),oe=(()=>((oe=oe||{})[oe.Decimal=0]="Decimal",oe[oe.Group=1]="Group",oe[oe.List=2]="List",oe[oe.PercentSign=3]="PercentSign",oe[oe.PlusSign=4]="PlusSign",oe[oe.MinusSign=5]="MinusSign",oe[oe.Exponential=6]="Exponential",oe[oe.SuperscriptingExponent=7]="SuperscriptingExponent",oe[oe.PerMille=8]="PerMille",oe[oe.Infinity=9]="Infinity",oe[oe.NaN=10]="NaN",oe[oe.TimeSeparator=11]="TimeSeparator",oe[oe.CurrencyDecimal=12]="CurrencyDecimal",oe[oe.CurrencyGroup=13]="CurrencyGroup",oe))();function wt(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===oe.CurrencyDecimal)return t[d.wAp.NumberSymbols][oe.Decimal];if(e===oe.CurrencyGroup)return t[d.wAp.NumberSymbols][oe.Group]}return r}const Ye=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Oo(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Gr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class hr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new hr(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),In(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{In(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function In(n,e){n.context.$implicit=e.item}let zr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new qt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ba("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ba("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class qt{constructor(){this.$implicit=null,this.ngIf=null}}function ba(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Jh=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function ef(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Er(n,e,t){return function Po(n,e,t,r,i,a,l=!1){let f="",m=!1;if(isFinite(n)){let v=function Ml(n){let r,i,a,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],l=0;a<=f;a++,l++)r[l]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(v=function zc(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let C=e.minInt,S=e.minFrac,N=e.maxFrac;if(a){const dt=a.match(Ye);if(null===dt)throw new Error(`${a} is not a valid digit info`);const nt=dt[1],ut=dt[3],Mt=dt[5];null!=nt&&(C=Oo(nt)),null!=ut&&(S=Oo(ut)),null!=Mt?N=Oo(Mt):null!=ut&&S>N&&(N=S)}!function Eu(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let l=a+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=a+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(f>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,a);i++)r.push(0);let m=0!==a;const v=e+n.integerLen,C=r.reduceRight(function(S,N,B,G){return G[B]=(N+=S)<10?N:N-10,m&&(0===G[B]&&B>=v?G.pop():m=!1),N>=10?1:0},0);C&&(r.unshift(C),n.integerLen++)}(v,S,N);let B=v.digits,G=v.integerLen;const le=v.exponent;let _e=[];for(m=B.every(dt=>!dt);G<C;G++)B.unshift(0);for(;G<0;G++)B.unshift(0);G>0?_e=B.splice(G,B.length):(_e=B,B=[0]);const Ke=[];for(B.length>=e.lgSize&&Ke.unshift(B.splice(-e.lgSize,B.length).join(""));B.length>e.gSize;)Ke.unshift(B.splice(-e.gSize,B.length).join(""));B.length&&Ke.unshift(B.join("")),f=Ke.join(wt(t,r)),_e.length&&(f+=wt(t,i)+_e.join("")),le&&(f+=wt(t,oe.Exponential)+"+"+le)}else f=wt(t,oe.Infinity);return f=n<0&&!m?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function ko(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],m=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let C=0;C<m.length;C++){const S=m.charAt(C);"0"===S?t.minFrac=t.maxFrac=C+1:"#"===S?t.maxFrac=C+1:t.posSuf+=S}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,a){const C=i.length-t.posPre.length-t.posSuf.length,S=a.indexOf("#");t.negPre=a.substring(0,S).replace(/'/g,""),t.negSuf=a.slice(S+C).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ei(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,ce.Decimal),wt(e,oe.MinusSign)),e,oe.Group,oe.Decimal,t)}(function us(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw function rr(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Kc(n){return"server"===n}let Bo=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new xu((0,d.LFG)(ue),window)}),n})();class xu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function jo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=oo(this.window.history)||oo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Mu{}class Zo extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Rs extends Zo{static makeCurrent(){!function se(n){$||($=n)}(new Rs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function id(){return ls=ls||document.querySelector("base"),ls?ls.getAttribute("href"):null}();return null==t?null:function Ko(n){Fu=Fu||document.createElement("a"),Fu.setAttribute("href",n);const e=Fu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gr(document.cookie,e)}}let Fu,ls=null;const Fa=new d.OlP("TRANSITION_ID"),hy=[{provide:d.ip1,useFactory:function si(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Fa,ue,d.zs3],multi:!0}];let Ng=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ua=new d.OlP("EventManagerPlugins");let zs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ua),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class pf{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Fn=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),co=(()=>{class n extends Fn{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ho),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ho))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ho(n){k().remove(n)}const Va={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gi=/%COMP%/g;function cs(n,e){return e.flat(100).map(t=>t.replace(Gi,n))}function Qo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Lu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new qs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ws(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case d.ifc.ShadowDom:return new Xo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=cs(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zs),d.LFG(co),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class qs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Va[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(od(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(od(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Va[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Va[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Qo(r)):this.eventManager.addEventListener(e,t,Qo(r))}}function od(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ws extends qs{constructor(e,t,r,i){super(e),this.component=r;const a=cs(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function fo(n){return"_ngcontent-%COMP%".replace(Gi,n)}(i+"-"+r.id),this.hostAttr=function Yo(n){return"_nghost-%COMP%".replace(Gi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Xo extends qs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=cs(i.id,i.styles);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ql=(()=>{class n extends pf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ja=["alt","control","meta","shift"],ad={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Uu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ud=(()=>{class n extends pf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),ja.forEach(v=>{const C=r.indexOf(v);C>-1&&(r.splice(C,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=ad[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ja.forEach(l=>{l!==i&&(0,Uu[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Zs=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function qi(){Rs.makeCurrent()},multi:!0},{provide:ue,useFactory:function Zl(){return(0,d.RDi)(document),document},deps:[]}]),mf=new d.OlP(""),Kl=[{provide:d.rWj,useClass:class La{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],ea=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function ld(){return new d.qLn},deps:[]},{provide:Ua,useClass:ql,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:Ua,useClass:ud,multi:!0,deps:[ue]},{provide:Lu,useClass:Lu,deps:[zs,co,d.AFp]},{provide:d.FYo,useExisting:Lu},{provide:Fn,useExisting:co},{provide:co,useClass:co,deps:[ue]},{provide:zs,useClass:zs,deps:[Ua,d.R0b]},{provide:Mu,useClass:Ng,deps:[]},[]];let Pg=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Fa,useExisting:d.AFp},hy]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mf,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...ea,...Kl],imports:[xa,d.hGG]}),n})(),go=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $a(){return new go((0,d.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=V(8996),yn=V(9751);const{isArray:bf}=Array,{getPrototypeOf:md,prototype:ec,keys:Ns}=Object;function ju(n){if(1===n.length){const e=n[0];if(bf(e))return{args:e,keys:null};if(function mo(n){return n&&"object"==typeof n&&md(n)===ec}(e)){const t=Ns(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var na=V(8421),_o=V(7669),bn=V(5403),st=V(4004);const{isArray:tc}=Array;function D(n){return(0,st.U)(e=>function ra(n,e){return tc(e)?n(...e):n(e)}(n,e))}function T(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let H=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Y=(()=>{class n extends H{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const re=new d.OlP("NgValueAccessor"),pt={provide:re,useExisting:(0,d.Gpc)(()=>It),multi:!0},Lt=new d.OlP("CompositionEventMode");let It=(()=>{class n extends H{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lt(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Lt,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([pt]),d.qOj]}),n})();function vn(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ia(n){return null!=n&&"number"==typeof n.length}const gr=new d.OlP("NgValidators"),Mi=new d.OlP("NgAsyncValidators"),Ni=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sr{static min(e){return function sa(n){return e=>{if(vn(e.value)||vn(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Df(n){return e=>{if(vn(e.value)||vn(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Og(n){return vn(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function nc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function my(n){return vn(n.value)||Ni.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Tf(n){return e=>vn(e.value)||!ia(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Fg(n){return e=>ia(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Lg(n){if(!n)return qa;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(vn(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return wy(e)}static composeAsync(e){return Sf(e)}}function qa(n){return null}function _d(n){return null!=n}function _y(n){return(0,d.QGY)(n)?(0,ln.D)(n):n}function yy(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function yd(n,e){return e.map(t=>t(n))}function vy(n){return n.map(e=>function SE(n){return!n.validate}(e)?e:t=>e.validate(t))}function wy(n){if(!n)return null;const e=n.filter(_d);return 0==e.length?null:function(t){return yy(yd(t,e))}}function Ug(n){return null!=n?wy(vy(n)):null}function Sf(n){if(!n)return null;const e=n.filter(_d);return 0==e.length?null:function(t){return function R(...n){const e=(0,_o.jO)(n),{args:t,keys:r}=ju(n),i=new yn.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let C=0;C<l;C++){let S=!1;(0,na.Xf)(t[C]).subscribe((0,bn.x)(a,N=>{S||(S=!0,v--),f[C]=N},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?T(r,f):f),a.complete())}))}});return e?i.pipe(D(e)):i}(yd(t,e).map(_y)).pipe((0,st.U)(yy))}}function Af(n){return null!=n?Sf(vy(n)):null}function xf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vd(n){return n._rawValidators}function Rf(n){return n._rawAsyncValidators}function wd(n){return n?Array.isArray(n)?n:[n]:[]}function Hu(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ps(n,e){const t=wd(e);return wd(n).forEach(i=>{Hu(t,i)||t.push(i)}),t}function Vg(n,e){return wd(e).filter(t=>!Hu(n,t))}class Bg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ug(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Af(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class yi extends Bg{get formDirective(){return null}get path(){return null}}class ks extends Bg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ed{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Id=(()=>{class n extends Ed{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ks,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Cd=(()=>{class n extends Ed{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(yi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const ne="VALID",xe="INVALID",Qe="PENDING",ot="DISABLED";function Ht(n){return(oa(n)?n.validators:n)||null}function Pi(n,e){return(oa(e)?e.asyncValidators:n)||null}function oa(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function aa(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function Gu(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class zu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ne}get invalid(){return this.status===xe}get pending(){return this.status==Qe}get disabled(){return this.status===ot}get enabled(){return this.status!==ot}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ps(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ps(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Vg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Vg(e,this._rawAsyncValidators))}hasValidator(e){return Hu(this._rawValidators,e)}hasAsyncValidator(e){return Hu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qe,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ot,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ne,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ne||this.status===Qe)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ot:ne}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qe,this._hasOwnPendingAsyncValidator=!0;const t=_y(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ot:this.errors?xe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qe)?Qe:this._anyControlsHaveStatus(xe)?xe:ne}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oa(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Nn(n){return Array.isArray(n)?Ug(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ys(n){return Array.isArray(n)?Af(n):n||null}(this._rawAsyncValidators)}}class qu extends zu{constructor(e,t,r){super(Ht(t),Pi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Gu(this,0,e),Object.keys(e).forEach(r=>{aa(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Mf extends qu{}const Wa=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Sd}),Sd="always";function Zu(n,e,t=Sd){by(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function ME(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ku(n,e)})}(n,e),function PE(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function NE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ku(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Cy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ad(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),qg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Nf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function by(n,e){const t=vd(n);null!==e.validator?n.setValidators(xf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Rf(n);null!==e.asyncValidator?n.setAsyncValidators(xf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Nf(e._rawValidators,i),Nf(e._rawAsyncValidators,i)}function qg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=vd(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Rf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Nf(e._rawValidators,r),Nf(e._rawAsyncValidators,r),t}function Ku(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Rd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function kE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Md=class extends zu{constructor(e=null,t,r){super(Ht(t),Pi(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oa(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=kE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){kE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let kf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ny=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const ky=new d.OlP("NgModelWithFormControlWarning"),NT={provide:yi,useExisting:(0,d.Gpc)(()=>Qs)};let Qs=(()=>{class n extends yi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zu(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ad(t.control||null,t,!1),function Kg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Ay(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ad(r||null,t),(n=>n instanceof Md)(i)&&(Zu(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Dy(n,e){by(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ET(n,e){return qg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){by(this.form,this),this._oldForm&&qg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gr,10),d.Y36(Mi,10),d.Y36(Wa,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([NT]),d.qOj,d.TTD]}),n})();const YN={provide:ks,useExisting:(0,d.Gpc)(()=>Fy)};let Fy=(()=>{class n extends ks{set isDisabled(t){}constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function xd(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===It?t=a:function Sy(n){return Object.getPrototypeOf(n.constructor)===Y}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function Zg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Wu(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(yi,13),d.Y36(gr,10),d.Y36(Mi,10),d.Y36(re,10),d.Y36(ky,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([YN]),d.qOj,d.TTD]}),n})(),eI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ny]}),n})();class tI extends zu{constructor(e,t,r){super(Ht(t),Pi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Gu(this,0,e),e.forEach((r,i)=>{aa(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function $y(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let $T=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return $y(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new qu(i,a)}record(t,r=null){const i=this._reduceControls(t);return new Mf(i,r)}control(t,r,i){let a={};return this.useNonNullable?($y(r)?a=r:(a.validators=r,a.asyncValidators=i),new Md(t,{...a,nonNullable:!0})):new Md(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new tI(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Md||t instanceof zu?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wa,useValue:t.callSetDisabledState??Sd}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[eI]}),n})(),iI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ky,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Wa,useValue:t.callSetDisabledState??Sd}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[eI]}),n})();function gt(...n){const e=(0,_o.yG)(n);return(0,ln.D)(n,e)}var Zi=V(5577),Gy=V(576);function Za(n,e){return(0,Gy.m)(e)?(0,Zi.z)(n,e,1):(0,Zi.z)(n,1)}var Kr=V(4482);function ds(n,e){return(0,Kr.e)((t,r)=>{let i=0;t.subscribe((0,bn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}class zy{}class Lf{}class Ka{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ka?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ka;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ka?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class oI{encodeKey(e){return tm(e)}encodeValue(e){return tm(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const oc=/%(\d[a-f0-9])/gi,GT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tm(n){return encodeURIComponent(n).replace(oc,(e,t)=>GT[t]??e)}function ac(n){return`${n}`}class Yu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new oI,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function aI(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(f),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ac):[ac(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Yu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ac(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ac(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class nm{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function qy(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function rm(n){return typeof Blob<"u"&&n instanceof Blob}function lI(n){return typeof FormData<"u"&&n instanceof FormData}class Pd{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uc(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Ka),this.context||(this.context=new nm),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new Yu,this.urlWithParams=t}serializeBody(){return null===this.body?null:qy(this.body)||rm(this.body)||lI(this.body)||function zT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lI(this.body)?null:rm(this.body)?this.body.type||null:qy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,N)=>S.set(N,e.setHeaders[N]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,N)=>S.set(N,e.setParams[N]),v)),new Pd(t,r,a,{params:v,headers:m,context:C,reportProgress:f,responseType:i,withCredentials:l})}}var Un=(()=>((Un=Un||{})[Un.Sent=0]="Sent",Un[Un.UploadProgress=1]="UploadProgress",Un[Un.ResponseHeader=2]="ResponseHeader",Un[Un.DownloadProgress=3]="DownloadProgress",Un[Un.Response=4]="Response",Un[Un.User=5]="User",Un))();class Wy{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ka,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Zy extends Wy{constructor(e={}){super(e),this.type=Un.ResponseHeader}clone(e={}){return new Zy({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class im extends Wy{constructor(e={}){super(e),this.type=Un.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new im({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sm extends Wy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ky(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Yy=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Pd)a=t;else{let m,v;m=i.headers instanceof Ka?i.headers:new Ka(i.headers),i.params&&(v=i.params instanceof Yu?i.params:new Yu({fromObject:i.params})),a=new Pd(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=gt(a).pipe(Za(m=>this.handler.handle(m)));if(t instanceof Pd||"events"===i.observe)return l;const f=l.pipe(ds(m=>m instanceof im));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,st.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,st.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,st.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,st.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Yu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ky(i,r))}post(t,r,i={}){return this.request("POST",t,Ky(i,r))}put(t,r,i={}){return this.request("PUT",t,Ky(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function cI(n,e){return e(n)}function dI(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const hI=new d.OlP("HTTP_INTERCEPTORS"),Ya=new d.OlP("HTTP_INTERCEPTOR_FNS");function qT(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(hI,{optional:!0})??[]).reduceRight(dI,cI)),n(e,t))}let lc=(()=>{class n extends zy{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Ya)));this.chain=r.reduceRight((i,a)=>function tP(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(i,a,this.injector),cI)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lf),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Xy=/^\)\]\}',?\n/;let gI=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((B,G)=>i.setRequestHeader(B,G.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&i.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();i.responseType="json"!==B?B:"text"}const a=t.serializeBody();let l=null;const f=()=>{if(null!==l)return l;const B=i.statusText||"OK",G=new Ka(i.getAllResponseHeaders()),le=function Uf(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Zy({headers:G,status:i.status,statusText:B,url:le}),l},m=()=>{let{headers:B,status:G,statusText:le,url:_e}=f(),Ke=null;204!==G&&(Ke=typeof i.response>"u"?i.responseText:i.response),0===G&&(G=Ke?200:0);let dt=G>=200&&G<300;if("json"===t.responseType&&"string"==typeof Ke){const nt=Ke;Ke=Ke.replace(Xy,"");try{Ke=""!==Ke?JSON.parse(Ke):null}catch(ut){Ke=nt,dt&&(dt=!1,Ke={error:ut,text:Ke})}}dt?(r.next(new im({body:Ke,headers:B,status:G,statusText:le,url:_e||void 0})),r.complete()):r.error(new sm({error:Ke,headers:B,status:G,statusText:le,url:_e||void 0}))},v=B=>{const{url:G}=f(),le=new sm({error:B,status:i.status||0,statusText:i.statusText||"Unknown Error",url:G||void 0});r.error(le)};let C=!1;const S=B=>{C||(r.next(f()),C=!0);let G={type:Un.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),"text"===t.responseType&&i.responseText&&(G.partialText=i.responseText),r.next(G)},N=B=>{let G={type:Un.UploadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),r.next(G)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:Un.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Jy=new d.OlP("XSRF_ENABLED"),mI="XSRF-TOKEN",_I=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>mI}),yI="X-XSRF-TOKEN",vI=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>yI});class wI{}let kd=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(d.Lbi),d.LFG(_I))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Qa(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(Jy)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(wI).getToken(),i=(0,d.f3M)(vI);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ar=(()=>((Ar=Ar||{})[Ar.Interceptors=0]="Interceptors",Ar[Ar.LegacyInterceptors=1]="LegacyInterceptors",Ar[Ar.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ar[Ar.NoXsrfProtection=3]="NoXsrfProtection",Ar[Ar.JsonpSupport=4]="JsonpSupport",Ar[Ar.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ar))();function Vf(n,e){return{\u0275kind:n,\u0275providers:e}}function uP(...n){const e=[Yy,gI,lc,{provide:zy,useExisting:lc},{provide:Lf,useExisting:gI},{provide:Ya,useValue:Qa,multi:!0},{provide:Jy,useValue:!0},{provide:wI,useClass:kd}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const KT=new d.OlP("LEGACY_INTERCEPTOR_FN");function II({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:_I,useValue:n}),void 0!==e&&t.push({provide:vI,useValue:e}),Vf(Ar.CustomXsrfConfiguration,t)}let yo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uP(Vf(Ar.LegacyInterceptors,[{provide:KT,useFactory:qT},{provide:Ya,useExisting:KT,multi:!0}]),II({cookieName:mI,headerName:yI}))]}),n})();function XT(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.previous())})("click",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.previous())}),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.previousLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function JT(n,e){if(1&n&&(d.TgZ(0,"span",14),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()),2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.previousLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function eS(n,e){if(1&n&&(d.TgZ(0,"li",9),d.YNc(1,XT,4,2,"a",10),d.YNc(2,JT,4,2,"span",11),d.qZA()),2&n){d.oxw(2);const t=d.MAs(1);d.ekj("disabled",t.isFirstPage()),d.xp6(1),d.Q6J("ngIf",1<t.getCurrent()),d.xp6(1),d.Q6J("ngIf",t.isFirstPage())}}function tS(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t);const i=d.oxw().$implicit;d.oxw(2);const a=d.MAs(1);return d.KtG(a.setCurrent(i.value))})("click",function(){d.CHM(t);const i=d.oxw().$implicit;d.oxw(2);const a=d.MAs(1);return d.KtG(a.setCurrent(i.value))}),d.TgZ(1,"span",13),d._uU(2),d.qZA(),d.TgZ(3,"span"),d._uU(4),d.ALo(5,"number"),d.qZA()()}if(2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(2),d.hij("",r.screenReaderPageLabel," "),d.xp6(2),d.Oqu("..."===t.label?t.label:d.xi3(5,2,t.label,""))}}function CI(n,e){if(1&n&&(d.ynx(0),d.TgZ(1,"span",16)(2,"span",13),d._uU(3),d.qZA(),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"number"),d.qZA()(),d.BQk()),2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(3),d.hij("",r.screenReaderCurrentLabel," "),d.xp6(2),d.Oqu("..."===t.label?t.label:d.xi3(6,2,t.label,""))}}function nS(n,e){if(1&n&&(d.TgZ(0,"li"),d.YNc(1,tS,6,5,"a",10),d.YNc(2,CI,7,5,"ng-container",15),d.qZA()),2&n){const t=e.$implicit;d.oxw(2);const r=d.MAs(1);d.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),d.xp6(1),d.Q6J("ngIf",r.getCurrent()!==t.value),d.xp6(1),d.Q6J("ngIf",r.getCurrent()===t.value)}}function rS(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.next())})("click",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.next())}),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.nextLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function iS(n,e){if(1&n&&(d.TgZ(0,"span",14),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()),2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.nextLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function $t(n,e){if(1&n&&(d.TgZ(0,"li",17),d.YNc(1,rS,4,2,"a",10),d.YNc(2,iS,4,2,"span",11),d.qZA()),2&n){d.oxw(2);const t=d.MAs(1);d.ekj("disabled",t.isLastPage()),d.xp6(1),d.Q6J("ngIf",!t.isLastPage()),d.xp6(1),d.Q6J("ngIf",t.isLastPage())}}function bI(n,e){if(1&n&&(d.TgZ(0,"ul",4),d.YNc(1,eS,3,4,"li",5),d.TgZ(2,"li",6),d._uU(3),d.qZA(),d.YNc(4,nS,3,6,"li",7),d.YNc(5,$t,3,4,"li",8),d.qZA()),2&n){const t=d.oxw(),r=d.MAs(1);d.ekj("responsive",t.responsive),d.xp6(1),d.Q6J("ngIf",t.directionLinks),d.xp6(2),d.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),d.xp6(1),d.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),d.xp6(1),d.Q6J("ngIf",t.directionLinks)}}class um{constructor(){this.change=new d.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const DI=Number.MAX_SAFE_INTEGER;let sS=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let S=r.id||this.service.defaultId();return this.state[S]?this.state[S].slice:t}let f,m,i=r.totalItems&&r.totalItems!==t.length,a=this.createInstance(t,r),l=a.id,v=a.itemsPerPage,C=this.service.register(a);if(!i&&t instanceof Array){if(v=+v||DI,f=(a.currentPage-1)*v,m=f+v,this.stateIsIdentical(l,t,f,m))return this.state[l].slice;{let N=t.slice(f,m);return this.saveState(l,t,N,f,m),this.service.change.emit(l),N}}return C&&this.service.change.emit(l),this.saveState(l,t,t,f,m),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(a=>!(a in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,a,l){this.state[t]={collection:r,size:r.length,slice:i,start:a,end:l}}stateIsIdentical(t,r,i,a){let l=this.state[t];return!(!l||l.size!==r.length||l.start!==i||l.end!==a)&&l.slice.every((m,v)=>m===r[i+v])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(um,16))},n.\u0275pipe=d.Yjl({name:"paginate",type:n,pure:!1}),n})(),aS=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new d.vpe,this.pageBoundsCorrection=new d.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,a){a=+a;let l=[];const f=Math.max(Math.ceil(i/r),1),m=Math.ceil(a/2),v=t<=m,C=f-m<t,S=!v&&!C;let N=a<f,B=1;for(;B<=f&&B<=a;){let G,le=this.calculatePageNumber(B,t,a,f);G=N&&(2===B&&(S||C)||B===a-1&&(S||v))?"...":le,l.push({label:G,value:le}),B++}return l}calculatePageNumber(t,r,i,a){let l=Math.ceil(i/2);return t===i?a:1===t?t:i<a?a-l<r?a-i+t:l<r?r-l+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(um),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[d.TTD]}),n})();function lm(n){return!!n&&"false"!==n}let uS=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new d.vpe,this.pageBoundsCorrection=new d.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=lm(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=lm(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=lm(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(d.TgZ(0,"pagination-template",0,1),d.NdJ("pageChange",function(a){return r.pageChange.emit(a)})("pageBoundsCorrection",function(a){return r.pageBoundsCorrection.emit(a)}),d.TgZ(2,"nav",2),d.YNc(3,bI,6,8,"ul",3),d.qZA()()),2&t){const i=d.MAs(1);d.Q6J("id",r.id)("maxSize",r.maxSize),d.xp6(2),d.uIk("aria-label",r.screenReaderPaginationLabel),d.xp6(1),d.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[aS,zr,pi,Jh],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),lS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[um],imports:[[xa]]}),n})();var ui=V(2011),Xa=V(7579),cm=V(6451),la=V(5363);function xr(n,e){return(0,Kr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,bn.x)(r,m=>{i?.unsubscribe();let v=0;const C=a++;(0,na.Xf)(n(m,C)).subscribe(i=(0,bn.x)(r,S=>r.next(e?e(m,S,C,v++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}var ev=V(6063);class tv extends Xa.x{constructor(e=1/0,t=1/0,r=ev.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var TI=V(3099);function cS(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,TI.B)({connector:()=>new tv(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const nv=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qu=V(515);function Od(n){return n<=0?()=>Qu.E:(0,Kr.e)((e,t)=>{let r=0;e.subscribe((0,bn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rv(n){return(0,Kr.e)((e,t)=>{let r=!1;e.subscribe((0,bn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function SI(n=Fd){return(0,Kr.e)((e,t)=>{let r=!1;e.subscribe((0,bn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Fd(){return new nv}var Ld=V(4671);function ca(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ds((i,a)=>n(i,a,r)):Ld.y,Od(1),t?rv(e):SI(()=>new nv))}function Bf(n,e){return(0,Gy.m)(e)?xr(()=>n,e):xr(()=>n)}var iv=V(9468),fn=V(2122);V(259);var ve=V(5861),Ki=V(9681),hs=V(4859),L=V(2090),Os=V(1877);const cc=new Map,fm={activated:!1,tokenObservers:[]},pm={initialized:!1,enabled:!1};function li(n){return cc.get(n)||Object.assign({},fm)}function Ud(){return pm}class _S{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function kI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yi=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fs(n){if(!li(n).activated)throw Yi.create("use-before-activation",{appName:n.name})}function FI(n,e){return $f.apply(this,arguments)}function $f(){return($f=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(S){throw Yi.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Yi.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(S){throw Yi.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+v,issuedAtTimeMillis:C}})).apply(this,arguments)}function vS(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Gf="firebase-app-check-store";let Vd=null;function BI(){return Vd||(Vd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Yi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Gf,{keyPath:"compositeKey"})}}catch(t){e(Yi.create("storage-open",{originalErrorMessage:t?.message}))}}),Vd)}function zf(){return(zf=(0,ve.Z)(function*(n,e){const r=(yield BI()).transaction(Gf,"readwrite"),a=r.objectStore(Gf).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(Yi.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const qf=new Os.Yd("@firebase/app-check");function Wf(n,e){return(0,L.hl)()?function IS(n,e){return function vo(n,e){return zf.apply(this,arguments)}(function lv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Zf(){return Ud().enabled}function ym(){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,ve.Z)(function*(){const n=Ud();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hv={error:"UNKNOWN_ERROR"};function wP(n){return L.US.encodeString(JSON.stringify(n),!1)}function Kf(n){return vm.apply(this,arguments)}function vm(){return(vm=(0,ve.Z)(function*(n,e=!1){const t=n.app;fs(t);const r=li(t);let a,i=r.token;if(i&&!eu(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(eu(m)?i=m:yield Wf(t,void 0))}if(!e&&i&&eu(i))return{token:i.token};let f,l=!1;if(Zf()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FI(vS(t,yield ym()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Wf(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield li(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?qf.warn(m.message):qf.error(m),a=m}return i?a?f=eu(i)?{token:i.token,internalError:a}:jd(a):(f={token:i.token},r.token=i,yield Wf(t,i)):f=jd(a),l&&Yf(t,f),f})).apply(this,arguments)}function Em(n,e){const t=li(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Im(n){const{app:e}=n,t=li(e);let r=t.tokenRefresher;r||(r=function Ja(n){const{app:e}=n;return new _S((0,ve.Z)(function*(){let r;if(r=li(e).token?yield Kf(n,!0):yield Kf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=li(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yf(n,e){const t=li(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function eu(n){return n.expireTimeMillis-Date.now()>0}function jd(n){return{token:wP(hv),error:n}}class SS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=li(this.app);for(const t of e)Em(this.app,t.next);return Promise.resolve()}}const QI="app-check-internal";!function DP(){(0,Ki._registerComponent)(new hs.wA("app-check",n=>function HI(n,e){return new SS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QI).initialize()})),(0,Ki._registerComponent)(new hs.wA(QI,n=>function $I(n){return{getToken:e=>Kf(n,e),addTokenListener:e=>function wm(n,e,t,r){const{app:i}=n,a=li(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&eu(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Im(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Im(n))}(n,"INTERNAL",e),removeTokenListener:e=>Em(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ki.registerVersion)("@firebase/app-check","0.6.4")}();class wo{constructor(){return(0,fn.vb)("app-check")}}typeof window<"u"&&window;var tu=V(9260);const Xu=new d.OlP("angularfire2.auth.use-emulator"),Ju=new d.OlP("angularfire2.auth.settings"),el=new d.OlP("angularfire2.auth.tenant-id"),tl=new d.OlP("angularfire2.auth.langugage-code"),nl=new d.OlP("angularfire2.auth.use-device-language"),Sm=new d.OlP("angularfire.auth.persistence"),Am=(n,e,t,r,i,a,l,f)=>(0,ui.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,C]of Object.entries(l))m.settings[v]=C;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let zd=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,S,N,B){const G=new Xa.x,le=gt(void 0).pipe((0,la.Q)(l.outsideAngular),xr(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,st.U)(()=>(0,ui.on)(t,a,r)),(0,st.U)(_e=>Am(_e,a,f,v,C,S,m,N)),cS({bufferSize:1,refCount:!1}));if(Kc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{le.pipe(ca()).subscribe();const Ke=le.pipe(xr(ut=>ut.getRedirectResult().then(Mt=>Mt,()=>null)),fn.iC,cS({bufferSize:1,refCount:!1})),dt=le.pipe(xr(ut=>new yn.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>ut.onAuthStateChanged(Vt=>Mt.next(Vt),Vt=>Mt.error(Vt),()=>Mt.complete()))})))),nt=le.pipe(xr(ut=>new yn.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>ut.onIdTokenChanged(Vt=>Mt.next(Vt),Vt=>Mt.error(Vt),()=>Mt.complete()))}))));this.authState=Ke.pipe(Bf(dt),(0,iv.R)(l.outsideAngular),(0,la.Q)(l.insideAngular)),this.user=Ke.pipe(Bf(nt),(0,iv.R)(l.outsideAngular),(0,la.Q)(l.insideAngular)),this.idToken=this.user.pipe(xr(ut=>ut?(0,ln.D)(ut.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(xr(ut=>ut?(0,ln.D)(ut.getIdTokenResult()):gt(null))),this.credential=(0,cm.T)(Ke,G,this.authState.pipe(ds(ut=>!ut))).pipe((0,st.U)(ut=>ut?.user?ut:null),(0,iv.R)(l.outsideAngular),(0,la.Q)(l.insideAngular))}return(0,ui.pX)(this,le,a,{spy:{apply:(_e,Ke,dt)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&dt.then(nt=>G.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(fn.HU),d.LFG(Xu,8),d.LFG(Ju,8),d.LFG(el,8),d.LFG(tl,8),d.LFG(nl,8),d.LFG(Sm,8),d.LFG(wo,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eC=(()=>{class n{constructor(){tu.Z.registerVersion("angularfire",fn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zd]}),n})();var xm=V(4986),qd=V(8189);function Rm(...n){return function tC(){return(0,qd.J)(1)}()((0,ln.D)(n,(0,_o.yG)(n)))}function ep(...n){const e=(0,_o.yG)(n);return(0,Kr.e)((t,r)=>{(e?Rm(n,t,e):Rm(n,t)).subscribe(r)})}function _v(){return(0,Kr.e)((n,e)=>{let t,r=!1;n.subscribe((0,bn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function US(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,bn.x)(l,C=>{const S=v++;m=f?n(m,C,S):(f=!0,C),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function rl(n,e){return(0,Kr.e)(US(n,e,arguments.length>=2,!0))}function nC(n,e=Ld.y){return n=n??rC,(0,Kr.e)((t,r)=>{let i,a=!0;t.subscribe((0,bn.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function rC(n,e){return n===e}V(9568);var ct,tp=V(3942),VS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xs={},np=np||{},Ut=VS||self;function hc(){}function fc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rp="closure_uid_"+(1e9*Math.random()>>>0),oC=0;function aC(n,e,t){return n.call.apply(n.bind,arguments)}function yv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ei(n,e,t){return(Ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aC:yv).apply(null,arguments)}function Mm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function nu(){this.s=this.s,this.o=this.o}nu.prototype.s=!1,nu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function sC(n){Object.prototype.hasOwnProperty.call(n,rp)&&n[rp]||(n[rp]=++oC)}(this)},nu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function wv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function lC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(fc(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ki(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ki.prototype.h=function(){this.defaultPrevented=!0};var Ev=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",hc,e),Ut.removeEventListener("test",hc,e)}catch{}return n}();function Zd(n){return/^[\s\xa0]*$/.test(n)}var Iv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Nm(n,e){return n<e?-1:n>e?1:0}function ip(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Io(n){return-1!=ip().indexOf(n)}function Pm(n){return Pm[" "](n),n}Pm[" "]=hc;var fa,n,dC=Io("Opera"),pc=Io("Trident")||Io("MSIE"),sp=Io("Edge"),ha=sp||pc,hC=Io("Gecko")&&!(-1!=ip().toLowerCase().indexOf("webkit")&&!Io("Edge"))&&!(Io("Trident")||Io("MSIE"))&&!Io("Edge"),BS=-1!=ip().toLowerCase().indexOf("webkit")&&!Io("Edge");function km(){var n=Ut.document;return n?n.documentMode:void 0}e:{var op="",Cv=(n=ip(),hC?/rv:([^\);]+)(\)|;)/.exec(n):sp?/Edge\/([\d\.]+)/.exec(n):pc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):BS?/WebKit\/(\S+)/.exec(n):dC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Cv&&(op=Cv?Cv[1]:""),pc){var ap=km();if(null!=ap&&ap>parseFloat(op)){fa=String(ap);break e}}fa=op}var SP={};var pC=Ut.document&&pc&&(km()||parseInt(fa,10))||void 0;function up(n,e){if(ki.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hC){e:{try{Pm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yr[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&up.X.h.call(this)}}ci(up,ki);var Yr={2:"touch",3:"pen",4:"mouse"};up.prototype.h=function(){up.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Kd="closure_listenable_"+(1e6*Math.random()|0),jS=0;function HS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++jS,this.ba=this.ea=!1}function lp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Dv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Tv(n){const e={};for(const t in n)e[t]=n[t];return e}const Sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gc(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Sv.length;a++)t=Sv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Om(n){this.src=n,this.g={},this.h=0}function Av(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=vv(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(lp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Om.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Fm(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new HS(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var xv="closure_lm_"+(1e6*Math.random()|0),Lm={};function $S(n,e,t,r,i){if(r&&r.once)return Co(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)$S(n,e[a],t,r,i);return null}return t=Vm(t),n&&n[Kd]?n.N(e,t,Wd(r)?!!r.capture:!!r,i):Rv(n,e,t,!1,r,i)}function Rv(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Wd(i)?!!i.capture:!!i,f=Fs(n);if(f||(n[xv]=f=new Om(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function Mv(){const e=Do;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ev||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bo(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Co(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Co(n,e[a],t,r,i);return null}return t=Vm(t),n&&n[Kd]?n.O(e,t,Wd(r)?!!r.capture:!!r,i):Rv(n,e,t,!0,r,i)}function gC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)gC(n,e[a],t,r,i);else r=Wd(r)?!!r.capture:!!r,t=Vm(t),n&&n[Kd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fm(a=n.g[e],t,r,i))&&(lp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Fs(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fm(e,t,r,i)),(t=-1<n?e[n]:null)&&Nv(t))}function Nv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Kd])Av(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bo(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fs(e))?(Av(t,n),0==t.h&&(t.src=null,e[xv]=null)):lp(n)}}}function bo(n){return n in Lm?Lm[n]:Lm[n]="on"+n}function Do(n,e){if(n.ba)n=!0;else{e=new up(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Nv(n),n=t.call(r,e)}return n}function Fs(n){return(n=n[xv])instanceof Om?n:null}var Um="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vm(n){return"function"==typeof n?n:(n[Um]||(n[Um]=function(e){return n.handleEvent(e)}),n[Um])}function di(){nu.call(this),this.i=new Om(this),this.P=this,this.I=null}function Ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ki(e,n);else if(e instanceof ki)e.target=e.target||n;else{var i=e;gc(e=new ki(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Bm(l,r,!0,e)&&i}if(i=Bm(l=e.g=n,r,!0,e)&&i,i=Bm(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Bm(l=e.g=t[a],r,!1,e)&&i}function Bm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,m=l.ha||l.src;l.ea&&Av(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ci(di,nu),di.prototype[Kd]=!0,di.prototype.removeEventListener=function(n,e,t,r){gC(this,n,e,t,r)},di.prototype.M=function(){if(di.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)lp(t[r]);delete n.g[e],n.h--}}this.I=null},di.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Pv=Ut.JSON.stringify;function kv(){var n=Lv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jm,mC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _C,n=>n.reset());class _C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function GS(n){Ut.setTimeout(()=>{throw n},0)}function Ov(n,e){jm||function Hm(){var n=Ut.Promise.resolve(void 0);jm=function(){n.then(yC)}}(),Fv||(jm(),Fv=!0),Lv.add(n,e)}var Fv=!1,Lv=new class cp{constructor(){this.h=this.g=null}add(e,t){const r=mC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yC(){for(var n;n=kv();){try{n.h.call(n.g)}catch(t){GS(t)}var e=mC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fv=!1}function Yd(n,e){di.call(this),this.h=n||1,this.g=e||Ut,this.j=Ei(this.lb,this),this.l=Date.now()}function Qd(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function dp(n,e,t){if("function"==typeof n)t&&(n=Ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Uv(n){n.g=dp(()=>{n.g=null,n.i&&(n.i=!1,Uv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(Yd,di),(ct=Yd.prototype).ca=!1,ct.R=null,ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ii(this,"tick"),this.ca&&(Qd(this),this.start()))}},ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Yd.X.M.call(this),Qd(this),delete this.g};class vC extends nu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uv(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xd(n){nu.call(this),this.h=n,this.g={}}ci(Xd,nu);var Vv=[];function Bv(n,e,t,r){Array.isArray(t)||(t&&(Vv[0]=t.toString()),t=Vv);for(var i=0;i<t.length;i++){var a=$S(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function jv(n){Dv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Nv(e)},n),n.g={}}function hp(){this.g=!0}function Jd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ZS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Pv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Xd.prototype.M=function(){Xd.X.M.call(this),jv(this)},Xd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hp.prototype.Aa=function(){this.g=!1},hp.prototype.info=function(){};var mc={},wC=null;function $m(){return wC=wC||new di}function EC(n){ki.call(this,mc.Pa,n)}function fp(n){const e=$m();Ii(e,new EC(e))}function IC(n,e){ki.call(this,mc.STAT_EVENT,n),this.stat=e}function Xi(n){const e=$m();Ii(e,new IC(e,n))}function CC(n,e){ki.call(this,mc.Qa,n),this.size=e}function pp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}mc.Pa="serverreachability",ci(EC,ki),mc.STAT_EVENT="statevent",ci(IC,ki),mc.Qa="timingevent",ci(CC,ki);var Gm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},bC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hv(){}function $v(){}Hv.prototype.h=null;var Wm,eh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zm(){ki.call(this,"d")}function qm(){ki.call(this,"c")}function gp(){}function th(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Xd(this),this.O=TC,this.T=new Yd(n=ha?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Gv}function Gv(){this.i=null,this.g="",this.h=!1}ci(zm,ki),ci(qm,ki),ci(gp,Hv),gp.prototype.g=function(){return new XMLHttpRequest},gp.prototype.i=function(){return{}},Wm=new gp;var TC=45e3,Zm={},mp={};function ru(n,e,t){n.K=1,n.v=Km(Js(e)),n.s=t,n.P=!0,SC(n,null)}function SC(n,e){n.F=Date.now(),yc(n),n.A=Js(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Zv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Gv,n.g=KC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new vC(Ei(n.La,n,n.g),n.N)),Bv(n.S,n.g,"readystatechange",n.ib),e=n.H?Tv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),fp(),function zS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var C=v[0];v=v[1];var S=C.split("_");l=2<=S.length&&"type"==S[1]?l+(C+"=")+v+"&":l+(C+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function AC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function _c(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=xP(n,t),i==mp){4==e&&(n.o=4,Xi(14),r=!1),Jd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Zm){n.o=4,Xi(15),Jd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jd(n.j,n.m,i,null),Ct(n,i)}AC(n)&&i!=mp&&i!=Zm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Tp(e),e.K=!0,Xi(11))):(Jd(n.j,n.m,t,"[Invalid Chunked Response]"),rh(n),nh(n))}function xP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?mp:(t=Number(e.substring(t,r)),isNaN(t)?Zm:(r+=1)+t>e.length?mp:(e=e.substr(r,t),n.C=r+t,e))}function yc(n){n.V=Date.now()+n.O,KS(n,n.O)}function KS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=pp(Ei(n.gb,n),e)}function _p(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function nh(n){0==n.l.G||n.I||zC(n.l,n)}function rh(n){_p(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Qd(n.T),jv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ct(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Kv(t.h,n)))if(!n.J&&Kv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Sp(t),Dp(t)}o0(t),Xi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=pp(Ei(t.cb,t),6e3));if(1>=kC(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ec(t,11)}else if((n.J||t.g==n)&&Sp(t),!Zd(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const C=v[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.J=r=1.5*N,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ym(a,a.h),a.h=null))}if(r.D){const le=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.za=le,Bn(r.F,r.D,le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=ZC(r,r.H?r.ka:null,r.V),l.J){Yv(r.h,l);var f=l,m=r.J;m&&f.setTimeout(m),f.B&&(_p(f),yc(f)),r.g=l}else $C(r);0<t.i.length&&lh(t)}else"stop"!=v[0]&&"close"!=v[0]||Ec(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Ec(t,7):r0(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}fp()}catch{}}function xC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fc(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function QS(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fc(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function YS(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ct=th.prototype).setTimeout=function(n){this.O=n},ct.ib=function(n){n=n.target;const e=this.L;e&&3==iu(n)?e.l():this.La(n)},ct.La=function(n){try{if(n==this.g)e:{const C=iu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||ha||this.g&&(this.h.h||this.g.fa()||uh(this.g)))){this.I||4!=C||7==e||fp(),_p(this);var t=this.g.aa();this.Y=t;t:if(AC(this)){var r=uh(this.g);n="";var i=r.length,a=4==iu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){rh(this),nh(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function qS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zd(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Xi(12),rh(this),nh(this);break e}Jd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ct(this,t)}this.P?(_c(this,C,l),ha&&this.i&&3==C&&(Bv(this.S,this.T,"tick",this.hb),this.T.start())):(Jd(this.j,this.m,l,null),Ct(this,l)),4==C&&rh(this),this.i&&!this.I&&(4==C?zC(this.l,this):(this.i=!1,yc(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),rh(this),nh(this)}}}catch{}},ct.hb=function(){if(this.g){var n=iu(this.g),e=this.g.fa();this.C<e.length&&(_p(this),_c(this,n,e),this.i&&4!=n&&yc(this))}},ct.cancel=function(){this.I=!0,rh(this)},ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function WS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(fp(),Xi(17)),rh(this),this.o=2,nh(this)):KS(this,this.V-n)};var vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pa(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof pa){this.h=void 0!==e?e:n.h,Vn(this,n.j),this.s=n.s,this.g=n.g,zv(this,n.m),this.l=n.l,e=n.i;var t=new vp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),qv(this,t),this.o=n.o}else n&&(t=String(n).match(vc))?(this.h=!!e,Vn(this,t[1]||"",!0),this.s=ih(t[2]||""),this.g=ih(t[3]||"",!0),zv(this,t[4]),this.l=ih(t[5]||"",!0),qv(this,t[6]||"",!0),this.o=ih(t[7]||"")):(this.h=!!e,this.i=new vp(null,this.h))}function Js(n){return new pa(n)}function Vn(n,e,t){n.j=t?ih(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qv(n,e,t){e instanceof vp?(n.i=e,function NC(n,e){e&&!n.j&&(il(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(MC(this,r),Zv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=sh(e,tA)),n.i=new vp(e,n.h))}function Bn(n,e,t){n.i.set(e,t)}function Km(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ih(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,RC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function RC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sh(e,Wv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sh(e,Wv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(sh(t,"/"==t.charAt(0)?eA:JS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sh(t,yp)),n.join("")};var Wv=/[#\/\?@]/g,JS=/[#\?:]/g,eA=/[#\?]/g,tA=/[#\?@]/g,yp=/#/g;function vp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function il(n){n.g||(n.g=new Map,n.h=0,n.i&&function XS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function MC(n,e){il(n),e=wc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function wp(n,e){return il(n),e=wc(n,e),n.g.has(e)}function Zv(n,e,t){MC(n,e),0<t.length&&(n.i=null,n.g.set(wc(n,e),wv(t)),n.h+=t.length)}function wc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function oh(n){this.l=n||Ep,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=vp.prototype).add=function(n,e){il(this),this.i=null,n=wc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){il(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ct.oa=function(){il(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ct.W=function(n){il(this);let e=[];if("string"==typeof n)wp(this,n)&&(e=e.concat(this.g.get(wc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ct.set=function(n,e){return il(this),this.i=null,wp(this,n=wc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Ep=10;function PC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kC(n){return n.h?1:n.g?n.g.size:0}function Kv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ym(n,e){n.g?n.g.add(e):n.h=e}function Yv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Qv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return wv(n.i)}function Xv(){}function OC(){this.g=new Xv}function rA(n,e,t){const r=t||"";try{xC(n,function(i,a){let l=i;Wd(i)&&(l=Pv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Qm(n){this.l=n.ac||null,this.j=n.jb||!1}function e0(n,e){di.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=FC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oh.prototype.cancel=function(){if(this.i=Qv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xv.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},Xv.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},ci(Qm,Hv),Qm.prototype.g=function(){return new e0(this.l,this.j)},Qm.prototype.i=function(n){return function(){return n}}({}),ci(e0,di);var FC=0;function t0(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function sl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ip(n)}function Ip(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=e0.prototype).open=function(n,e){if(this.readyState!=FC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ip(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sl(this)),this.readyState=FC},ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ip(this)),this.g&&(this.readyState=3,Ip(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;t0(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sl(this):Ip(this),3==this.readyState&&t0(this)}},ct.Va=function(n){this.g&&(this.response=this.responseText=n,sl(this))},ct.Ua=function(n){this.g&&(this.response=n,sl(this))},ct.ga=function(){this.g&&sl(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(e0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sA=Ut.JSON.parse;function ir(n){di.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ah,this.K=this.L=!1}ci(ir,di);var ah="",oA=/^https?$/i,aA=["POST","PUT"];function LC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lA(n),Cp(n)}function lA(n){n.D||(n.D=!0,Ii(n,"complete"),Ii(n,"error"))}function UC(n){if(n.h&&typeof np<"u"&&(!n.C[1]||4!=iu(n)||2!=n.aa()))if(n.v&&4==iu(n))dp(n.Ha,0,n);else if(Ii(n,"readystatechange"),4==iu(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(vc)[1]||null;if(!i&&Ut.self&&Ut.self.location){var a=Ut.self.location.protocol;i=a.substr(0,a.length-1)}r=!oA.test(i?i.toLowerCase():"")}t=r}if(t)Ii(n,"complete"),Ii(n,"success");else{n.m=6;try{var l=2<iu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",lA(n)}}finally{Cp(n)}}}function Cp(n,e){if(n.g){VC(n);const t=n.g,r=n.C[0]?hc:null;n.g=null,n.C=null,e||Ii(n,"ready");try{t.onreadystatechange=r}catch{}}}function VC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function iu(n){return n.g?n.g.readyState:0}function uh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ah:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function BC(n){let e="";return Dv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Xm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=BC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function bp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function n0(n){this.Ca=0,this.i=[],this.j=new hp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=bp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=bp("baseRetryDelayMs",5e3,n),this.bb=bp("retryDelaySeedMs",1e4,n),this.$a=bp("forwardChannelMaxRetries",2,n),this.ta=bp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new oh(n&&n.concurrentRequestLimit),this.Fa=new OC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function r0(n){if(jC(n),3==n.G){var e=n.U++,t=Js(n.F);Bn(t,"SID",n.I),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),ch(n,t),(e=new th(n,n.j,e,void 0)).K=2,e.v=Km(Js(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=KC(e.l,null),e.g.da(e.v)),e.F=Date.now(),yc(e)}WC(n)}function Dp(n){n.g&&(Tp(n),n.g.cancel(),n.g=null)}function jC(n){Dp(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),Sp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function lh(n){PC(n.h)||n.m||(n.m=!0,Ov(n.Ja,n),n.C=0)}function s0(n,e){var t;t=e?e.m:n.U++;const r=Js(n.F);Bn(r,"SID",n.I),Bn(r,"RID",t),Bn(r,"AID",n.T),ch(n,r),n.o&&n.s&&Xm(r,n.o,n.s),t=new th(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=HC(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ym(n.h,t),ru(t,r,e)}function ch(n,e){n.ia&&Dv(n.ia,function(t,r){Bn(e,r,t)}),n.l&&xC({},function(t,r){Bn(e,r,t)})}function HC(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ei(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const C=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{rA(C,l,"req"+v+"_")}catch{r&&r(C)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function $C(n){n.g||n.u||(n.Z=1,Ov(n.Ia,n),n.A=0)}function o0(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=pp(Ei(n.Ia,n),qC(n,n.A)),n.A++,0))}function Tp(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function GC(n){n.g=new th(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Js(n.sa);Bn(e,"RID","rpc"),Bn(e,"SID",n.I),Bn(e,"CI",n.L?"0":"1"),Bn(e,"AID",n.T),Bn(e,"TYPE","xmlhttp"),ch(n,e),n.o&&n.s&&Xm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Km(Js(e)),t.s=null,t.P=!0,SC(t,n)}function Sp(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function zC(n,e){var t=null;if(n.g==e){Sp(n),Tp(n),n.g=null;var r=2}else{if(!Kv(n.h,e))return;t=e.D,Yv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ii(r=$m(),new CC(r,t)),lh(n)}else $C(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function cA(n,e){return!(kC(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=pp(Ei(n.Ja,n,e),qC(n,n.C)),n.C++,0)))}(n,e)||2==r&&o0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ec(n,5);break;case 4:Ec(n,10);break;case 3:Ec(n,6);break;default:Ec(n,2)}}function qC(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ec(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ei(n.kb,n);t||(t=new pa("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Vn(t,"https"),Km(t)),function iA(n,e){const t=new hp;if(Ut.Image){const r=new Image;r.onload=Mm(Jv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Mm(Jv,t,r,"TestLoadImage: error",!1,e),r.onabort=Mm(Jv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Mm(Jv,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xi(2);n.G=0,n.l&&n.l.va(e),WC(n),jC(n)}function WC(n){if(n.G=0,n.la=[],n.l){const e=Qv(n.h);(0!=e.length||0!=n.i.length)&&(lC(n.la,e),lC(n.la,n.i),n.h.i.length=0,wv(n.i),n.i.length=0),n.l.ua()}}function ZC(n,e,t){var r=t instanceof pa?Js(t):new pa(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),zv(r,r.m);else{var i=Ut.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new pa(null,void 0);r&&Vn(a,r),e&&(a.g=e),i&&zv(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Bn(r,t,e),Bn(r,"VER",n.ma),ch(n,r),r}function KC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Da&&!n.ra?new Qm({jb:!0}):n.ra)).Ka(n.H),e}function YC(){}function Jm(){if(pc&&!(10<=Number(pC)))throw Error("Environmental error: no available transport.")}function ps(n,e){di.call(this),this.g=new n0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Zd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dh(this)}function a0(n){zm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QC(){qm.call(this),this.status=1}function dh(n){this.g=n}(ct=ir.prototype).Ka=function(n){this.L=n},ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wm.g(),this.C=function DC(n){return n.h||(n.h=n.i())}(this.u?this.u:Wm),this.g.onreadystatechange=Ei(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void LC(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Ut.FormData&&n instanceof Ut.FormData,!(0<=vv(aA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{VC(this),0<this.B&&((this.K=function uA(n){return pc&&function AP(){return function cC(n){var e=SP;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Iv(String(fa)).split("."),t=Iv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Nm(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Nm(0==i[2].length,0==a[2].length)||Nm(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ei(this.qa,this)):this.A=dp(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){LC(this,a)}},ct.qa=function(){typeof np<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ii(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ii(this,"complete"),Ii(this,"abort"),Cp(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cp(this,!0)),ir.X.M.call(this)},ct.Ha=function(){this.s||(this.F||this.v||this.l?UC(this):this.fb())},ct.fb=function(){UC(this)},ct.aa=function(){try{return 2<iu(this)?this.g.status:-1}catch{return-1}},ct.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sA(e)}},ct.Ea=function(){return this.m},ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=n0.prototype).ma=8,ct.G=1,ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new th(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Tv(a),gc(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=HC(this,i,e),Bn(t=Js(this.F),"RID",n),Bn(t,"CVER",22),this.D&&Bn(t,"X-HTTP-Session-Id",this.D),ch(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(BC(a)))+"&"+e:this.o&&Xm(t,this.o,a)),Ym(this.h,i),this.Ya&&Bn(t,"TYPE","init"),this.O?(Bn(t,"$req",e),Bn(t,"SID","null"),i.Z=!0,ru(i,t,null)):ru(i,t,e),this.G=2}}else 3==this.G&&(n?s0(this,n):0==this.i.length||PC(this.h)||s0(this))},ct.Ia=function(){if(this.u=null,GC(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=pp(Ei(this.eb,this),n)}},ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Xi(10),Dp(this),GC(this))},ct.cb=function(){null!=this.v&&(this.v=null,Dp(this),o0(this),Xi(19))},ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Xi(2)):(this.j.info("Failed to ping google.com"),Xi(1))},(ct=YC.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Ra=function(){},Jm.prototype.g=function(n,e){return new ps(n,e)},ci(ps,di),ps.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Xi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ZC(n,null,n.V),lh(n)},ps.prototype.close=function(){r0(this.g)},ps.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Pv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&lh(e)},ps.prototype.M=function(){this.g.l=null,delete this.j,r0(this.g),delete this.g,ps.X.M.call(this)},ci(a0,zm),ci(QC,qm),ci(dh,YC),dh.prototype.xa=function(){Ii(this.g,"a")},dh.prototype.wa=function(n){Ii(this.g,new a0(n))},dh.prototype.va=function(n){Ii(this.g,new QC)},dh.prototype.ua=function(){Ii(this.g,"b")},Jm.prototype.createWebChannel=Jm.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,Gm.NO_ERROR=0,Gm.TIMEOUT=8,Gm.HTTP_ERROR=6,bC.COMPLETE="complete",$v.EventType=eh,eh.OPEN="a",eh.CLOSE="b",eh.ERROR="c",eh.MESSAGE="d",di.prototype.listen=di.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.Oa,ir.prototype.getLastErrorCode=ir.prototype.Ea,ir.prototype.getStatus=ir.prototype.aa,ir.prototype.getResponseJson=ir.prototype.Sa,ir.prototype.getResponseText=ir.prototype.fa,ir.prototype.send=ir.prototype.da,ir.prototype.setWithCredentials=ir.prototype.Ka;var XC=Xs.createWebChannelTransport=function(){return new Jm},dA=Xs.getStatEventTarget=function(){return $m()},u0=Xs.ErrorCode=Gm,hA=Xs.EventType=bC,l0=Xs.Event=mc,e_=Xs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},JC=Xs.FetchXmlHttpFactory=Qm,hh=Xs.WebChannel=$v,fA=Xs.XhrIo=ir;const eb="@firebase/firestore";class Vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let fh="9.17.2";const su=new Os.Yd("@firebase/firestore");function ol(){return su.logLevel}function Ve(n,...e){if(su.logLevel<=Os.in.DEBUG){const t=e.map(Ap);su.debug(`Firestore (${fh}): ${n}`,...t)}}function Br(n,...e){if(su.logLevel<=Os.in.ERROR){const t=e.map(Ap);su.error(`Firestore (${fh}): ${n}`,...t)}}function al(n,...e){if(su.logLevel<=Os.in.WARN){const t=e.map(Ap);su.warn(`Firestore (${fh}): ${n}`,...t)}}function Ap(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${fh}) INTERNAL ASSERTION FAILED: `+n;throw Br(e),new Error(e)}function mt(n,e){n||it()}function Ze(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class c0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vr.UNAUTHENTICATED))}shutdown(){}}class gA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mA{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new jr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,ve.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new jr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new c0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Vr(e)}}class _A{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new _A(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RP{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.A=t.token,new d0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function ph(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ib(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Qn(0,0))}static max(){return new vt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xp{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends xp{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const EA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends xp{construct(e,t,r){return new mr(e,t,r)}static isValidIdentifier(e){return EA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ne(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ne(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ne(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(dn.fromString(e))}static fromName(e){return new qe(dn.fromString(e).popFirst(5))}static empty(){return new qe(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new dn(e.slice()))}}class t_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function h0(n){return n.fields.find(e=>2===e.kind)}function Ic(n){return n.fields.filter(e=>2!==e.kind)}t_.UNKNOWN_ID=-1;class Mp{constructor(e,t){this.fieldPath=e,this.kind=t}}class gh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gh(0,gs.min())}}function f0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new gs(i,qe.empty(),e)}function p0(n){return new gs(n.readTime,n.key,-1)}class gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gs(vt.min(),qe.empty(),-1)}static max(){return new gs(vt.max(),qe.empty(),-1)}}function g0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const IA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ob{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ou(n){return m0.apply(this,arguments)}function m0(){return m0=(0,ve.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==IA)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),m0.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(C=>{l[v]=C,++f,f===a&&r(l)},C=>i(C))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class n_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new jr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Cc(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=_0(r.target.error);this.v.reject(new Cc(e,i))}}static open(e,t,r,i){try{return new n_(t,e.transaction(i,r))}catch(a){throw new Cc(t,a)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bA(t)}}class Ji{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ji.D((0,L.z$)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),au(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(Ji.N())return!0;const e=(0,L.z$)(),t=Ji.D(e),r=0<t&&t<10,i=Ji.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Cc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ne(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ne(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Cc(e,f))},a.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=n_.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(C=>(m.V(),C)).catch(C=>(m.abort(C),de.reject(C))).toPromise();return v.catch(()=>{}),yield m.P,v}catch(m){const v=m,C="FirebaseError"!==v.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",v.message,"Retrying:",C),a.close(),!C)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class CA{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return au(this.q.delete())}}class Cc extends Ne{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ci(n){return"IndexedDbTransactionError"===n.name}class bA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),au(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),au(this.store.add(e))}get(e){return au(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),au(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),au(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const l=_0(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new CA(f),v=t(f.primaryKey,f.value,m);if(v instanceof de){const C=v.catch(S=>(m.done(),de.reject(S)));r.push(C)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function au(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=_0(r.target.error);t(i)}})}let mh=!1;function _0(n){const e=Ji.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mh||(mh=!0,setTimeout(()=>{throw r},0)),r}}return n}class DA{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ci(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ou(r)}yield t.nt(6e4)}))}}class TA{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Ve("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=p0(a);g0(l,r)>0&&(r=l)}),new gs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Oi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class ab{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}function i_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bc(n){return null==n}function _h(n){return 0===n&&1/n==-1/0}function o_(n){return"number"==typeof n&&Number.isInteger(n)&&!_h(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class v0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new v0("Invalid base64 string: "+i):i}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const xA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(n){if(mt(!!n),"string"==typeof n){let e=0;const t=xA.exec(n);if(mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sr(n.seconds),nanos:sr(n.nanos)}}function sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function lu(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function a_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ub(n){const e=n.mapValue.fields.__previous_value__;return a_(e)?ub(e):e}function yh(n){const e=ll(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}const cu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},u_={nullValue:"NULL_VALUE"};function cl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?a_(n)?4:cb(n)?9007199254740991:10:it()}function To(n,e){if(n===e)return!0;const t=cl(n);if(t!==cl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yh(n).isEqual(yh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ll(r.timestampValue),l=ll(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,lu(n.bytesValue).isEqual(lu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return sr(r.geoPointValue.latitude)===sr(i.geoPointValue.latitude)&&sr(r.geoPointValue.longitude)===sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return sr(r.integerValue)===sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=sr(r.doubleValue),l=sr(i.doubleValue);return a===l?_h(a)===_h(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return ph(n.arrayValue.values||[],e.arrayValue.values||[],To);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(i_(a)!==i_(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!To(a[f],l[f])))return!1;return!0}(n,e);default:return it()}var i}function Np(n,e){return void 0!==(n.values||[]).find(t=>To(t,e))}function du(n,e){if(n===e)return 0;const t=cl(n),r=cl(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=sr(i.integerValue||i.doubleValue),f=sr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return lb(n.timestampValue,e.timestampValue);case 4:return lb(yh(n),yh(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=lu(i),f=lu(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=Gt(l[m],f[m]);if(0!==v)return v}return Gt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Gt(sr(i.latitude),sr(a.latitude));return 0!==l?l:Gt(sr(i.longitude),sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=du(l[m],f[m]);if(v)return v}return Gt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===cu.mapValue&&a===cu.mapValue)return 0;if(i===cu.mapValue)return 1;if(a===cu.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let C=0;C<f.length&&C<v.length;++C){const S=Gt(f[C],v[C]);if(0!==S)return S;const N=du(l[f[C]],m[v[C]]);if(0!==N)return N}return Gt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw it()}}function lb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=ll(n),r=ll(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Hr(n){return dl(n)}function dl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ll(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?lu(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=dl(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${dl(r.fields[f])}`;return a+"}"}(n.mapValue):it();var e}function Dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function w0(n){return!!n&&"integerValue"in n}function l_(n){return!!n&&"arrayValue"in n}function RA(n){return!!n&&"nullValue"in n}function E0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pp(n){return!!n&&"mapValue"in n}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ul(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function I0(n){return"nullValue"in n?u_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Dc(uu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function MA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Dc(uu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?cu:it()}function C0(n,e){const t=du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function db(n,e){const t=du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hl{constructor(e,t){this.position=e,this.inclusive=t}}function hb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):du(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function c_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!To(n.position[t],e.position[t]))return!1;return!0}class b0{}class en extends b0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new T0(e,t,r):"array-contains"===t?new kA(e,r):"in"===t?new mb(e,r):"not-in"===t?new OA(e,r):"array-contains-any"===t?new _b(e,r):new en(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new MP(e,r):new NA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(du(t,this.value)):null!==t&&cl(this.value)===cl(t)&&this.matchesComparison(du(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gn extends b0{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new gn(e,t)}matches(e){return fl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function fl(n){return"and"===n.op}function fb(n){return"or"===n.op}function d_(n){return pb(n)&&fl(n)}function pb(n){for(const e of n.filters)if(e instanceof gn)return!1;return!0}function h_(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+Hr(n.value);if(d_(n))return n.filters.map(e=>h_(e)).join(",");{const e=n.filters.map(t=>h_(t)).join(",");return`${n.op}(${e})`}}function Tc(n,e){return n instanceof en?(t=n,(r=e)instanceof en&&t.op===r.op&&t.field.isEqual(r.field)&&To(t.value,r.value)):n instanceof gn?function(t,r){return r instanceof gn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&Tc(a,r.filters[l]),!0)}(n,e):void it();var t,r}function gb(n,e){const t=n.filters.concat(e);return gn.create(t,n.op)}function D0(n){return n instanceof en?`${(e=n).field.canonicalString()} ${e.op} ${Hr(e.value)}`:n instanceof gn?function(e){return e.op.toString()+" {"+e.getFilters().map(D0).join(" ,")+"}"}(n):"Filter";var e}class T0 extends en{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class MP extends en{constructor(e,t){super(e,"in",t),this.keys=PA(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NA extends en{constructor(e,t){super(e,"not-in",t),this.keys=PA(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PA(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class kA extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return l_(t)&&Np(t.arrayValue,this.value)}}class mb extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Np(this.value.arrayValue,t)}}class OA extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Np(this.value.arrayValue,t)}}class _b extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!l_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Np(this.value.arrayValue,r))}}class Sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function FA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class or{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kp(this.root,e,this.comparator,!1)}getReverseIterator(){return new kp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kp(this.root,e,this.comparator,!0)}}class kp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??bi.RED,this.left=i??bi.EMPTY,this.right=a??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new bi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(e){return new S0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class S0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vh(n){return n.hasNext()?n.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(mr.comparator)}static empty(){return new es([])}unionWith(e){let t=new Dn(mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ph(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=mr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=hu(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Pp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ul(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Xr(hu(this.value))}}function A0(n){const e=[];return ul(n.fields,(t,r)=>{const i=new mr([t]);if(Pp(r)){const a=A0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new es(e)}class Pn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Pn(e,0,vt.min(),vt.min(),vt.min(),Xr.empty(),0)}static newFoundDocument(e,t,r,i){return new Pn(e,1,t,vt.min(),r,i,0)}static newNoDocument(e,t){return new Pn(e,2,t,vt.min(),vt.min(),Xr.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,vt.min(),vt.min(),Xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class LA{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this._t=null}}function x0(n,e=null,t=[],r=[],i=null,a=null,l=null){return new LA(n,e,t,r,i,a,l)}function wh(n){const e=Ze(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>h_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hr(r)).join(",")),e._t=t}return e._t}function Eh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Tc(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!c_(n.startAt,e.startAt)&&c_(n.endAt,e.endAt)}function R0(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function M0(n,e){return n.filters.filter(t=>t instanceof en&&t.field.isEqual(e))}function UA(n,e,t){let r=u_,i=!0;for(const a of M0(n,e)){let l=u_,f=!0;switch(a.op){case"<":case"<=":l=I0(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=u_}C0({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];C0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function VA(n,e,t){let r=cu,i=!0;for(const a of M0(n,e)){let l=cu,f=!0;switch(a.op){case">=":case">":l=MA(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=cu}db({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];db({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class pl{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.wt=null,this.gt=null}}function BA(n,e,t,r,i,a,l,f){return new pl(n,e,t,r,i,a,l,f)}function Op(n){return new pl(n)}function jA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ih(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function N0(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function f_(n){return null!==n.collectionGroup}function ga(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=N0(e),r=Ih(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Sc(t)),e.wt.push(new Sc(mr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Sc(mr.keyField(),a))}}}return e.wt}function Fi(n){const e=Ze(n);if(!e.gt)if("F"===e.limitType)e.gt=x0(e.path,e.collectionGroup,ga(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of ga(e))t.push(new Sc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new hl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hl(e.startAt.position,e.startAt.inclusive):null;e.gt=x0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function p_(n,e){e.getFirstInequalityField(),N0(n);const t=n.filters.concat([e]);return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function P0(n,e,t){return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ac(n,e){return Eh(Fi(n),Fi(e))&&n.limitType===e.limitType}function k0(n){return`${wh(Fi(n))}|lt:${n.limitType}`}function O0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>D0(r)).join(", ")}]`),bc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hr(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hr(r)).join(",")),`Target(${t})`}(Fi(n))}; limitType=${n.limitType})`}function Ch(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of ga(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=hb(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,ga(t),r)||t.endAt&&!function(i,a,l){const f=hb(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,ga(t),r)));var t,r}function HA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $A(n){return(e,t)=>{let r=!1;for(const i of ga(n)){const a=GA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function GA(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?du(f,m):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function yb(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function Fp(n){return{integerValue:""+n}}function vb(n,e){return o_(e)?Fp(e):yb(n,e)}class F0{constructor(){this._=void 0}}function NP(n,e,t){return n instanceof bh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof xc?zA(n,e):n instanceof Rc?L0(n,e):function(r,i){const a=wb(r,i),l=qA(a)+qA(r.It);return w0(a)&&w0(r.It)?Fp(l):yb(r.Tt,l)}(n,e)}function PP(n,e,t){return n instanceof xc?zA(n,e):n instanceof Rc?L0(n,e):t}function wb(n,e){return n instanceof Mc?w0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bh extends F0{}class xc extends F0{constructor(e){super(),this.elements=e}}function zA(n,e){const t=eo(e);for(const r of n.elements)t.some(i=>To(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rc extends F0{constructor(e){super(),this.elements=e}}function L0(n,e){let t=eo(e);for(const r of n.elements)t=t.filter(i=>!To(i,r));return{arrayValue:{values:t}}}class Mc extends F0{constructor(e,t){super(),this.Tt=e,this.It=t}}function qA(n){return sr(n.integerValue||n.doubleValue)}function eo(n){return l_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Lp{constructor(e,t){this.field=e,this.transform=t}}class WA{constructor(e,t){this.version=e,this.transformResults=t}}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ts(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class g_{}function m_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pc(n.key,ar.none()):new Nc(n.key,n.data,ar.none());{const t=n.data,r=Xr.empty();let i=new Dn(mr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new fu(n.key,r,new es(i.toArray()),ar.none())}}function ZA(n,e,t){n instanceof Nc?function(r,i,a){const l=r.value.clone(),f=H0(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fu?function(r,i,a){if(!ts(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=H0(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(j0(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Up(n,e,t,r){return n instanceof Nc?function(i,a,l,f){if(!ts(i.precondition,a))return l;const m=i.value.clone(),v=Eb(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof fu?function(i,a,l,f){if(!ts(i.precondition,a))return l;const m=Eb(i.fieldTransforms,f,a),v=a.data;return v.setAll(j0(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,ts(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function V0(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=wb(r.transform,i||null);null!=a&&(null===t&&(t=Xr.empty()),t.set(r.field,a))}return t||null}function B0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ph(t,r,(i,a)=>function U0(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof xc&&r instanceof xc||t instanceof Rc&&r instanceof Rc?ph(t.elements,r.elements,To):t instanceof Mc&&r instanceof Mc?To(t.It,r.It):t instanceof bh&&r instanceof bh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Nc extends g_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fu extends g_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function j0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function H0(n,e,t){const r=new Map;mt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,PP(l,f,t[i]))}return r}function Eb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,NP(a,l,e))}return r}class Pc extends g_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $0 extends g_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class G0{constructor(e){this.count=e}}var An,cn;function __(n){switch(n){default:return it();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function ma(n){if(void 0===n)return Br("GRPC error has no .code"),pe.UNKNOWN;switch(n){case An.OK:return pe.OK;case An.CANCELLED:return pe.CANCELLED;case An.UNKNOWN:return pe.UNKNOWN;case An.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case An.INTERNAL:return pe.INTERNAL;case An.UNAVAILABLE:return pe.UNAVAILABLE;case An.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case An.NOT_FOUND:return pe.NOT_FOUND;case An.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case An.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case An.ABORTED:return pe.ABORTED;case An.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case An.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case An.DATA_LOSS:return pe.DATA_LOSS;default:return it()}}(cn=An||(An={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ul(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}const kP=new or(qe.comparator);function ms(){return kP}const Ib=new or(qe.comparator);function Vp(...n){let e=Ib;for(const t of n)e=e.insert(t.key,t);return e}function Cb(n){let e=Ib;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function So(){return Dh()}function KA(){return Dh()}function Dh(){return new gl(n=>n.toString(),(n,e)=>n.isEqual(e))}const YA=new or(qe.comparator),bb=new Dn(qe.comparator);function Zt(...n){let e=bb;for(const t of n)e=e.add(t);return e}const z0=new Dn(Gt);function Bp(){return z0}class Th{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Th(vt.min(),i,Bp(),ms(),Zt())}}class Sh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sh(r,t,Zt(),Zt(),Zt())}}class jp{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class q0{constructor(e,t){this.targetId=e,this.Rt=t}}class Hp{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class $p{constructor(){this.bt=0,this.vt=Sb(),this.Pt=Qr.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=Zt(),t=Zt(),r=Zt();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Sh(this.Pt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=Sb()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class Db{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=ms(),this.Kt=Tb(),this.Gt=new Dn(Gt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const a=i.target;if(R0(a))if(0===r){const l=new qe(a.path);this.zt(t,l,Pn.newNoDocument(l,vt.min()))}else mt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((a,l)=>{const f=this.Xt(l);if(f){if(a.current&&R0(f.target)){const m=new qe(f.target.path);null!==this.Ut.get(m)||this.ne(l,m)||this.zt(l,m,Pn.newNoDocument(m,e))}a.Ct&&(t.set(l,a.Nt()),a.kt())}});let r=Zt();this.Kt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Th(e,t,this.Gt,this.Ut,r);return this.Ut=ms(),this.Kt=Tb(),this.Gt=new Dn(Gt),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.Ot(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new $p,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Dn(Gt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new $p),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function Tb(){return new or(qe.comparator)}function Sb(){return new or(qe.comparator)}const OP={asc:"ASCENDING",desc:"DESCENDING"},FP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LP={and:"AND",or:"OR"};class Ab{constructor(e,t){this.databaseId=e,this.yt=t}}function Ah(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xb(n,e){return n.yt?e.toBase64():e.toUint8Array()}function QA(n,e){return Ah(n,e.toTimestamp())}function $r(n){return mt(!!n),vt.fromTimestamp(function(e){const t=ll(e);return new Qn(t.seconds,t.nanos)}(n))}function Rb(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function XA(n){const e=dn.fromString(n);return mt(X0(e)),e}function y_(n,e){return Rb(n.databaseId,e.path)}function pu(n,e){const t=XA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Mb(t))}function W0(n,e){return Rb(n.databaseId,e)}function Gp(n){const e=XA(n);return 4===e.length?dn.emptyPath():Mb(e)}function zp(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mb(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Z0(n,e,t){return{name:y_(n,e),fields:t.value.mapValue.fields}}function ml(n,e,t){const r=pu(n,e.name),i=$r(e.updateTime),a=e.createTime?$r(e.createTime):vt.min(),l=new Xr({mapValue:{fields:e.fields}}),f=Pn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function kc(n,e){let t;if(e instanceof Nc)t={update:Z0(n,e.key,e.value)};else if(e instanceof Pc)t={delete:y_(n,e.key)};else if(e instanceof fu)t={update:Z0(n,e.key,e.data),updateMask:Ob(e.fieldMask)};else{if(!(e instanceof $0))return it();t={verify:y_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof bh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mc)return{fieldPath:a.field.canonicalString(),increment:l.It};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:QA(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function Y0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ar.updateTime($r(i.updateTime)):void 0!==i.exists?ar.exists(i.exists):ar.none():ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(mt("REQUEST_TIME"===l.setToServerValue),f=new bh):"appendMissingElements"in l?f=new xc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Rc(l.removeAllFromArray.values||[]):"increment"in l?f=new Mc(a,l.increment):it();const m=mr.fromServerFormat(l.fieldPath);return new Lp(m,f)}(n,i)):[];var i;if(e.update){const i=pu(n,e.update.name),a=new Xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new es((e.updateMask.fieldPaths||[]).map(v=>mr.fromServerFormat(v)));return new fu(i,a,l,t,r)}return new Nc(i,a,t,r)}if(e.delete){const i=pu(n,e.delete);return new Pc(i,t)}if(e.verify){const i=pu(n,e.verify);return new $0(i,t)}return it()}function v_(n,e){return{documents:[W0(n,e.path)]}}function xh(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=W0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=W0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return kb(gn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:_l((C=v).field),direction:VP(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.yt||bc(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function JA(n){let e=Gp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const S=ex(C);return S instanceof gn&&d_(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new Sc(Rh((S=C).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(C){let S;return S="object"==typeof C?C.value:C,bc(S)?null:S}(t.limit));let m=null;var C;t.startAt&&(m=new hl((C=t.startAt).values||[],!!C.before));let v=null;return t.endAt&&(v=function(C){return new hl(C.values||[],!C.before)}(t.endAt)),BA(e,i,l,a,f,"F",m,v)}function ex(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Rh(e.unaryFilter.field);return en.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Rh(e.unaryFilter.field);return en.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Rh(e.unaryFilter.field);return en.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Rh(e.unaryFilter.field);return en.create(a,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?en.create(Rh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return gn.create(e.compositeFilter.filters.map(t=>ex(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function VP(n){return OP[n]}function Pb(n){return FP[n]}function tx(n){return LP[n]}function _l(n){return{fieldPath:n.canonicalString()}}function Rh(n){return mr.fromServerFormat(n.fieldPath)}function kb(n){return n instanceof en?function(e){if("=="===e.op){if(E0(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NAN"}};if(RA(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(E0(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NOT_NAN"}};if(RA(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(e.field),op:Pb(e.op),value:e.value}}}(n):n instanceof gn?function(e){const t=e.getFilters().map(r=>kb(r));return 1===t.length?t[0]:{compositeFilter:{op:tx(e.op),filters:t}}}(n):it()}function Ob(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function X0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Fb(e)),e=nx(n.get(t),e);return Fb(e)}function nx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Fb(n){return n+"\x01\x01"}function Ao(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:it()}a=l+2}return new dn(r)}const w_=["userId","batchId"];function J0(n,e){return[n,Li(e)]}function ew(n,e,t){return[n,Li(e),t]}const tw={},rx=["prefixPath","collectionGroup","readTime","documentId"],ix=["prefixPath","collectionGroup","documentId"],BP=["collectionGroup","readTime","prefixPath","documentId"],jP=["canonicalId","targetId"],sx=["targetId","path"],ox=["path","targetId"],ax=["collectionId","parent"],HP=["indexId","uid"],$P=["uid","sequenceNumber"],GP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zP=["indexId","uid","orderedDocumentKey"],qP=["userId","collectionPath","documentId"],ux=["userId","collectionPath","largestBatchId"],WP=["userId","collectionGroup","largestBatchId"],lx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZP=[...lx,"documentOverlays"],cx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dx=cx,KP=[...dx,"indexConfiguration","indexState","indexEntries"];class s extends ob{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function o(n,e){const t=Ze(n);return Ji.M(t.re,e)}class u{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ZA(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Up(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Up(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KA();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=m_(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&ph(this.mutations,e.mutations,(t,r)=>B0(t,r))&&ph(this.baseMutations,e.baseMutations,(t,r)=>B0(t,r))}}class c{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length);let i=YA;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new c(e,t,r,i)}}class h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class p{constructor(e,t,r,i,a=vt.min(),l=vt.min(),f=Qr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new p(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new p(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new p(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class y{constructor(e){this.oe=e}}function b(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:A(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:y_(i=n.oe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ah(i,a.version.toTimestamp()),createTime:Ah(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:M(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:M(e.version)}}var i,a;return r}function A(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function M(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function j(n){const e=new Qn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function K(n,e){const t=(e.baseMutations||[]).map(a=>Y0(n.oe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Y0(n.oe,a)),i=Qn.fromMillis(e.localWriteTimeMs);return new u(e.batchId,i,t,r)}function ie(n){const e=j(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?j(n.lastLimboFreeSnapshotVersion):vt.min();let r;var i;return void 0!==n.query.documents?(mt(1===(i=n.query).documents.length),r=Fi(Op(Gp(i.documents[0])))):r=Fi(JA(n.query)),new p(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function Ce(n,e){const t=M(e.snapshotVersion),r=M(e.lastLimboFreeSnapshotVersion);let i;i=R0(e.target)?v_(n.oe,e.target):xh(n.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wh(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function je(n){const e=JA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?P0(e,e.limit,"L"):e}function We(n,e){return new h(e.largestBatchId,Y0(n.oe,e.overlayMutation))}function at(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function At(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:M(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}class Fe{getBundleMetadata(e,t){return Ft(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:j(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Ft(e).put({bundleId:(r=t).id,createTime:M($r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jn(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:je(i.bundledQuery),readTime:j(i.readTime)};var i})}saveNamedQuery(e,t){return jn(e).put({name:(r=t).name,readTime:M($r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ft(n){return o(n,"bundles")}function jn(n){return o(n,"namedQueries")}class Xn{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Xn(e,t.uid||"")}getOverlay(e,t){return E_(e).get(at(this.userId,t)).next(r=>r?We(this.Tt,r):null)}getOverlays(e,t){const r=So();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new h(t,l);i.push(this.ce(e,f))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Li(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(E_(e).Y("collectionPathOverlayIndex",f))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=So(),a=Li(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return E_(e).W("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=We(this.Tt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=So();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return E_(e).X({index:"collectionGroupOverlayIndex",range:f},(m,v,C)=>{const S=We(this.Tt,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):C.done()}).next(()=>a)}ce(e,t){return E_(e).put(function(r,i,a){const[l,f,m]=at(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:kc(r.oe,a.mutation)}}(this.Tt,this.userId,t))}}function E_(n){return o(n,"documentOverlays")}class qp{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(sr(e.integerValue));else if("doubleValue"in e){const r=sr(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),_h(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(lu(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?cb(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):it()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),qe.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function EV(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function YP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=EV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}qp.Ee=new qp;class IV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.be()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=YP(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=YP(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CV{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class bV{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class nw{constructor(){this.Le=new IV,this.qe=new CV(this.Le),this.Ue=new bV(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Wp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wp(this.indexId,this.documentKey,this.arrayValue,r)}}function Mh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=QP(n.arrayValue,e.arrayValue),0!==t?t:(t=QP(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function QP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){mt(e.collectionGroup===this.collectionId);const t=h0(e);if(void 0!==t&&!this.He(t))return!1;const r=Ic(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const l=r[i];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Qe.length||!this.Ye(this.Qe[a++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function XP(n){var e,t;if(mt(n instanceof en||n instanceof gn),n instanceof en){if(n instanceof mb){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>en.create(n.field,"==",a)))||[];return gn.create(i,"or")}return n}const r=n.filters.map(i=>XP(i));return gn.create(r,n.op)}function TV(n){if(0===n.getFilters().length)return[];const e=px(XP(n));return mt(JP(e)),hx(e)||fx(e)?[e]:e.getFilters()}function hx(n){return n instanceof en}function fx(n){return n instanceof gn&&d_(n)}function JP(n){return hx(n)||fx(n)||function(e){if(e instanceof gn&&fb(e)){for(const t of e.getFilters())if(!hx(t)&&!fx(t))return!1;return!0}return!1}(n)}function px(n){if(mt(n instanceof en||n instanceof gn),n instanceof en)return n;if(1===n.filters.length)return px(n.filters[0]);const e=n.filters.map(r=>px(r));let t=gn.create(e,n.op);return t=Lb(t),JP(t)?t:(mt(t instanceof gn),mt(fl(t)),mt(t.filters.length>1),t.filters.reduce((r,i)=>gx(r,i)))}function gx(n,e){let t;return mt(n instanceof en||n instanceof gn),mt(e instanceof en||e instanceof gn),t=n instanceof en?e instanceof en?gn.create([n,e],"and"):ek(n,e):e instanceof en?ek(e,n):function(r,i){if(mt(r.filters.length>0&&i.filters.length>0),fl(r)&&fl(i))return gb(r,i.getFilters());const a=fb(r)?r:i,l=fb(r)?i:r,f=a.filters.map(m=>gx(m,l));return gn.create(f,"or")}(n,e),Lb(t)}function ek(n,e){if(fl(e))return gb(e,n.getFilters());{const t=e.filters.map(r=>gx(n,r));return gn.create(t,"or")}}function Lb(n){if(mt(n instanceof en||n instanceof gn),n instanceof en)return n;const e=n.getFilters();if(1===e.length)return Lb(e[0]);if(pb(n))return n;const t=e.map(i=>Lb(i)),r=[];return t.forEach(i=>{i instanceof en?r.push(i):i instanceof gn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:gn.create(r,n.op)}class SV{constructor(){this.Ze=new mx}addToCollectionParentIndex(e,t){return this.Ze.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(gs.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class mx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(dn.comparator)).toArray()}}const Ub=new Uint8Array(0);class AV{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new mx,this.tn=new gl(r=>wh(r),(r,i)=>Eh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Li(i)};return tk(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ib(t),""],!1,!0);return tk(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Ao(l.parent))}return r})}addFieldIndex(e,t){const r=Vb(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=iw(e);return a.next(f=>{l.put(At(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Vb(e),i=iw(e),a=rw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=rw(e);let i=!0;const a=new Map;return de.forEach(this.en(t),l=>this.nn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Zt();const f=[];return de.forEach(a,(m,v)=>{var C;Ve("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${wh(t)}`);const S=function(nt,ut){const Mt=h0(ut);if(void 0===Mt)return null;for(const Vt of M0(nt,Mt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(v,m),N=function(nt,ut){const Mt=new Map;for(const Vt of Ic(ut))for(const Nr of M0(nt,Vt.fieldPath))switch(Nr.op){case"==":case"in":Mt.set(Vt.fieldPath.canonicalString(),Nr.value);break;case"not-in":case"!=":return Mt.set(Vt.fieldPath.canonicalString(),Nr.value),Array.from(Mt.values())}return null}(v,m),B=function(nt,ut){const Mt=[];let Vt=!0;for(const Nr of Ic(ut)){const wu=0===Nr.kind?UA(nt,Nr.fieldPath,nt.startAt):VA(nt,Nr.fieldPath,nt.startAt);Mt.push(wu.value),Vt&&(Vt=wu.inclusive)}return new hl(Mt,Vt)}(v,m),G=function(nt,ut){const Mt=[];let Vt=!0;for(const Nr of Ic(ut)){const wu=0===Nr.kind?VA(nt,Nr.fieldPath,nt.endAt):UA(nt,Nr.fieldPath,nt.endAt);Mt.push(wu.value),Vt&&(Vt=wu.inclusive)}return new hl(Mt,Vt)}(v,m),le=this.sn(m,v,B),_e=this.sn(m,v,G),Ke=this.rn(m,v,N),dt=this.on(m.indexId,S,le,B.inclusive,_e,G.inclusive,Ke);return de.forEach(dt,nt=>r.J(nt,t.limit).next(ut=>{ut.forEach(Mt=>{const Vt=qe.fromSegments(Mt.documentKey);l.has(Vt)||(l=l.add(Vt),f.push(Vt))})}))}).next(()=>f)}return de.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:TV(gn.create(e.filters,"and")).map(r=>x0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),C=[];for(let S=0;S<m;++S){const N=t?this.un(t[S/v]):Ub,B=this.cn(e,N,r[S%v],i),G=this.an(e,N,a[S%v],l),le=f.map(_e=>this.cn(e,N,_e,!0));C.push(...this.createRange(B,G,le))}return C}cn(e,t,r,i){const a=new Wp(e,qe.empty(),t,r);return i?a:a.Ge()}an(e,t,r,i){const a=new Wp(e,qe.empty(),t,r);return i?a.Ge():a}nn(e,t){const r=new DV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.We(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.en(t);return de.forEach(i,a=>this.nn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let m=new Dn(mr.comparator),v=!1;for(const C of f.filters)for(const S of C.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const C of f.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new nw;for(const i of Ic(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ke(i.kind);qp.Ee.ae(a,l)}return r.Be()}un(e){const t=new nw;return qp.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new nw;return qp.Ee.ae(Dc(this.databaseId,t),r.Ke(function(i){const a=Ic(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new nw);let a=0;for(const l of Ic(e)){const f=r[a++];for(const m of i)if(this.fn(t,l.fieldPath)&&l_(f))i=this.dn(i,l,f);else{const v=m.Ke(l.kind);qp.Ee.ae(f,v)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new nw;m.seed(f.Be()),qp.Ee.ae(l,m.Ke(t.kind)),a.push(m)}return a}fn(e,t){return!!e.filters.find(r=>r instanceof en&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Vb(e),i=iw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return de.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,C){const S=C?new gh(C.sequenceNumber,new gs(j(C.readTime),new qe(Ao(C.documentKey)),C.largestBatchId)):gh.empty(),N=v.fields.map(([B,G])=>new Mp(mr.fromServerFormat(B),G));return new t_(v.indexId,v.collectionGroup,N,S)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Vb(e),a=iw(e);return this.wn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>de.forEach(f,m=>a.put(At(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),de.forEach(f,m=>this.mn(e,i,m).next(v=>{const C=this.gn(a,m);return v.isEqual(C)?de.resolve():this.yn(e,a,m,v,C)}))))})}pn(e,t,r,i){return rw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return rw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=rw(e);let a=new Dn(Mh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,f)=>{a=a.add(new Wp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}gn(e,t){let r=new Dn(Mh);const i=this.hn(t,e);if(null==i)return r;const a=h0(t);if(null!=a){const l=e.data.field(a.fieldPath);if(l_(l))for(const f of l.arrayValue.values||[])r=r.add(new Wp(t.indexId,e.key,this.un(f),i))}else r=r.add(new Wp(t.indexId,e.key,Ub,i));return r}yn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,C,S){const N=f.getIterator(),B=m.getIterator();let G=vh(N),le=vh(B);for(;G||le;){let _e=!1,Ke=!1;if(G&&le){const dt=v(G,le);dt<0?Ke=!0:dt>0&&(_e=!0)}else null!=G?Ke=!0:_e=!0;_e?(C(le),le=vh(B)):Ke?(S(G),G=vh(N)):(G=vh(N),le=vh(B))}}(i,a,Mh,f=>{l.push(this.pn(e,t,r,f))},f=>{l.push(this.In(e,t,r,f))}),de.waitFor(l)}wn(e){let t=1;return iw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Mh(l,f)).filter((l,f,m)=>!f||0!==Mh(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=Mh(l,e),m=Mh(l,t);if(0===f)i[0]=e.Ge();else if(f>0&&m<0)i.push(l),i.push(l.Ge());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Tn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Ub,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Ub,[]]))}return a}Tn(e,t){return Mh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nk)}getMinOffset(e,t){return de.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||it())).next(nk)}}function tk(n){return o(n,"collectionParents")}function rw(n){return o(n,"indexEntries")}function Vb(n){return o(n,"indexConfiguration")}function iw(n){return o(n,"indexState")}function nk(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;g0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new gs(e.readTime,e.documentKey,t)}const rk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new to(e,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ik(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.X({range:l},(C,S,N)=>(f++,N.delete()));a.push(m.next(()=>{mt(1===f)}));const v=[];for(const C of t.mutations){const S=ew(e,C.key.path,t.batchId);a.push(i.delete(S)),v.push(C.key)}return de.waitFor(a).next(()=>v)}function Bb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class jb{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){mt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new jb(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nh(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=I_(e),l=Nh(e);return l.add({}).next(f=>{mt("number"==typeof f);const m=new u(f,t,r,i),v=function(N,B,G){const le=G.baseMutations.map(Ke=>kc(N.oe,Ke)),_e=G.mutations.map(Ke=>kc(N.oe,Ke));return{userId:B,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:le,mutations:_e}}(this.Tt,this.userId,m),C=[];let S=new Dn((N,B)=>Gt(N.canonicalString(),B.canonicalString()));for(const N of i){const B=ew(this.userId,N.key.path,f);S=S.add(N.key.path.popLast()),C.push(l.put(v)),C.push(a.put(B,tw))}return S.forEach(N=>{C.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.En[f]=m.keys()}),de.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return Nh(e).get(t).next(r=>r?(mt(r.userId===this.userId),K(this.Tt,r)):null)}An(e,t){return this.En[t]?de.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Nh(e).X({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(mt(f.batchId>=r),a=K(this.Tt,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nh(e).W("userMutationsIndex",t).next(r=>r.map(i=>K(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=J0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return I_(e).X({range:i},(l,f,m)=>{const[v,C,S]=l,N=Ao(C);if(v===this.userId&&t.path.isEqual(N))return Nh(e).get(S).next(B=>{if(!B)throw it();mt(B.userId===this.userId),a.push(K(this.Tt,B))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Gt);const i=[];return t.forEach(a=>{const l=J0(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=I_(e).X({range:f},(v,C,S)=>{const[N,B,G]=v,le=Ao(B);N===this.userId&&a.path.isEqual(le)?r=r.add(G):S.done()});i.push(m)}),de.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=J0(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new Dn(Gt);return I_(e).X({range:l},(m,v,C)=>{const[S,N,B]=m,G=Ao(N);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(B)):C.done()}).next(()=>this.Rn(e,f))}Rn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Nh(e).get(a).next(l=>{if(null===l)throw it();mt(l.userId===this.userId),r.push(K(this.Tt,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ik(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return I_(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=Ao(a[1]);i.push(m)}else f.done()}).next(()=>{mt(0===i.length)})})}containsKey(e,t){return sk(e,this.userId,t)}vn(e){return ok(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sk(n,e,t){const r=J0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return I_(n).X({range:a,Z:!0},(f,m,v)=>{const[C,S,N]=f;C===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Nh(n){return o(n,"mutations")}function I_(n){return o(n,"documentMutations")}function ok(n){return o(n,"mutationQueues")}class Zp{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new Zp(0)}static Sn(){return new Zp(-1)}}class xV{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Zp(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>vt.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>C_(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return C_(e).X((l,f)=>{const m=ie(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return C_(e).X((r,i)=>{const a=ie(i);t(a)})}Dn(e){return ak(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}Cn(e,t){return ak(e).put("targetGlobalKey",t)}xn(e,t){return C_(e).put(Ce(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return C_(e).X({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=ie(f);Eh(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ph(e);return t.forEach(l=>{const f=Li(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ph(e);return de.forEach(t,a=>{const l=Li(a.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ph(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ph(e);let a=Zt();return i.X({range:r,Z:!0},(l,f,m)=>{const v=Ao(l[1]),C=new qe(v);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[ib(r)],!1,!0);let a=0;return Ph(e).X({index:"documentTargetsIndex",Z:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}ie(e,t){return C_(e).get(t).next(r=>r?ie(r):null)}}function C_(n){return o(n,"targets")}function ak(n){return o(n,"targetGlobal")}function Ph(n){return o(n,"targetDocuments")}function uk([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class RV{constructor(e){this.kn=e,this.buffer=new Dn(uk),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ci(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ou(r)}yield t.Bn(3e5)}))}}class NV{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Oi.at);const r=new RV(t);return this.Ln.forEachTarget(e,i=>r.Fn(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.Fn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(rk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rk):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,a,l,f,m,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),ol()<=Os.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-C}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class PV{constructor(e,t){this.db=e,this.garbageCollector=new NV(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return Hb(e,r)}removeReference(e,t,r){return Hb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hb(e,t)}jn(e,t){return function(r,i){let a=!1;return ok(r).tt(l=>sk(r,l,i).next(f=>(f&&(a=!0),de.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(l,f)=>{if(f<=t){const m=this.jn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),Ph(e).delete([0,Li(l.path)])))});i.push(m)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hb(e,t)}Qn(e,t){const r=Ph(e);let i,a=Oi.at;return r.X({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==Oi.at&&t(new qe(Ao(i)),a),a=v,i=m):a=Oi.at}).next(()=>{a!==Oi.at&&t(new qe(Ao(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hb(n,e){return Ph(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class lk{constructor(){this.changes=new gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kV{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Kp(e).put(r)}removeEntry(e,t,r){return Kp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],A(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return Kp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sw(t))},(i,a)=>{r=this.Wn(t,a)}).next(()=>r)}Hn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return Kp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sw(t))},(i,a)=>{r={document:this.Wn(t,a),size:Bb(a)}}).next(()=>r)}getEntries(e,t){let r=ms();return this.Jn(e,t,(i,a)=>{const l=this.Wn(i,a);r=r.insert(i,l)}).next(()=>r)}Yn(e,t){let r=ms(),i=new or(qe.comparator);return this.Jn(e,t,(a,l)=>{const f=this.Wn(a,l);r=r.insert(a,f),i=i.insert(a,Bb(l))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Dn(fk);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(sw(i.first()),sw(i.last())),l=i.getIterator();let f=l.getNext();return Kp(e).X({index:"documentKeyIndex",range:a},(m,v,C)=>{const S=qe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&fk(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?C.j(sw(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),A(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kp(e).W(IDBKeyRange.bound(l,f,!0)).next(m=>{let v=ms();for(const C of m){const S=this.Wn(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);S.isFoundDocument()&&(Ch(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=ms();const l=hk(t,r),f=hk(t,gs.max());return Kp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,C)=>{const S=this.Wn(qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new OV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dk(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}zn(e,t){return dk(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function E(n,e){let t;if(e.document)t=ml(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=j(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=qe.fromSegments(e.unknownDocument.path),i=j(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qn(r[0],r[1]);return vt.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Pn.newInvalidDocument(e)}}function ck(n){return new kV(n)}class OV extends lk{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new gl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Dn((a,l)=>Gt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.ts.get(a);if(t.push(this.Xn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=b(this.Xn.Tt,l);i=i.add(a.path.popLast());const v=Bb(m);r+=v-f.size,t.push(this.Xn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=b(this.Xn.Tt,l.convertToNoDocument(vt.min()));t.push(this.Xn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Xn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((a,l)=>{this.ts.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function dk(n){return o(n,"remoteDocumentGlobal")}function Kp(n){return o(n,"remoteDocumentsV14")}function sw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hk(n,e){const t=e.documentKey.path.toArray();return[n,A(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fk(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class FV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Up(r.mutation,i,es.empty(),Qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const i=So();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Vp();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=So();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=ms();const l=Dh(),f=Dh();return t.forEach((m,v)=>{const C=r.get(v.key);i.has(v.key)&&(void 0===C||C.mutation instanceof fu)?a=a.insert(v.key,v):void 0!==C?(l.set(v.key,C.mutation.getFieldMask()),Up(C.mutation,v,C.mutation.getFieldMask(),Qn.now())):l.set(v.key,es.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,C)=>l.set(v,C)),t.forEach((v,C)=>{var S;return f.set(v,new FV(C,null!==(S=l.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Dh();let i=new or((l,f)=>l-f),a=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let C=r.get(m)||es.empty();C=f.applyToLocalView(v,C),r.set(m,C);const S=(i.get(f.batchId)||Zt()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,C=m.value,S=KA();C.forEach(N=>{if(!a.has(N)){const B=m_(t.get(N),r.get(N));null!==B&&S.set(N,B),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):f_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(So());let f=-1,m=a;return l.next(v=>de.forEach(v,(C,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(C)?de.resolve():this.remoteDocumentCache.getEntry(e,C).next(N=>{m=m.insert(C,N)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Zt())).next(C=>({batchId:f,changes:Cb(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=Vp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Vp();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,f=>{const m=(v=t,C=f.child(i),new pl(C,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((C,S)=>{a=a.insert(C,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,Pn.newInvalidDocument(v)))});let l=Vp();return a.forEach((f,m)=>{const v=i.get(f);void 0!==v&&Up(v.mutation,m,es.empty(),Qn.now()),Ch(t,m)&&(l=l.insert(f,m))}),l})}}class LV{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return de.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:$r(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:je(r.bundledQuery),readTime:$r(r.readTime)}),de.resolve();var r}}class UV{constructor(){this.overlays=new or(qe.comparator),this.ss=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=So();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ce(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=So(),a=t.length+1,l=new qe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new or((v,C)=>v-C);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=a.get(v.largestBatchId);null===C&&(C=So(),a=a.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const f=So(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,C)=>f.set(v,C)),!(f.size()>=i)););return de.resolve(f)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new h(t,r));let a=this.ss.get(t);void 0===a&&(a=Zt(),this.ss.set(t,a)),this.ss.set(t,a.add(r.key))}}class _x{constructor(){this.rs=new Dn(Ui.os),this.us=new Dn(Ui.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Ui(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new qe(new dn([])),r=new Ui(t,e),i=new Ui(t,e+1),a=[];return this.us.forEachInRange([r,i],l=>{this.ls(l),a.push(l.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new qe(new dn([])),r=new Ui(t,e),i=new Ui(t,e+1);let a=Zt();return this.us.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ui(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return qe.comparator(e.key,t.key)||Gt(e.gs,t.gs)}static cs(e,t){return Gt(e.gs,t.gs)||qe.comparator(e.key,t.key)}}class VV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Dn(Ui.os)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ys;this.ys++;const l=new u(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.ps=this.ps.add(new Ui(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],l=>{const f=this.Is(l.gs);a.push(f)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Gt);return t.forEach(i=>{const a=new Ui(i,0),l=new Ui(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,l],f=>{r=r.add(f.gs)})}),de.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const l=new Ui(new qe(a),0);let f=new Dn(Gt);return this.ps.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.gs)),!0)},l),de.resolve(this.Es(f))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){mt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return de.forEach(t.mutations,i=>{const a=new Ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,t){const r=new Ui(t,0),i=this.ps.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class BV{constructor(e){this.Rs=e,this.docs=new or(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=ms();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Pn.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=ms();const l=t.path,f=new qe(l.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:C}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||g0(p0(C),r)<=0||(i.has(C.key)||Ch(t,C))&&(a=a.insert(C.key,C.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,t,r,i){it()}bs(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jV(this)}getSize(e){return de.resolve(this.size)}}class jV extends lk{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class HV{constructor(e){this.persistence=e,this.vs=new gl(t=>wh(t),Eh),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new _x,this.targetCount=0,this.Ss=Zp.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ps&&(this.Ps=t),de.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Zp(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.xn(t),de.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.vs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.vs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Vs.containsKey(t))}}class gk{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Oi(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new HV(this),this.indexManager=new SV,this.remoteDocumentCache=new BV(r=>this.referenceDelegate.ks(r)),this.Tt=new y(t),this.Os=new LV(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new VV(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new $V(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Fs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}$s(e,t){return de.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class $V extends ob{constructor(e){super(),this.currentSequenceNumber=e}}class $b{constructor(e){this.persistence=e,this.Bs=new _x,this.Ls=null}static qs(e){return new $b(e)}get Us(){if(this.Ls)return this.Ls;throw it()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),de.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Us,r=>{const i=qe.fromPath(r);return this.Ks(e,i).next(a=>{a||t.removeEntry(i,vt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return de.or([()=>de.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class GV{constructor(e){this.Tt=e}$(e,t,r,i){const a=new n_("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w_,{unique:!0}),f.createObjectStore("documentMutations"),mk(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),mk(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").W().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w_,{unique:!0});const C=m.store("mutations"),S=v.map(N=>C.put(N));return de.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Gs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(l=l.next(()=>this.js(a))),r<8&&i>=8&&(l=l.next(()=>this.zs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ws(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:qP});m.createIndex("collectionPathOverlayIndex",ux,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",WP,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:rx});m.createIndex("documentKeyIndex",ix),m.createIndex("collectionGroupIndex",BP)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:HP}).createIndex("sequenceNumberIndex",$P,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:GP}).createIndex("documentKeyIndex",zP,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Bb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>de.forEach(f,m=>{mt(m.userId===a.userId);const v=K(this.Tt,m);return ik(e,a.userId,v).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const m=new dn(l),v=[0,Li(m)];a.push(t.get(v).next(C=>C?de.resolve():t.put({targetId:0,path:Li(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:ax});const r=t.store("collectionParents"),i=new mx,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Li(m)})}};return t.store("remoteDocuments").X({Z:!0},(l,f)=>{const m=new dn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,f,m],v)=>{const C=Ao(f);return a(C.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const a=ie(i),l=Ce(this.Tt,a);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new qe(dn.fromString(v.document.name).popFirst(5)):v.noDocument?qe.fromSegments(v.noDocument.path):v.unknownDocument?qe.fromSegments(v.unknownDocument.path):it()).path.toArray();var v;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(C))}).next(()=>de.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=ck(this.Tt),a=new gk($b.qs,this.Tt.oe);return r.W().next(l=>{const f=new Map;return l.forEach(m=>{var v;let C=null!==(v=f.get(m.userId))&&void 0!==v?v:Zt();K(this.Tt,m).keys().forEach(S=>C=C.add(S)),f.set(m.userId,C)}),de.forEach(f,(m,v)=>{const C=new Vr(v),S=Xn.ue(this.Tt,C),N=a.getIndexManager(C),B=jb.ue(C,this.Tt,N,a.referenceDelegate);return new pk(i,B,S,N).recalculateAndSaveOverlaysForDocumentKeys(new s(t,Oi.at),m).next()})})}}function mk(n){n.createObjectStore("targetDocuments",{keyPath:sx}).createIndex("documentTargetsIndex",ox,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jP,{unique:!0}),n.createObjectStore("targetGlobal")}const yx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vx{constructor(e,t,r,i,a,l,f,m,v,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=a,this.window=l,this.document=f,this.Zs=v,this.Xs=C,this.ti=S,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=N=>Promise.resolve(),!vx.C())throw new Ne(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PV(this,i),this.oi=t+"main",this.Tt=new y(m),this.ui=new Ji(this.oi,this.ti,new GV(this.Tt)),this.Ns=new xV(this.referenceDelegate,this.Tt),this.remoteDocumentCache=ck(this.Tt),this.Os=new Fe,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===C&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(pe.FAILED_PRECONDITION,yx);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Oi(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Ci(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return ow(e).get("owner").next(t=>de.resolve(this.yi(t)))}pi(e){return Gb(e).delete(this.clientId)}Ii(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=o(r,"clientMetadata");return i.W().next(a=>{const l=e.Ei(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return de.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?de.resolve(!0):ow(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Ne(pe.FAILED_PRECONDITION,yx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gb(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new s(t,Oi.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Gb(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return jb.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AV(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Xn.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ti)?KP:14===l?dx:13===l?cx:12===l?ZP:11===l?lx:void it();var l;let f;return this.ui.runTransaction(e,i,a,m=>(f=new s(m,this.Cs?this.Cs.next():Oi.at),"readwrite-primary"===t?this._i(f).next(v=>!!v||this.wi(f)).next(v=>{if(!v)throw Br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ne(pe.FAILED_PRECONDITION,IA);return r(f)}).next(v=>this.gi(f).next(()=>v)):this.Di(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Di(e){return ow(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(pe.FAILED_PRECONDITION,yx)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ow(e).put("owner",t)}static C(){return Ji.C()}mi(e){const t=ow(e);return t.get("owner").next(r=>this.yi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Br(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ow(n){return o(n,"owner")}function Gb(n){return o(n,"clientMetadata")}function wx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ex{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=Zt(),i=Zt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ex(e,t.fromCache,r,i)}}class _k{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(a=>a||this.Fi(e,t,i,r)).next(a=>a||this.$i(e,t))}Mi(e,t){if(jA(t))return de.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=P0(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Zt(...a);return this.Oi.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Bi(t,f);return this.Li(t,v,l,m.readTime)?this.Mi(e,P0(t,null,"F")):this.qi(e,v,t,m)}))})))}Fi(e,t,r,i){return jA(t)||i.isEqual(vt.min())?this.$i(e,t):this.Oi.getDocuments(e,r).next(a=>{const l=this.Bi(t,a);return this.Li(t,l,r,i)?this.$i(e,t):(ol()<=Os.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),O0(t)),this.qi(e,l,t,f0(i,-1)))})}Bi(e,t){let r=new Dn($A(e));return t.forEach((i,a)=>{Ch(e,a)&&(r=r.add(a))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}$i(e,t){return ol()<=Os.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",O0(t)),this.Oi.getDocumentsMatchingQuery(e,t,gs.min())}qi(e,t,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class zV{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new or(Gt),this.Gi=new gl(a=>wh(a),Eh),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pk(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function yk(n,e,t,r){return new zV(n,e,t,r)}function vk(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,ve.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=Zt();for(const v of i){l.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}for(const v of a){f.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(v=>({Wi:v,removedBatchIds:l,addedBatchIds:f}))})})}),Ix.apply(this,arguments)}function qV(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const C=m.batch,S=C.keys();let N=de.resolve();return S.forEach(B=>{N=N.next(()=>v.getEntry(f,B)).next(G=>{const le=m.docVersions.get(B);mt(null!==le),G.version.compareTo(le)<0&&(C.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(f,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Zt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function wk(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function WV(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const f=[];e.targetChanges.forEach((C,S)=>{const N=i.get(S);if(!N)return;f.push(t.Ns.removeMatchingKeys(a,C.removedDocuments,S).next(()=>t.Ns.addMatchingKeys(a,C.addedDocuments,S)));let B=N.withSequenceNumber(a.currentSequenceNumber);var G,le,_e;e.targetMismatches.has(S)?B=B.withResumeToken(Qr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,r)),i=i.insert(S,B),le=B,_e=C,(0===(G=N).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&f.push(t.Ns.updateTargetData(a,B))});let m=ms(),v=Zt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),f.push(Ek(a,l,e.documentUpdates).next(C=>{m=C.Hi,v=C.Ji})),!r.isEqual(vt.min())){const C=t.Ns.getLastRemoteSnapshotVersion(a).next(S=>t.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(C)}return de.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ki=i,a))}function Ek(n,e,t){let r=Zt(),i=Zt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=ms();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(vt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):Ve("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Hi:l,Ji:i}})}function ZV(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function b_(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Ns.allocateTargetId(r).next(l=>(i=new p(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function D_(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,ve.Z)(function*(n,e,t){const r=Ze(n),i=r.Ki.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ci(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),Cx.apply(this,arguments)}function zb(n,e,t){const r=Ze(n);let i=vt.min(),a=Zt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const C=Ze(f),S=C.Gi.get(v);return void 0!==S?de.resolve(C.Ki.get(S)):C.Ns.getTargetData(m,v)}(r,l,Fi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?i:vt.min(),t?a:Zt())).next(f=>(bk(r,HA(e),f),{documents:f,Yi:a})))}function Ik(n,e){const t=Ze(n),r=Ze(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(l=>l?l.target:null))}function Ck(n,e){const t=Ze(n),r=t.Qi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,f0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bk(t,e,i),i))}function bk(n,e,t){let r=n.Qi.get(e)||vt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Qi.set(e,r)}function bx(){return bx=(0,ve.Z)(function*(n,e,t,r){const i=Ze(n);let a=Zt(),l=ms();for(const v of t){const C=e.Zi(v.metadata.name);v.document&&(a=a.add(C));const S=e.Xi(v);S.setReadTime(e.tr(v.metadata.readTime)),l=l.insert(C,S)}const f=i.ji.newChangeBuffer({trackRemovals:!0}),m=yield b_(i,(v=r,Fi(Op(dn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>Ek(v,f,l).next(C=>(f.apply(v),C)).next(C=>i.Ns.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Ns.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,C.Hi,C.Ji)).next(()=>C.Hi)))}),bx.apply(this,arguments)}function YV(n,e){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,ve.Z)(function*(n,e,t=Zt()){const r=yield b_(n,Fi(je(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=$r(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Os.saveNamedQuery(a,e);const f=r.withResumeToken(Qr.EMPTY_BYTE_STRING,l);return i.Ki=i.Ki.insert(f.targetId,f),i.Ns.updateTargetData(a,f).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,t,r.targetId)).next(()=>i.Os.saveNamedQuery(a,e))})}),Dx.apply(this,arguments)}function Dk(n,e){return`firestore_clients_${n}_${e}`}function Tk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Tx(n,e){return`firestore_targets_${n}_${e}`}class qb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new qb(e,t,i.state,a):(Br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new aw(e,r.state,i):(Br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Bp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=o_(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Wb(e,a):(Br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Sx{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Sx(t.clientId,t.onlineState):(Br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ax{constructor(){this.activeTargetIds=Bp()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xx{constructor(e,t,r,i,a){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new or(Gt),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=Dk(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Ax),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const a=e.getItem(Dk(e.persistenceKey,i));if(a){const l=Wb.er(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Tx(this.persistenceKey,e));if(r){const i=aw.er(e,r);i&&(t=i.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tx(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.Or(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(a){let l=Oi.at;if(null!=a)try{const f=JSON.parse(a);mt("number"==typeof f),l=f}catch(f){Br("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Oi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Fr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.$r(a)))}}else t.hr.push(r)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,r){const i=new qb(this.currentUser,e,t,r),a=Tk(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const t=Tk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=Tx(this.persistenceKey,e),a=new aw(e,t,r);this.setItem(i,a.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return Wb.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return qb.er(new Vr(void 0!==r[2]?r[2]:null),i,t)}Or(e,t){const r=this.mr.exec(e),i=Number(r[1]);return aw.er(i,t)}Ir(e){return Sx.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.qr(l,f).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Bp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Sk{constructor(){this.Ur=new Ax,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ax,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QV{Gr(e){}shutdown(){}}class Ak{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const XV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JV{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class e2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,a){const l=this.fo(e,t);Ve("RestConnection","Sending: ",l,r);const f={};return this._o(f,i,a),this.wo(e,l,f,r).then(m=>(Ve("RestConnection","Received: ",m),m),m=>{throw al("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}mo(e,t,r,i,a,l){return this.lo(e,t,r,i,a)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,t){return`${this.co}/v1/${t}:${XV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){return new Promise((a,l)=>{const f=new fA;f.setWithCredentials(!0),f.listenOnce(hA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case u0.NO_ERROR:const v=f.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(v)),a(v);break;case u0.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Ne(pe.DEADLINE_EXCEEDED,"Request time out"));break;case u0.HTTP_ERROR:const C=f.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const B=function(G){const le=G.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(le)>=0?le:pe.UNKNOWN}(N.status);l(new Ne(B,N.message))}else l(new Ne(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Ne(pe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}yo(e,t,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XC(),l=dA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new JC({})),this._o(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=i.join("");Ve("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let C=!1,S=!1;const N=new JV({Yr:G=>{S?Ve("Connection","Not sending because WebChannel is closed:",G):(C||(Ve("Connection","Opening WebChannel transport."),v.open(),C=!0),Ve("Connection","WebChannel sending:",G),v.send(G))},Zr:()=>v.close()}),B=(G,le,_e)=>{G.listen(le,Ke=>{try{_e(Ke)}catch(dt){setTimeout(()=>{throw dt},0)}})};return B(v,hh.EventType.OPEN,()=>{S||Ve("Connection","WebChannel transport opened.")}),B(v,hh.EventType.CLOSE,()=>{S||(S=!0,Ve("Connection","WebChannel transport closed"),N.oo())}),B(v,hh.EventType.ERROR,G=>{S||(S=!0,al("Connection","WebChannel transport errored:",G),N.oo(new Ne(pe.UNAVAILABLE,"The operation could not be completed")))}),B(v,hh.EventType.MESSAGE,G=>{var le;if(!S){const _e=G.data[0];mt(!!_e);const dt=_e.error||(null===(le=_e[0])||void 0===le?void 0:le.error);if(dt){Ve("Connection","WebChannel received error:",dt);const nt=dt.status;let ut=function(Vt){const Nr=An[Vt];if(void 0!==Nr)return ma(Nr)}(nt),Mt=dt.message;void 0===ut&&(ut=pe.INTERNAL,Mt="Unknown error status: "+nt+" with message "+dt.message),S=!0,N.oo(new Ne(ut,Mt)),v.close()}else Ve("Connection","WebChannel received:",_e),N.uo(_e)}}),B(l,l0.STAT_EVENT,G=>{G.stat===e_.PROXY?Ve("Connection","Detected buffering proxy"):G.stat===e_.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.ro()},0),N}}function xk(){return typeof window<"u"?window:null}function Zb(){return typeof document<"u"?document:null}function uw(n){return new Ab(n,!0)}class Rx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class Rk{constructor(e,t,r,i,a,l,f,m){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Rx(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,ve.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),r.ko.bo()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Ne(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){var e=this;this.state=5,this.ko.vo((0,ve.Z)(function*(){e.state=0,e.start()}))}zo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t2 extends Rk{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.Tt=a}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function K0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:it(),i=e.targetChange.targetIds||[],a=function(m,v){return m.yt?(mt(void 0===v||"string"==typeof v),Qr.fromBase64String(v||"")):(mt(void 0===v||v instanceof Uint8Array),Qr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?pe.UNKNOWN:ma(m.code);return new Ne(v,m.message||"")}(l);t=new Hp(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=pu(n,r.document.name),a=$r(r.document.updateTime),l=r.document.createTime?$r(r.document.createTime):vt.min(),f=new Xr({mapValue:{fields:r.document.fields}}),m=Pn.newFoundDocument(i,a,l,f);t=new jp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=pu(n,r.document),a=r.readTime?$r(r.readTime):vt.min(),l=Pn.newNoDocument(i,a);t=new jp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=pu(n,r.document);t=new jp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,a=new G0(r.count||0);t=new q0(r.targetId,a)}}var m;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return vt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?vt.min():a.readTime?$r(a.readTime):vt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=zp(this.Tt),t.addTarget=function(i,a){let l;const f=a.target;return l=R0(f)?{documents:v_(i,f)}:{query:xh(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=xb(i,a.resumeToken):a.snapshotVersion.compareTo(vt.min())>0&&(l.readTime=Ah(i,a.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function UP(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=zp(this.Tt),t.removeTarget=e,this.qo(t)}}class n2 extends Rk{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function Q0(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,i){let a=$r(r.updateTime?r.updateTime:i);return a.isEqual(vt.min())&&(a=$r(i)),new WA(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.eu(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=zp(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kc(this.Tt,r))};this.qo(t)}}class r2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(pe.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.mo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(pe.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class s2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Br(t),this.cu=!1):Ve("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class o2{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var m;Oc(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ve.Z)(function*(v){const C=Ze(v);C.mu.add(4),yield T_(C),C.pu.set("Unknown"),C.mu.delete(4),yield lw(C)}),function(v){return m.apply(this,arguments)})(l))}))}),this.pu=new s2(r,i)}}function lw(n){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,ve.Z)(function*(n){if(Oc(n))for(const e of n.gu)yield e(!0)}),Nx.apply(this,arguments)}function T_(n){return Px.apply(this,arguments)}function Px(){return Px=(0,ve.Z)(function*(n){for(const e of n.gu)yield e(!1)}),Px.apply(this,arguments)}function Kb(n,e){const t=Ze(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),Fx(t)?Ox(t):A_(t).Mo()&&kx(t,e))}function cw(n,e){const t=Ze(n),r=A_(t);t.wu.delete(e),r.Mo()&&Mk(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Oc(t)&&t.pu.set("Unknown"))}function kx(n,e){n.Iu.Ft(e.targetId),A_(n).Jo(e)}function Mk(n,e){n.Iu.Ft(e),A_(n).Yo(e)}function Ox(n){n.Iu=new Db({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),A_(n).start(),n.pu.au()}function Fx(n){return Oc(n)&&!A_(n).Oo()&&n.wu.size>0}function Oc(n){return 0===Ze(n).mu.size}function Nk(n){n.Iu=void 0}function a2(n){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,ve.Z)(function*(n){n.wu.forEach((e,t)=>{kx(n,e)})}),Lx.apply(this,arguments)}function u2(n,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ve.Z)(function*(n,e){Nk(n),Fx(n)?(n.pu.fu(e),Ox(n)):n.pu.set("Unknown")}),Ux.apply(this,arguments)}function l2(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,ve.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof Hp&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.wu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.wu.delete(f),i.Iu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yb(n,r)}else if(e instanceof jp?n.Iu.Qt(e):e instanceof q0?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(vt.min()))try{const r=yield wk(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Iu.ee(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.wu.get(m);v&&i.wu.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.wu.get(f);if(!m)return;i.wu.set(f,m.withResumeToken(Qr.EMPTY_BYTE_STRING,m.snapshotVersion)),Mk(i,f);const v=new p(m.target,f,1,m.sequenceNumber);kx(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield Yb(n,r)}var r}),Vx.apply(this,arguments)}function Yb(n,e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,ve.Z)(function*(n,e,t){if(!Ci(e))throw e;n.mu.add(1),yield T_(n),n.pu.set("Offline"),t||(t=()=>wk(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield lw(n)}))}),Bx.apply(this,arguments)}function Pk(n,e){return e().catch(t=>Yb(n,t,e))}function S_(n){return jx.apply(this,arguments)}function jx(){return jx=(0,ve.Z)(function*(n){const e=Ze(n),t=kh(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;c2(e);)try{const i=yield ZV(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,d2(e,i)}catch(i){yield Yb(e,i)}kk(e)&&Ok(e)}),jx.apply(this,arguments)}function c2(n){return Oc(n)&&n._u.length<10}function d2(n,e){n._u.push(e);const t=kh(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function kk(n){return Oc(n)&&!kh(n).Oo()&&n._u.length>0}function Ok(n){kh(n).start()}function h2(n){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,ve.Z)(function*(n){kh(n).su()}),Hx.apply(this,arguments)}function f2(n){return $x.apply(this,arguments)}function $x(){return $x=(0,ve.Z)(function*(n){const e=kh(n);for(const t of n._u)e.tu(t.mutations)}),$x.apply(this,arguments)}function p2(n,e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,ve.Z)(function*(n,e,t){const r=n._u.shift(),i=c.from(r,e,t);yield Pk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield S_(n)}),Gx.apply(this,arguments)}function g2(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,ve.Z)(function*(n,e){var t;e&&kh(n).Xo&&(yield(t=(0,ve.Z)(function*(r,i){if(__(a=i.code)&&a!==pe.ABORTED){const l=r._u.shift();kh(r).$o(),yield Pk(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield S_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),kk(n)&&Ok(n)}),zx.apply(this,arguments)}function Fk(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,ve.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Oc(t);t.mu.add(3),yield T_(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield lw(t)}),qx.apply(this,arguments)}function Wx(n,e){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,ve.Z)(function*(n,e){const t=Ze(n);e?(t.mu.delete(2),yield lw(t)):e||(t.mu.add(2),yield T_(t),t.pu.set("Unknown"))}),Zx.apply(this,arguments)}function A_(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ze(e);return i.ru(),new t2(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:a2.bind(null,n),no:u2.bind(null,n),Ho:l2.bind(null,n)}),n.gu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Tu.$o(),Fx(n)?Ox(n):n.pu.set("Unknown")):(yield n.Tu.stop(),Nk(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function kh(n){return n.Eu||(n.Eu=function(e,t,r){const i=Ze(e);return i.ru(),new n2(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:h2.bind(null,n),no:g2.bind(null,n),nu:f2.bind(null,n),eu:p2.bind(null,n)}),n.gu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Eu.$o(),yield S_(n)):(yield n.Eu.stop(),n._u.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class Kx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new Kx(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x_(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Ci(n))return new Ne(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class R_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Vp(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new R_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof R_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new R_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Lk{constructor(){this.Au=new or(qe.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):it():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class M_{constructor(e,t,r,i,a,l,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new M_(e,t,R_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class m2{constructor(){this.bu=void 0,this.listeners=[]}}class _2{constructor(){this.queries=new gl(e=>k0(e),Ac),this.onlineState="Unknown",this.vu=new Set}}function Yx(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ve.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new m2),i)try{a.bu=yield t.onListen(r)}catch(l){const f=x_(l,`Initialization of query '${O0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.bu&&e.Vu(a.bu)&&eR(t)}),Qx.apply(this,arguments)}function Xx(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,ve.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Jx.apply(this,arguments)}function y2(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Vu(i)&&(r=!0);l.bu=i}}r&&eR(t)}function v2(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function eR(n){n.vu.forEach(e=>{e.next()})}class tR{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new M_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=M_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class w2{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class Uk{constructor(e){this.Tt=e}Zi(e){return pu(this.Tt,e)}Xi(e){return e.metadata.exists?ml(this.Tt,e.document,!1):Pn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return $r(e)}}class E2{constructor(e,t,r){this.$u=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vk(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=dn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new Uk(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Zt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function KV(n,e,t,r){return bx.apply(this,arguments)}(e.localStore,new Uk(e.Tt),e.documents,e.$u.id),r=e.Lu(e.documents);for(const i of e.queries)yield YV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Vk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Bk{constructor(e){this.key=e}}class jk{constructor(e){this.key=e}}class Hk{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Zt(),this.mutatedKeys=Zt(),this.ju=$A(e),this.zu=new R_(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new Lk,i=t?t.zu:this.zu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const N=i.get(C),B=Ch(this.query,S)?S:null,G=!!N&&this.mutatedKeys.has(N.key),le=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let _e=!1;N&&B?N.data.isEqual(B.data)?G!==le&&(r.track({type:3,doc:B}),_e=!0):this.Yu(N,B)||(r.track({type:2,doc:B}),_e=!0,(m&&this.ju(B,m)>0||v&&this.ju(B,v)<0)&&(f=!0)):!N&&B?(r.track({type:0,doc:B}),_e=!0):N&&!B&&(r.track({type:1,doc:N}),_e=!0,(m||v)&&(f=!0)),_e&&(B?(l=l.add(B),a=le?a.add(C):a.delete(C)):(l=l.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{zu:l,Ju:r,Li:f,mutatedKeys:a}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((v,C)=>function(S,N){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return B(S)-B(N)}(v.type,C.type)||this.ju(v.doc,C.doc)),this.Zu(r);const l=t?this.Xu():[],f=0===this.Qu.size&&this.current?1:0,m=f!==this.Gu;return this.Gu=f,0!==a.length||m?{snapshot:new M_(this.query,e.zu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Lk,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Zt(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new jk(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new Bk(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=Zt();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return M_.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class I2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class C2{constructor(e){this.key=e,this.ic=!1}}class b2{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new gl(f=>k0(f),Ac),this.uc=new Map,this.cc=new Set,this.ac=new or(qe.comparator),this.hc=new Map,this.lc=new _x,this.fc={},this.dc=new Map,this._c=Zp.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function D2(n,e){return nR.apply(this,arguments)}function nR(){return nR=(0,ve.Z)(function*(n,e){const t=DR(n);let r,i;const a=t.oc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const l=yield b_(t.localStore,Fi(e));t.isPrimaryClient&&Kb(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield rR(t,e,r,"current"===f,l.resumeToken)}return i}),nR.apply(this,arguments)}function rR(n,e,t,r,i){return iR.apply(this,arguments)}function iR(){return iR=(0,ve.Z)(function*(n,e,t,r,i){n.mc=(S,N,B)=>{return(G=(0,ve.Z)(function*(le,_e,Ke,dt){let nt=_e.view.Hu(Ke);nt.Li&&(nt=yield zb(le.localStore,_e.query,!1).then(({documents:Vt})=>_e.view.Hu(Vt,nt)));const ut=dt&&dt.targetChanges.get(_e.targetId),Mt=_e.view.applyChanges(nt,le.isPrimaryClient,ut);return pR(le,_e.targetId,Mt.tc),Mt.snapshot}),function(le,_e,Ke,dt){return G.apply(this,arguments)})(n,S,N,B);var G};const a=yield zb(n.localStore,e,!0),l=new Hk(e,a.Yi),f=l.Hu(a.documents),m=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,m);pR(n,t,v.tc);const C=new I2(e,t,l);return n.oc.set(e,C),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),v.snapshot}),iR.apply(this,arguments)}function T2(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,ve.Z)(function*(n,e){const t=Ze(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(a=>!Ac(a,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield D_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cw(t.remoteStore,r.targetId),N_(t,r.targetId)}).catch(ou))):(N_(t,r.targetId),yield D_(t.localStore,r.targetId,!0))}),sR.apply(this,arguments)}function oR(){return oR=(0,ve.Z)(function*(n,e,t){const r=TR(n);try{const i=yield function(a,l){const f=Ze(a),m=Qn.now(),v=l.reduce((N,B)=>N.add(B.key),Zt());let C,S;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let B=ms(),G=Zt();return f.ji.getEntries(N,v).next(le=>{B=le,B.forEach((_e,Ke)=>{Ke.isValidDocument()||(G=G.add(_e))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,B)).next(le=>{C=le;const _e=[];for(const Ke of l){const dt=V0(Ke,C.get(Ke.key).overlayedDocument);null!=dt&&_e.push(new fu(Ke.key,dt,A0(dt.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(N,m,_e,l)}).next(le=>{S=le;const _e=le.applyToLocalDocumentSet(C,G);return f.documentOverlayCache.saveOverlays(N,le.batchId,_e)})}).then(()=>({batchId:S.batchId,changes:Cb(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.fc[a.currentUser.toKey()];m||(m=new or(Gt)),m=m.insert(l,f),a.fc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Fc(r,i.changes),yield S_(r.remoteStore)}catch(i){const a=x_(i,"Failed to persist write");t.reject(a)}}),oR.apply(this,arguments)}function $k(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,ve.Z)(function*(n,e){const t=Ze(n);try{const r=yield WV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.hc.get(a);l&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ic=!0:i.modifiedDocuments.size>0?mt(l.ic):i.removedDocuments.size>0&&(mt(l.ic),l.ic=!1))}),yield Fc(t,r,e)}catch(r){yield ou(r)}}),aR.apply(this,arguments)}function Gk(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((a,l)=>{const f=l.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Ze(a);f.onlineState=l;let m=!1;f.queries.forEach((v,C)=>{for(const S of C.listeners)S.Pu(l)&&(m=!0)}),m&&eR(f)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function A2(n,e,t){return uR.apply(this,arguments)}function uR(){return uR=(0,ve.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),a=i&&i.key;if(a){let l=new or(qe.comparator);l=l.insert(a,Pn.newNoDocument(a,vt.min()));const f=Zt().add(a),m=new Th(vt.min(),new Map,new Dn(Gt),l,f);yield $k(r,m),r.ac=r.ac.remove(a),r.hc.delete(e),gR(r)}else yield D_(r.localStore,e,!1).then(()=>N_(r,e,t)).catch(ou)}),uR.apply(this,arguments)}function x2(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,ve.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield qV(t.localStore,e);fR(t,r,null),hR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield ou(i)}}),lR.apply(this,arguments)}function R2(n,e,t){return cR.apply(this,arguments)}function cR(){return cR=(0,ve.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,l){const f=Ze(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(C=>(mt(null!==C),v=C.keys(),f.mutationQueue.removeMutationBatch(m,C))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);fR(r,e,t),hR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield ou(i)}}),cR.apply(this,arguments)}function dR(){return dR=(0,ve.Z)(function*(n,e){const t=Ze(n);Oc(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=x_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dR.apply(this,arguments)}function hR(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function fR(n,e,t){const r=Ze(n);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function N_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||zk(n,r)})}function zk(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(cw(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),gR(n))}function pR(n,e,t){for(const r of t)r instanceof Bk?(n.lc.addReference(r.key,e),N2(n,r)):r instanceof jk?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||zk(n,r.key)):it()}function N2(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.cc.add(r),gR(n))}function gR(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new qe(dn.fromString(e)),r=n._c.next();n.hc.set(r,new C2(t)),n.ac=n.ac.insert(t,r),Kb(n.remoteStore,new p(Fi(Op(t.path)),r,2,Oi.at))}}function Fc(n,e,t){return mR.apply(this,arguments)}function mR(){return mR=(0,ve.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],l=[];var f;r.oc.isEmpty()||(r.oc.forEach((f,m)=>{l.push(r.mc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const C=Ex.Ni(m.targetId,v);a.push(C)}}))}),yield Promise.all(l),r.rc.Ho(i),yield(f=(0,ve.Z)(function*(m,v){const C=Ze(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(v,N=>de.forEach(N.Ci,B=>C.persistence.referenceDelegate.addReference(S,N.targetId,B)).next(()=>de.forEach(N.xi,B=>C.persistence.referenceDelegate.removeReference(S,N.targetId,B)))))}catch(S){if(!Ci(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const B=C.Ki.get(N),le=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);C.Ki=C.Ki.insert(N,le)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),mR.apply(this,arguments)}function P2(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,ve.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield vk(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(l=>{l.forEach(f=>{f.reject(new Ne(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.Wi)}var i}),_R.apply(this,arguments)}function k2(n,e){const t=Ze(n),r=t.hc.get(e);if(r&&r.ic)return Zt().add(r.key);{let i=Zt();const a=t.uc.get(e);if(!a)return i;for(const l of a){const f=t.oc.get(l);i=i.unionWith(f.view.Wu)}return i}}function O2(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,ve.Z)(function*(n,e){const t=Ze(n),r=yield zb(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&pR(t,e.targetId,i.tc),i}),yR.apply(this,arguments)}function F2(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,ve.Z)(function*(n,e){const t=Ze(n);return Ck(t.localStore,e).then(r=>Fc(t,r))}),vR.apply(this,arguments)}function L2(n,e,t,r){return wR.apply(this,arguments)}function wR(){return wR=(0,ve.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(l,f){const m=Ze(l),v=Ze(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>v.An(C,f).next(S=>S?m.localDocuments.getDocuments(C,S):de.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield S_(i.remoteStore):"acknowledged"===t||"rejected"===t?(fR(i,e,r||null),hR(i,e),f=e,Ze(Ze(i.localStore).mutationQueue).bn(f)):it(),yield Fc(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),wR.apply(this,arguments)}function ER(){return ER=(0,ve.Z)(function*(n,e){const t=Ze(n);if(DR(t),TR(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield qk(t,r.toArray());t.wc=!0,yield Wx(t.remoteStore,!0);for(const a of i)Kb(t.remoteStore,a)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(N_(t,l),D_(t.localStore,l,!0))),cw(t.remoteStore,l)}),yield i,yield qk(t,r),function(a){const l=Ze(a);l.hc.forEach((f,m)=>{cw(l.remoteStore,m)}),l.lc._s(),l.hc=new Map,l.ac=new or(qe.comparator)}(t),t.wc=!1,yield Wx(t.remoteStore,!1)}}),ER.apply(this,arguments)}function qk(n,e,t){return IR.apply(this,arguments)}function IR(){return IR=(0,ve.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const l of e){let f;const m=r.uc.get(l);if(m&&0!==m.length){f=yield b_(r.localStore,Fi(m[0]));for(const v of m){const C=r.oc.get(v),S=yield O2(r,C);S.snapshot&&a.push(S.snapshot)}}else{const v=yield Ik(r.localStore,l);f=yield b_(r.localStore,v),yield rR(r,Wk(v),l,!1,f.resumeToken)}i.push(f)}return r.rc.Ho(a),i}),IR.apply(this,arguments)}function Wk(n){return BA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function V2(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Si()}function B2(n,e,t,r){return CR.apply(this,arguments)}function CR(){return CR=(0,ve.Z)(function*(n,e,t,r){const i=Ze(n);if(i.wc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield Ck(i.localStore,HA(a[0])),f=Th.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Qr.EMPTY_BYTE_STRING);yield Fc(i,l,f);break}case"rejected":yield D_(i.localStore,e,!0),N_(i,e,r);break;default:it()}}),CR.apply(this,arguments)}function j2(n,e,t){return bR.apply(this,arguments)}function bR(){return bR=(0,ve.Z)(function*(n,e,t){const r=DR(n);if(r.wc){for(const i of e){if(r.uc.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield Ik(r.localStore,i),l=yield b_(r.localStore,a);yield rR(r,Wk(a),l.targetId,!1,l.resumeToken),Kb(r.remoteStore,l)}for(const i of t)r.uc.has(i)&&(yield D_(r.localStore,i,!1).then(()=>{cw(r.remoteStore,i),N_(r,i)}).catch(ou))}}),bR.apply(this,arguments)}function DR(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$k.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A2.bind(null,e),e.rc.Ho=y2.bind(null,e.eventManager),e.rc.gc=v2.bind(null,e.eventManager),e}function TR(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R2.bind(null,e),e}class Zk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.Tt=uw(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return yk(this.persistence,new _k,e.initialUser,this.Tt)}Tc(e){return new gk($b.qs,this.Tt)}Ic(e){return new Sk}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Kk extends Zk{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield TR(r.bc.syncEngine),yield S_(r.bc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return yk(this.persistence,new _k,e.initialUser,this.Tt)}Ac(e,t){return new MV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new TA(t,this.persistence);return new DA(e.asyncQueue,r)}Tc(e){const t=wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new vx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xk(),Zb(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Sk}}class $2 extends Kk{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.bc.syncEngine;r.sharedClientState instanceof xx&&(r.sharedClientState.syncEngine={Br:L2.bind(null,i),Lr:B2.bind(null,i),qr:j2.bind(null,i),Si:V2.bind(null,i),$r:F2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var a=(0,ve.Z)(function*(l){yield function U2(n,e){return ER.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}Ic(e){const t=xk();if(!xx.C(t))throw new Ne(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class SR{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Gk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=P2.bind(null,r.syncEngine),yield Wx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _2}createDatastore(e){const t=uw(e.databaseInfo.databaseId),r=new e2(e.databaseInfo);return new r2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>Gk(this.syncEngine,f,0),l=Ak.C()?new Ak:new QV,new o2(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const C=new b2(r,i,a,l,f,m);return v&&(C.wc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ze(t);Ve("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield T_(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Yk(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Qb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class G2{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new jr,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const a=yield e.Nc(i);return new w2(JSON.parse(a),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,ve.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class z2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,l){const f=Ze(a),m=zp(f.Tt)+"/documents",v={documents:l.map(B=>y_(f.Tt,B))},C=yield f.mo("BatchGetDocuments",m,v,l.length),S=new Map;C.forEach(B=>{const G=function Nb(n,e){return"found"in e?function(t,r){mt(!!r.found);const i=pu(t,r.found.name),a=$r(r.found.updateTime),l=r.found.createTime?$r(r.found.createTime):vt.min(),f=new Xr({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const i=pu(t,r.missing),a=$r(r.readTime);return Pn.newNoDocument(i,a)}(n,e):it()}(f.Tt,B);S.set(G.key.toString(),G)});const N=[];return l.forEach(B=>{const G=S.get(B.toString());mt(!!G),N.push(G)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=qe.fromPath(i);e.mutations.push(new $0(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const l=Ze(i),f=zp(l.Tt)+"/documents",m={writes:a.map(v=>kc(l.Tt,v))};yield l.lo("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?ar.exists(!1):ar.updateTime(t):ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ne(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ar.updateTime(t)}return ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class q2{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new Rx(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,ve.Z)(function*(){const t=new z2(e.datastore),r=e.$c(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Bc(a)}))}).catch(i=>{e.Bc(i)})}))}$c(e){try{const t=this.updateFunction(e);return!bc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!__(t)}return!1}}class W2{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vr.UNAUTHENTICATED,this.clientId=rb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=x_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Qk(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield vk(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),AR.apply(this,arguments)}function Xk(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RR(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Fk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Fk(e.remoteStore,a)),n.onlineComponents=e}),xR.apply(this,arguments)}function RR(n){return MR.apply(this,arguments)}function MR(){return MR=(0,ve.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield Qk(n,new Zk)),n.offlineComponents}),MR.apply(this,arguments)}function Xb(n){return NR.apply(this,arguments)}function NR(){return NR=(0,ve.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Xk(n,new SR)),n.onlineComponents}),NR.apply(this,arguments)}function Jk(n){return RR(n).then(e=>e.persistence)}function Jb(n){return RR(n).then(e=>e.localStore)}function PR(n){return Xb(n).then(e=>e.remoteStore)}function kR(n){return Xb(n).then(e=>e.syncEngine)}function P_(n){return OR.apply(this,arguments)}function OR(){return OR=(0,ve.Z)(function*(n){const e=yield Xb(n),t=e.eventManager;return t.onListen=D2.bind(null,e.syncEngine),t.onUnlisten=T2.bind(null,e.syncEngine),t}),OR.apply(this,arguments)}function tO(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,f,m){const v=new Qb({next:S=>{a.enqueueAndForget(()=>Xx(i,C));const N=S.docs.has(l);!N&&S.fromCache?m.reject(new Ne(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&f&&"server"===f.source?m.reject(new Ne(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new tR(Op(l.path),v,{includeMetadataChanges:!0,Ou:!0});return Yx(i,C)}(yield P_(n),n.asyncQueue,e,t,r)})),r.promise}function nO(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,f,m){const v=new Qb({next:S=>{a.enqueueAndForget(()=>Xx(i,C)),S.fromCache&&"server"===f.source?m.reject(new Ne(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new tR(l,v,{includeMetadataChanges:!0,Ou:!0});return Yx(i,C)}(yield P_(n),n.asyncQueue,e,t,r)})),r.promise}const rO=new Map;function FR(n,e,t){if(!t)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iO(n,e,t,r){if(!0===e&&!0===r)throw new Ne(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sO(n){if(!qe.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oO(n){if(qe.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eD(n);throw new Ne(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function aO(n,e){if(e<=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class uO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nb;switch(t.type){case"gapi":return new yA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rO.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),rO.delete(e),t.terminate())}(this),Promise.resolve()}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class yl extends ns{constructor(e,t,r){super(e,t,Op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new qe(e))}withConverter(e){return new yl(this.firestore,e,this._path)}}function cO(n,e,...t){if(n=(0,L.m9)(n),FR("collection","path",e),n instanceof dw){const r=dn.fromString(e,...t);return oO(r),new yl(n,null,r)}{if(!(n instanceof ur||n instanceof yl))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return oO(r),new yl(n.firestore,null,r)}}function tD(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=rb.R()),FR("doc","path",e),n instanceof dw){const r=dn.fromString(e,...t);return sO(r),new ur(n,null,new qe(r))}{if(!(n instanceof ur||n instanceof yl))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return sO(r),new ur(n.firestore,n instanceof yl?n.converter:null,new qe(r))}}function dO(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof ur||n instanceof yl)&&(e instanceof ur||e instanceof yl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LR(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&Ac(n._query,e._query)&&n.converter===e.converter}class nB{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Rx(this,"async_queue_retry"),this.Hc=()=>{const t=Zb();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Zb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Zb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new jr;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Ci(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Br("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=Kx.createAndSchedule(this,e,t,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&it()}verifyOperationInProgress(){}ta(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function UR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class rB{constructor(){this._progressObserver={},this._taskCompletionResolver=new jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class lr extends dw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nB,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||hO(this),this._firestoreClient.terminate()}}function Jr(n){return n._firestoreClient||hO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function hO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ab(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new W2(n._authCredentials,n._appCheckCredentials,n._queue,r)}function fO(n,e,t){const r=new jr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield Qk(n,t),yield Xk(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;al("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function pO(n){if(n._initialized||n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vl(Qr.fromBase64String(e))}catch(t){throw new Ne(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vl(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yp{constructor(e){this._methodName=e}}class nD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const pB=/^__.*__$/;class gB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}class gO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class rD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new rD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return oD(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(mO(this.ra)&&pB.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class mB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||uw(e)}wa(e,t,r,i=!1){return new rD({ra:e,methodName:t,_a:r,path:mr.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Qp(n){const e=n._freezeSettings(),t=uw(n._databaseId);return new mB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iD(n,e,t,r,i,a={}){const l=n.wa(a.merge||a.mergeFields?2:0,e,t,i);HR("Data must be an object, but it was:",l,r);const f=vO(r,l);let m,v;if(a.merge)m=new es(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const C=[];for(const S of a.mergeFields){const N=pw(e,S,t);if(!l.contains(N))throw new Ne(pe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);EO(C,N)||C.push(N)}m=new es(C),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new gB(new Xr(f),m,v)}class fw extends Yp{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function _O(n,e,t){return new rD({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class VR extends Yp{_toFieldTransform(e){return new Lp(e.path,new bh)}isEqual(e){return e instanceof VR}}class _B extends Yp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=_O(this,e,!0),r=this.ma.map(a=>Xp(a,t)),i=new xc(r);return new Lp(e.path,i)}isEqual(e){return this===e}}class yB extends Yp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=_O(this,e,!0),r=this.ma.map(a=>Xp(a,t)),i=new Rc(r);return new Lp(e.path,i)}isEqual(e){return this===e}}class vB extends Yp{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Mc(e.Tt,vb(e.Tt,this.ga));return new Lp(e.path,t)}isEqual(e){return this===e}}function BR(n,e,t,r){const i=n.wa(1,e,t);HR("Data must be an object, but it was:",i,r);const a=[],l=Xr.empty();ul(r,(m,v)=>{const C=sD(e,m,t);v=(0,L.m9)(v);const S=i.ha(C);if(v instanceof fw)a.push(C);else{const N=Xp(v,S);null!=N&&(a.push(C),l.set(C,N))}});const f=new es(a);return new gO(l,f,i.fieldTransforms)}function jR(n,e,t,r,i,a){const l=n.wa(1,e,t),f=[pw(e,r,t)],m=[i];if(a.length%2!=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)f.push(pw(e,a[N])),m.push(a[N+1]);const v=[],C=Xr.empty();for(let N=f.length-1;N>=0;--N)if(!EO(v,f[N])){const B=f[N];let G=m[N];G=(0,L.m9)(G);const le=l.ha(B);if(G instanceof fw)v.push(B);else{const _e=Xp(G,le);null!=_e&&(v.push(B),C.set(B,_e))}}const S=new es(v);return new gO(C,S,l.fieldTransforms)}function yO(n,e,t,r=!1){return Xp(t,n.wa(r?4:3,e))}function Xp(n,e){if(wO(n=(0,L.m9)(n)))return HR("Unsupported field value:",e,n),vO(n,e);if(n instanceof Yp)return function(t,r){if(!mO(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Xp(l,r.la(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vb(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qn.fromDate(t);return{timestampValue:Ah(r.Tt,i)}}if(t instanceof Qn){const i=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ah(r.Tt,i)}}if(t instanceof nD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vl)return{bytesValue:xb(r.Tt,t._byteString)};if(t instanceof ur){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${eD(t)}`)}(n,e)}function vO(n,e){const t={};return s_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ul(n,(r,i)=>{const a=Xp(i,e.ua(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function wO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof nD||n instanceof vl||n instanceof ur||n instanceof Yp)}function HR(n,e,t){if(!wO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eD(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function pw(n,e,t){if((e=(0,L.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return sD(n,e);throw oD("Field path arguments must be of type string or ",n,!1,void 0,t)}const wB=new RegExp("[~\\*/\\[\\]]");function sD(n,e,t){if(e.search(wB)>=0)throw oD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch{throw oD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ne(pe.INVALID_ARGUMENT,f+n+m)}function EO(n,e){return n.some(t=>t.isEqual(e))}class gw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new EB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class EB extends gw{data(){return super.data()}}function aD(n,e){return"string"==typeof e?sD(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}function IO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $R{}class mw extends $R{}function Oh(n,e,...t){let r=[];e instanceof $R&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof k_).length,l=i.filter(f=>f instanceof _w).length;if(a>1||a>0&&l>0)throw new Ne(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _w extends mw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _w(e,t,r)}_apply(e){const t=this._parse(e);return TO(e._query,t),new ns(e.firestore,e.converter,p_(e._query,t))}_parse(e){const t=Qp(e.firestore);return function(i,a,l,f,m,v,C){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){DO(C,v);const N=[];for(const B of C)N.push(bO(f,i,B));S={arrayValue:{values:N}}}else S=bO(f,i,C)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||DO(C,v),S=yO(l,"where",C,"in"===v||"not-in"===v);return en.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class k_ extends $R{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new k_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)TO(a,f),a=p_(a,f)}(e._query,t),new ns(e.firestore,e.converter,p_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GR extends mw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Sc(i,a);return function(f,m){if(null===Ih(f)){const v=N0(f);null!==v&&SO(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new pl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class uD extends mw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new uD(e,t,r)}_apply(e){return new ns(e.firestore,e.converter,P0(e._query,this._limit,this._limitType))}}class lD extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lD(e,t,r)}_apply(e){const t=CO(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(i=t,new pl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class cD extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cD(e,t,r)}_apply(e){const t=CO(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(i=t,new pl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function CO(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof gw)return function(i,a,l,f,m){if(!f)throw new Ne(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const C of ga(i))if(C.field.isKeyField())v.push(Dc(a,f.key));else{const S=f.data.field(C.field);if(a_(S))throw new Ne(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=C.field.canonicalString();throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new hl(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qp(n.firestore);return function(a,l,f,m,v,C){const S=a.explicitOrderBy;if(v.length>S.length)throw new Ne(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let B=0;B<v.length;B++){const G=v[B];if(S[B].field.isKeyField()){if("string"!=typeof G)throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof G}`);if(!f_(a)&&-1!==G.indexOf("/"))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${G}' contains a slash.`);const le=a.path.child(dn.fromString(G));if(!qe.isDocumentKey(le))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const _e=new qe(le);N.push(Dc(l,_e))}else{const le=yO(f,m,G);N.push(le)}}return new hl(N,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function bO(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f_(e)&&-1!==t.indexOf("/"))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!qe.isDocumentKey(r))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dc(n,new qe(r))}if(t instanceof ur)return Dc(n,t._key);throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eD(t)}.`)}function DO(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TO(n,e){if(e.isInequality()){const r=N0(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=Ih(n);null!==a&&SO(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function SO(n,e,t){if(!t.isEqual(e))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zR{convertValue(e,t="none"){switch(cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return ul(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new nD(sr(e.latitude),sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ub(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yh(e));default:return null}}convertTimestamp(e){const t=ll(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);mt(X0(r));const i=new uu(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(t)||Br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function dD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class RB extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class Jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uc extends gw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yw extends Uc{data(e={}){return super.data(e)}}class Fh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yw(this._firestore,this._userDataWriter,r.key,r,new Jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Jp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Jp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:NB(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function xO(n,e){return n instanceof Uc&&e instanceof Uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fh&&e instanceof Fh&&n._firestore===e._firestore&&LR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Lh extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function RO(n,e,t){n=hn(n,ur);const r=hn(n.firestore,lr),i=dD(n.converter,e,t);return O_(r,[iD(Qp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ar.none())])}function MO(n,e,t,...r){n=hn(n,ur);const i=hn(n.firestore,lr),a=Qp(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Lc?jR(a,"updateDoc",n._key,e,t,r):BR(a,"updateDoc",n._key,e),O_(i,[l.toMutation(n._key,ar.exists(!0))])}function NO(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||UR(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(UR(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,C;if(n instanceof ur)v=hn(n.firestore,lr),C=Op(n._key.path),m={next:S=>{e[l]&&e[l](qR(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=hn(n,ns);v=hn(S.firestore,lr),C=S._query;const N=new Lh(v);m={next:B=>{e[l]&&e[l](new Fh(v,N,S,B))},error:e[l+1],complete:e[l+2]},IO(n._query)}return function(S,N,B,G){const le=new Qb(G),_e=new tR(N,le,B);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Yx(yield P_(S),_e)})),()=>{le.Pc(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Xx(yield P_(S),_e)}))}}(Jr(v),C,f,m)}function O_(n,e){return function(t,r){const i=new jr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function S2(n,e,t){return oR.apply(this,arguments)}(yield kR(t),r,i)})),i.promise}(Jr(n),e)}function qR(n,e,t){const r=t.docs.get(e._key),i=new Lh(n);return new Uc(n,i,e._key,r,new Jp(t.hasPendingWrites,t.fromCache),e.converter)}const $B={maxAttempts:5};class PO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qp(e)}set(e,t,r){this._verifyNotCommitted();const i=Uh(e,this._firestore),a=dD(i.converter,t,r),l=iD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Uh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Lc?jR(this._dataReader,"WriteBatch.update",a._key,t,r,i):BR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uh(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(t._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ne(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class GB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qp(e)}get(e){const t=Uh(e,this._firestore),r=new RB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const a=i[0];if(a.isFoundDocument())return new gw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new gw(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Uh(e,this._firestore),a=dD(i.converter,t,r),l=iD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Uh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Lc?jR(this._dataReader,"Transaction.update",a._key,t,r,i):BR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uh(e,this._firestore),r=new Lh(this._firestore);return super.get(e).then(i=>new Uc(this._firestore,r,t._key,i._document,new Jp(!1,!1),t.converter))}}function WR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function OO(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function FO(){if(!function AA(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fh=Ki.SDK_VERSION,(0,Ki._registerComponent)(new hs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new lr(new mA(t.getProvider("auth-internal")),new RP(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(eb,"3.8.4",n),(0,Ki.registerVersion)(eb,"3.8.4","esm2017")}();class vw{constructor(e){this._delegate=e}static fromBase64String(e){return FO(),new vw(vl.fromBase64String(e))}static fromUint8Array(e){return OO(),new vw(vl.fromUint8Array(e))}toBase64(){return FO(),this._delegate.toBase64()}toUint8Array(){return OO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ZR(n){return function JB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ej{enableIndexedDbPersistence(e,t){return function sB(n,e){pO(n=hn(n,lr));const t=Jr(n),r=n._freezeSettings(),i=new SR;return fO(t,i,new Kk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function oB(n){pO(n=hn(n,lr));const e=Jr(n),t=n._freezeSettings(),r=new SR;return fO(e,r,new $2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function aB(n){if(n._initialized&&!n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Ji.C())return Promise.resolve();const i=r+"main";yield Ji.delete(i)}),function(r){return t.apply(this,arguments)})(wx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class LO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lO(n,e,t,r={}){var i;const a=(n=hn(n,dw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Vr.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ne(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vr(m)}n._authCredentials=new gA(new c0(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function lB(n){return function Z2(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield Jk(n),t=yield PR(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.mu.delete(0),lw(i)}(t)}))}(Jr(n=hn(n,lr)))}(this._delegate)}disableNetwork(){return function cB(n){return function K2(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield Jk(n),t=yield PR(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=Ze(i);a.mu.add(0),yield T_(a),a.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Jr(n=hn(n,lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function uB(n){return function(e){const t=new jr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function M2(n,e){return dR.apply(this,arguments)}(yield kR(e),t)})),t.promise}(Jr(n=hn(n,lr)))}(this._delegate)}onSnapshotsInSync(e){return function jB(n,e){return function X2(n,e){const t=new Qb(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield P_(n),i=t,Ze(r).vu.add(i),void i.next();var r,i})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield P_(n),i=t,void Ze(r).vu.delete(i);var r,i}))}}(Jr(n=hn(n,lr)),UR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new F_(this,cO(this._delegate,e))}catch(t){throw Ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new _a(this,tD(this._delegate,e))}catch(t){throw Ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Us(this,function tB(n,e){if(n=hn(n,dw),FR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new pl(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function zB(n,e,t){n=hn(n,lr);const r=Object.assign(Object.assign({},$B),t);return function(i){if(i.maxAttempts<1)throw new Ne(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new jr;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const m=yield function eO(n){return Xb(n).then(e=>e.datastore)}(i);new q2(i.asyncQueue,m,l,a,f).run()})),f.promise}(Jr(n),i=>e(new GB(n,i)),r)}(this._delegate,t=>e(new UO(this,t)))}batch(){return Jr(this._delegate),new VO(new PO(this._delegate,e=>O_(this._delegate,e)))}loadBundle(e){return function dB(n,e){const t=Jr(n=hn(n,lr)),r=new rB;return function J2(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return Yk(m,v);if(m instanceof ArrayBuffer)return Yk(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new G2(m,l);var m}(t,uw(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function H2(n,e,t){const r=Ze(n);var i;(i=(0,ve.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(N,B){const G=Ze(N),le=$r(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",_e=>G.Os.getBundleMetadata(_e,B.id)).then(_e=>!!_e&&_e.createTime.compareTo(le)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);f._updateProgress(Vk(m));const v=new E2(m,a.localStore,l.Tt);let C=yield l.yc();for(;C;){const N=yield v.Bu(C);N&&f._updateProgress(N),C=yield l.yc()}const S=yield v.complete();return yield Fc(a,S.Uu,void 0),yield function(N,B){const G=Ze(N);return G.persistence.runTransaction("Save bundle","readwrite",le=>G.Os.saveBundleMetadata(le,B))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.qu)}catch(m){return al("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var N}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield kR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function hB(n,e){return function eB(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Os.getNamedQuery(a,r))}(yield Jb(n),e)}))}(Jr(n=hn(n,lr)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Us(this,t):null)}}class hD extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vw(new vl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _a.forKey(t,this.firestore,null)}}class UO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hD(e)}get(e){const t=tg(e);return this._delegate.get(t).then(r=>new ww(this._firestore,new Uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=tg(e);return r?(WR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=tg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=tg(e);return this._delegate.delete(t),this}}class VO{constructor(e){this._delegate=e}set(e,t,r){const i=tg(e);return r?(WR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=tg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=tg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class eg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ew(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=eg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new eg(e,new hD(e),t),i.set(t,a)),a}}eg.INSTANCES=new WeakMap;class _a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _a(t,new ur(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new _a(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new F_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new F_(this.firestore,cO(this._delegate,e))}catch(t){throw Ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof ur&&dO(this._delegate,e)}set(e,t){t=WR("DocumentReference.set",t);try{return t?RO(this._delegate,e,t):RO(this._delegate,e)}catch(r){throw Ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?MO(this._delegate,e):MO(this._delegate,e,t,...r)}catch(i){throw Ls(i,"updateDoc()","DocumentReference.update()")}}delete(){return function VB(n){return O_(hn(n.firestore,lr),[new Pc(n._key,ar.none())])}(this._delegate)}onSnapshot(...e){const t=BO(e),r=jO(e,i=>new ww(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return NO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function kB(n){n=hn(n,ur);const e=hn(n.firestore,lr),t=Jr(e),r=new Lh(e);return function Y2(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const f=yield function(m,v){const C=Ze(m);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ne(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=x_(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Uc(e,r,n._key,i,new Jp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function OB(n){n=hn(n,ur);const e=hn(n.firestore,lr);return tO(Jr(e),n._key,{source:"server"}).then(t=>qR(e,n,t))}(this._delegate):function PB(n){n=hn(n,ur);const e=hn(n.firestore,lr);return tO(Jr(e),n._key).then(t=>qR(e,n,t))}(this._delegate),t.then(r=>new ww(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?eg.getInstance(this.firestore,e):null))}}function Ls(n,e,t){return n.message=n.message.replace(e,t),n}function BO(n){for(const e of n)if("object"==typeof e&&!ZR(e))return e;return{}}function jO(n,e){var t,r;let i;return i=ZR(n[0])?n[0]:ZR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ww{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xO(this._delegate,e._delegate)}}class Ew extends ww{data(e){const t=this._delegate.data(e);return function pA(n,e){n||it()}(void 0!==t),t}}class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hD(e)}where(e,t,r){try{return new Us(this.firestore,Oh(this._delegate,function IB(n,e,t){const r=e,i=aD("where",n);return _w._create(i,r,t)}(e,t,r)))}catch(i){throw Ls(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Us(this.firestore,Oh(this._delegate,function CB(n,e="asc"){const t=e,r=aD("orderBy",n);return GR._create(r,t)}(e,t)))}catch(r){throw Ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Us(this.firestore,Oh(this._delegate,function bB(n){return aO("limit",n),uD._create("limit",n,"F")}(e)))}catch(t){throw Ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Us(this.firestore,Oh(this._delegate,function DB(n){return aO("limitToLast",n),uD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Us(this.firestore,Oh(this._delegate,function TB(...n){return lD._create("startAt",n,!0)}(...e)))}catch(t){throw Ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Us(this.firestore,Oh(this._delegate,function SB(...n){return lD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Us(this.firestore,Oh(this._delegate,function AB(...n){return cD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Us(this.firestore,Oh(this._delegate,function xB(...n){return cD._create("endAt",n,!0)}(...e)))}catch(t){throw Ls(t,"endAt()","Query.endAt()")}}isEqual(e){return LR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function LB(n){n=hn(n,ns);const e=hn(n.firestore,lr),t=Jr(e),r=new Lh(e);return function Q2(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const f=yield zb(i,a,!0),m=new Hk(a,f.Yi),v=m.Hu(f.documents),C=m.applyChanges(v,!1);l.resolve(C.snapshot)}catch(f){const m=x_(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Fh(e,r,n,i))}(this._delegate):"server"===e?.source?function UB(n){n=hn(n,ns);const e=hn(n.firestore,lr),t=Jr(e),r=new Lh(e);return nO(t,n._query,{source:"server"}).then(i=>new Fh(e,r,n,i))}(this._delegate):function FB(n){n=hn(n,ns);const e=hn(n.firestore,lr),t=Jr(e),r=new Lh(e);return IO(n._query),nO(t,n._query).then(i=>new Fh(e,r,n,i))}(this._delegate),t.then(r=>new KR(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BO(e),r=jO(e,i=>new KR(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return NO(this._delegate,t,r)}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?eg.getInstance(this.firestore,e):null))}}class nj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ew(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ew(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ew(this._firestore,r))})}isEqual(e){return xO(this._delegate,e._delegate)}}class F_ extends Us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _a(this.firestore,e):null}doc(e){try{return new _a(this.firestore,void 0===e?tD(this._delegate):tD(this._delegate,e))}catch(t){throw Ls(t,"doc()","CollectionReference.doc()")}}add(e){return function BB(n,e){const t=hn(n.firestore,lr),r=tD(n),i=dD(n.converter,e);return O_(t,[iD(Qp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _a(this.firestore,t))}isEqual(e){return dO(this._delegate,e._delegate)}withConverter(e){return new F_(this.firestore,this._delegate.withConverter(e?eg.getInstance(this.firestore,e):null))}}function tg(n){return hn(n,ur)}class YR{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new YR(mr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class ng{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WB(){return new VR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ng(e)}static delete(){const e=function qB(){return new fw("deleteField")}();return e._methodName="FieldValue.delete",new ng(e)}static arrayUnion(...e){const t=function ZB(...n){return new _B("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ng(t)}static arrayRemove(...e){const t=function KB(...n){return new yB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ng(t)}static increment(e){const t=function YB(n){return new vB("increment",n)}(e);return t._methodName="FieldValue.increment",new ng(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rj={Firestore:LO,GeoPoint:nD,Timestamp:Qn,Blob:vw,Transaction:UO,WriteBatch:VO,DocumentReference:_a,DocumentSnapshot:ww,Query:Us,QueryDocumentSnapshot:Ew,QuerySnapshot:KR,CollectionReference:F_,FieldPath:YR,FieldValue:ng,setLogLevel:function tj(n){!function tb(n){su.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HO(n,e){return function oj(n,e=xm.z){return new yn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QR(n,e){return HO(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function fD(n,e){return QR(n,e).pipe(ep(void 0),_v(),(0,st.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(C=>C.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function $O(n,e,t){return fD(n,t).pipe(rl((r,i)=>function uj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),nC(),(0,st.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function GO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sj(n){(function ij(n,e){n.INTERNAL.registerComponent(new hs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rj)))})(n,(e,t)=>new LO(e,t,new ej)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(tp.Z);class zO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=fD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ep(void 0),_v(),ds(([r,i])=>i.length>0||!r),(0,st.U)(([r,i])=>i),fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(rl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GO(e);return $O(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return QR(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),fn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(fn.iC)}add(e){return this.ref.add(e)}doc(e){return new qO(this.ref.doc(e),this.afs)}}class qO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=KO(r,t);return new zO(i,a,this.afs)}snapshotChanges(){return function aj(n,e){return HO(n,e).pipe(ep(void 0),_v(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(fn.iC)}}class cj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?fD(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ds(t=>t.length>0),fn.iC):fD(this.query,this.afs.schedulers.outsideAngular).pipe(fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(rl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GO(e);return $O(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return QR(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),fn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(fn.iC)}}const WO=new d.OlP("angularfire2.enableFirestorePersistence"),ZO=new d.OlP("angularfire2.firestore.persistenceSettings"),dj=new d.OlP("angularfire2.firestore.settings"),hj=new d.OlP("angularfire2.firestore.use-emulator");function KO(n,e=(t=>t)){return{query:e(n),ref:n}}let YO=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,S,N,B,G,le,_e,Ke,dt){this.schedulers=m;const nt=(0,ui.on)(t,f,r),ut=C;S&&Am(nt,f,N,G,le,_e,B,Ke),[this.firestore,this.persistenceEnabled$]=(0,ui.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const Mt=f.runOutsideAngular(()=>nt.firestore());if(a&&Mt.settings(a),ut&&Mt.useEmulator(...ut),i&&!Kc(l)){const Vt=()=>{try{return(0,ln.D)(Mt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Nr){return typeof console<"u"&&console.warn(Nr),gt(!1)}};return[Mt,f.runOutsideAngular(Vt)]}return[Mt,gt(!1)]},[a,ut,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=KO(i,r),f=this.schedulers.ngZone.run(()=>a);return new zO(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new cj(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(WO,8),d.LFG(dj,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(fn.HU),d.LFG(ZO,8),d.LFG(hj,8),d.LFG(zd,8),d.LFG(Xu,8),d.LFG(Ju,8),d.LFG(el,8),d.LFG(tl,8),d.LFG(nl,8),d.LFG(Sm,8),d.LFG(wo,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fj=(()=>{class n{constructor(){tu.Z.registerVersion("angularfire",fn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WO,useValue:!0},{provide:ZO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[YO]}),n})();const QO="firebasestorage.googleapis.com",XO="storageBucket";class Rr extends L.ZR{constructor(e,t,r=0){super(JR(e),`Firebase Storage: ${t} (${JR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return JR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Jn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Jn||(Jn={})),Jn))();function JR(n){return"storage/"+n}function eM(){return new Rr(Jn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function JO(){return new Rr(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e1(){return new Rr(Jn.CANCELED,"User canceled the upload/download.")}function t1(){return new Rr(Jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function L_(n){return new Rr(Jn.INVALID_ARGUMENT,n)}function n1(){return new Rr(Jn.APP_DELETED,"The Firebase app was deleted.")}function r1(n){return new Rr(Jn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Iw(n,e){return new Rr(Jn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Cw(n){throw new Rr(Jn.INTERNAL_ERROR,"Internal error: "+n)}class _s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_s.makeFromUrl(e,t)}catch{return new _s(e,"")}if(""===r.path)return r;throw function bj(n){return new Rr(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ut){ut.path_=decodeURIComponent(ut.path)}const S=t.replace(/[.]/g,"\\."),nt=[{regex:f,indices:{bucket:1,path:3},postModify:function a(ut){"/"===ut.path.charAt(ut.path.length-1)&&(ut.path_=ut.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===QO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ut=0;ut<nt.length;ut++){const Mt=nt[ut],Vt=Mt.regex.exec(e);if(Vt){let wu=Vt[Mt.indices.path];wu||(wu=""),r=new _s(Vt[Mt.indices.bucket],wu),Mt.postModify(r);break}}if(null==r)throw function Cj(n){return new Rr(Jn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class xj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function pD(n){return"string"==typeof n||n instanceof String}function i1(n){return tM()&&n instanceof Blob}function tM(){return typeof Blob<"u"&&!(0,L.UG)()}function nM(n,e,t,r){if(r<e)throw L_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw L_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Vc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function s1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Vh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Vh||(Vh={})),Vh))();function o1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Oj{constructor(e,t,r,i,a,l,f,m,v,C,S,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=C,this.connectionFactory_=S,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,G)=>{this.resolve_=B,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function Nj(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=eM();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?n1():e1():JO())};this.canceled_?t(0,new gD(!1,null,!0)):this.backoffId_=function Rj(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function C(..._e){v||(v=!0,e.apply(null,_e))}function S(_e){i=setTimeout(()=>{i=null,n(B,m())},_e)}function N(){a&&clearTimeout(a)}function B(_e,...Ke){if(v)return void N();if(_e)return N(),void C.call(null,_e,...Ke);if(m()||l)return N(),void C.call(null,_e,...Ke);let nt;r<64&&(r*=2),1===f?(f=2,nt=0):nt=1e3*(r+Math.random()),S(nt)}let G=!1;function le(_e){G||(G=!0,N(),!v&&(null!==i?(_e||(f=2),clearTimeout(i),S(0)):_e||(f=1)))}return S(0),a=setTimeout(()=>{l=!0,le(!0)},t),le}((r,i)=>{if(i)return void r(!1,new gD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===Vh.NO_ERROR,m=a.getStatus();if(!f||o1(m,this.additionalRetryCodes_)&&this.retry){const C=a.getErrorCode()===Vh.ABORT;return void r(!1,new gD(!1,null,C))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new gD(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Mj(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class gD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Hj(...n){const e=function jj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(tM())return new Blob(n);throw new Rr(Jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rM{constructor(e,t){this.data=e,this.contentType=t||null}}function iM(n,e){switch(n){case xo.RAW:return new rM(a1(e));case xo.BASE64:case xo.BASE64URL:return new rM(u1(n,e));case xo.DATA_URL:return new rM(function qj(n){const e=new l1(n);return e.base64?u1(xo.BASE64,e.rest):function zj(n){let e;try{e=decodeURIComponent(n)}catch{throw Iw(xo.DATA_URL,"Malformed data URL.")}return a1(e)}(e.rest)}(e),function Wj(n){return new l1(n).contentType}(e))}throw eM()}function a1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function u1(n,e){switch(n){case xo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Iw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Iw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Gj(n){if(typeof atob>"u")throw function Aj(n){return new Rr(Jn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Iw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class l1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Iw(xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Zj(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class wl{constructor(e,t){let r=0,i="";i1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(i1(this.data_)){const i=function $j(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new wl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new wl(r,!0)}}static getBlob(...e){if(tM()){const t=e.map(r=>r instanceof wl?r.data_:r);return new wl(Hj.apply(null,t))}{const t=e.map(l=>pD(l)?iM(xo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new wl(i,!0)}}uploadData(){return this.data_}}function sM(n){let e;try{e=JSON.parse(n)}catch{return null}return function kj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function c1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Qj(n,e){return e}class Vs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Qj}}let mD=null;function bw(){if(mD)return mD;const n=[];n.push(new Vs("bucket")),n.push(new Vs("generation")),n.push(new Vs("metageneration")),n.push(new Vs("name","fullPath",!0));const t=new Vs("name");t.xform=function e(a,l){return function Xj(n){return!pD(n)||n.length<2?n:c1(n)}(l)},n.push(t);const i=new Vs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Vs("timeCreated")),n.push(new Vs("updated")),n.push(new Vs("md5Hash",null,!0)),n.push(new Vs("cacheControl",null,!0)),n.push(new Vs("contentDisposition",null,!0)),n.push(new Vs("contentEncoding",null,!0)),n.push(new Vs("contentLanguage",null,!0)),n.push(new Vs("contentType",null,!0)),n.push(new Vs("metadata","customMetadata",!0)),mD=n,mD}function d1(n,e,t){const r=sM(e);return null===r?null:function eH(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function Jj(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new _s(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function oM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const h1="prefixes";class El{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Il(n){if(!n)throw eM()}function _D(n,e){return function t(r,i){const a=d1(n,i,e);return Il(null!==a),a}}function U_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Ej(){return new Rr(Jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function wj(){return new Rr(Jn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function vj(n){return new Rr(Jn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Ij(n){return new Rr(Jn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Dw(n){const e=U_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function yj(n){return new Rr(Jn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function p1(n,e,t){const i=Vc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new El(i,"GET",_D(n,t),l);return f.errorHandler=Dw(e),f}function oH(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=Vc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,C=new El(f,"GET",function iH(n,e){return function t(r,i){const a=function rH(n,e,t){const r=sM(t);return null===r?null:function nH(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[h1])for(const i of t[h1]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new _s(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new _s(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Il(null!==a),a}}(n,e.bucket),v);return C.urlParams=a,C.errorHandler=U_(e),C}function m1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function cH(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class yD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function aM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Il(!1)}return Il(!!t&&-1!==(e||["active"]).indexOf(t)),t}const pH={STATE_CHANGED:"state_changed"},Bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function uM(n){switch(n){case"running":case"pausing":case"canceling":return Bs.RUNNING;case"paused":return Bs.PAUSED;case"success":return Bs.SUCCESS;case"canceled":return Bs.CANCELED;default:return Bs.ERROR}}class gH{constructor(e,t,r){if(function Pj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function V_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class mH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Cw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class _H extends mH{initXhr(){this.xhr_.responseType="text"}}function gu(){return new _H}class w1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=bw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Jn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(o1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=JO()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Jn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function dH(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=m1(e,r,i),f={name:l.fullPath},m=Vc(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=oM(l,t),G=new El(m,"POST",function B(le){let _e;aM(le);try{_e=le.getResponseHeader("X-Goog-Upload-URL")}catch{Il(!1)}return Il(pD(_e)),_e},n.maxUploadRetryTime);return G.urlParams=f,G.headers=C,G.body=S,G.errorHandler=U_(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,gu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function hH(n,e,t,r){const m=new El(t,"POST",function a(v){const C=aM(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Il(!1)}S||Il(!1);const N=Number(S);return Il(!isNaN(N)),new yD(N,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=U_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,gu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new yD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function fH(n,e,t,r,i,a,l,f){const m=new yD(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function Tj(){return new Rr(Jn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let C=v;i>0&&(C=Math.min(C,i));const S=m.current;let B="";B=0===C?"finalize":v===C?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":B,"X-Goog-Upload-Offset":`${m.current}`},le=r.slice(S,S+C);if(null===le)throw t1();const nt=new El(t,"POST",function _e(ut,Mt){const Vt=aM(ut,["active","final"]),Nr=m.current+C,wu=r.size();let WN;return WN="final"===Vt?_D(e,a)(ut,Mt):null,new yD(Nr,wu,"final"===Vt,WN)},e.maxUploadRetryTime);return nt.headers=G,nt.body=le.uploadData(),nt.progressCallback=f||null,nt.errorHandler=U_(n),nt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(l,gu,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=p1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,gu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function _1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let nt="";for(let ut=0;ut<2;ut++)nt+=Math.random().toString().slice(2);return nt}();l["Content-Type"]="multipart/related; boundary="+m;const v=m1(e,r,i),C=oM(v,t),B=wl.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===B)throw t1();const G={name:v.fullPath},le=Vc(a,n.host,n._protocol),Ke=n.maxUploadRetryTime,dt=new El(le,"POST",_D(n,t),Ke);return dt.urlParams=G,dt.headers=l,dt.body=B.uploadData(),dt.errorHandler=U_(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,gu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=e1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=uM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new gH(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(uM(this._state)){case Bs.SUCCESS:V_(this._resolve.bind(null,this.snapshot))();break;case Bs.CANCELED:case Bs.ERROR:V_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(uM(this._state)){case Bs.RUNNING:case Bs.PAUSED:e.next&&V_(e.next.bind(e,this.snapshot))();break;case Bs.SUCCESS:e.complete&&V_(e.complete.bind(e))();break;default:e.error&&V_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class rg{constructor(e,t){this._service=e,this._location=t instanceof _s?t:_s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rg(e,t)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c1(this._location.path)}get storage(){return this._service}get parent(){const e=function Kj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _s(this._location.bucket,e);return new rg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw r1(e)}}function I1(n,e,t){return lM.apply(this,arguments)}function lM(){return lM=(0,ve.Z)(function*(n,e,t){const i=yield C1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield I1(n,e,i.nextPageToken))}),lM.apply(this,arguments)}function C1(n,e){null!=e&&"number"==typeof e.maxResults&&nM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=oH(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,gu)}function xH(n){n._throwIfRoot("getDownloadURL");const e=function aH(n,e,t){const i=Vc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new El(i,"GET",function sH(n,e){return function t(r,i){const a=d1(n,i,e);return Il(null!==a),function tH(n,e,t,r){const i=sM(e);if(null===i||!pD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Vc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+s1({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=Dw(e),f}(n.storage,n._location,bw());return n.storage.makeRequestWithTokens(e,gu).then(t=>{if(null===t)throw function Sj(){return new Rr(Jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function b1(n,e){const t=function Yj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new _s(n._location.bucket,t);return new rg(n.storage,r)}function D1(n,e){if(n instanceof cM){const t=n;if(null==t._bucket)throw function Dj(){return new Rr(Jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XO+"' property when initializing the app?")}();const r=new rg(t,t._bucket);return null!=e?D1(r,e):r}return void 0!==e?b1(n,e):n}function PH(n,e){if(e&&function MH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof cM)return function NH(n,e){return new rg(n,e)}(n,e);throw L_("To use ref(service, url), the first argument must be a Storage instance.")}return D1(n,e)}function T1(n,e){const t=e?.[XO];return null==t?null:_s.makeFromBucketSpec(t,n)}class cM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=QO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_s.makeFromBucketSpec(i,this._host):T1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_s.makeFromBucketSpec(this._url,e):T1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new xj(n1());{const l=function Bj(n,e,t,r,i,a,l=!0){const f=s1(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function Uj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Fj(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function Lj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function Vj(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new Oj(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const S1="@firebase/storage";function R1(n,e){return PH(n=(0,L.m9)(n),e)}function $H(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cM(t,r,i,e,Ki.SDK_VERSION)}!function GH(){(0,Ki._registerComponent)(new hs.wA("storage",$H,"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(S1,"0.11.2",""),(0,Ki.registerVersion)(S1,"0.11.2","esm2017")}();class vD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class N1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new vD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new vD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new vD(l,this,this._ref)):{next:t.next?l=>t.next(new vD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class P1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Bc(e,this._service))}get items(){return this._delegate.items.map(e=>new Bc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function HH(n,e){return b1(n,e)}(this._delegate,e);return new Bc(t,this.storage)}get root(){return new Bc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Bc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new N1(function OH(n,e,t){return function bH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new w1(n,new wl(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xo.RAW,r){this._throwIfRoot("putString");const i=iM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new N1(new w1(this._delegate,new wl(i.data,!0),a),this)}listAll(){return function VH(n){return function TH(n){const e={prefixes:[],items:[]};return I1(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new P1(e,this.storage))}list(e){return function UH(n,e){return C1(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new P1(t,this.storage))}getMetadata(){return function FH(n){return function SH(n){n._throwIfRoot("getMetadata");const e=p1(n.storage,n._location,bw());return n.storage.makeRequestWithTokens(e,gu)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function LH(n,e){return function AH(n,e){n._throwIfRoot("updateMetadata");const t=function uH(n,e,t,r){const a=Vc(e.fullServerUrl(),n.host,n._protocol),f=oM(t,r),v=n.maxOperationRetryTime,C=new El(a,"PATCH",_D(n,r),v);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=Dw(e),C}(n.storage,n._location,e,bw());return n.storage.makeRequestWithTokens(t,gu)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function BH(n){return xH(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function jH(n){return function RH(n){n._throwIfRoot("deleteObject");const e=function lH(n,e){const r=Vc(e.fullServerUrl(),n.host,n._protocol),f=new El(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Dw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,gu)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw r1(e)}}class k1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(O1(e))throw L_("ref() expected a child path but got a URL, use refFromURL instead.");return new Bc(R1(this._delegate,e),this)}refFromURL(e){if(!O1(e))throw L_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_s.makeFromUrl(e,this._delegate.host)}catch{throw L_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bc(R1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function M1(n,e,t,r={}){!function kH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function O1(n){return/^[A-Za-z]+:\/\//.test(n)}function ZH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new k1(t,r)}function F1(n){const e=function YH(n){return new yn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function pj(n,e=xm.z){return(0,Kr.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,C=e.now();if(C<v)return i=this.schedule(void 0,v-C),void r.add(i);f()}t.subscribe((0,bn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function wD(n){return{getDownloadURL:()=>gt(void 0).pipe(fn.fc,xr(()=>n.getDownloadURL()),fn.iC),getMetadata:()=>gt(void 0).pipe(fn.fc,xr(()=>n.getMetadata()),fn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>wD(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>F1(n.put(e,t)),putString:(e,t,r)=>F1(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function KH(n){const e={TaskState:Bs,TaskEvent:pH,StringFormat:xo,Storage:k1,Reference:Bc};n.INTERNAL.registerComponent(new hs.wA("storage-compat",ZH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(tp.Z);const QH=new d.OlP("angularfire2.storageBucket"),XH=new d.OlP("angularfire2.storage.maxUploadRetryTime"),JH=new d.OlP("angularfire2.storage.maxOperationRetryTime"),e$=new d.OlP("angularfire2.storage.use-emulator");let t$=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,S){const N=(0,ui.on)(t,l,r);this.storage=(0,ui.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const B=l.runOutsideAngular(()=>N.storage(i||void 0)),G=C;return G&&B.useEmulator(...G),m&&B.setMaxUploadRetryTime(m),v&&B.setMaxOperationRetryTime(v),B},[m,v])}ref(t){return wD(this.storage.ref(t))}refFromURL(t){return wD(this.storage.refFromURL(t))}upload(t,r,i){return wD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(QH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(fn.HU),d.LFG(XH,8),d.LFG(JH,8),d.LFG(e$,8),d.LFG(wo,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),r$=(()=>{class n{constructor(){tu.Z.registerVersion("angularfire",fn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[t$],imports:[n$]}),n})();var i$=V(5032);const L1="@firebase/database";let dM="";function V1(n){dM=n}class a${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class u${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const B1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new a$(e)}}catch{}return new u$},ig=B1("localStorage"),hM=B1("sessionStorage"),B_=new Os.Yd("@firebase/database"),j1=function(){let n=1;return function(){return n++}}(),H1=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Tw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Tw.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let sg=null,$1=!0;const G1=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(B_.logLevel=Os.in.VERBOSE,sg=B_.log.bind(B_),e&&hM.set("logging_enabled",!0)):"function"==typeof n?sg=n:(sg=null,hM.remove("logging_enabled"))},Vi=function(...n){if(!0===$1&&($1=!1,null===sg&&!0===hM.get("logging_enabled")&&G1(!0)),sg){const e=Tw.apply(null,n);sg(e)}},Sw=function(n){return function(...e){Vi(n,...e)}},fM=function(...n){const e="FIREBASE INTERNAL ERROR: "+Tw(...n);B_.error(e)},Cl=function(...n){const e=`FIREBASE FATAL ERROR: ${Tw(...n)}`;throw B_.error(e),new Error(e)},ys=function(...n){const e="FIREBASE WARNING: "+Tw(...n);B_.warn(e)},ED=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Bh="[MIN_NAME]",jc="[MAX_NAME]",og=function(n,e){if(n===e)return 0;if(n===Bh||e===jc)return-1;if(e===Bh||n===jc)return 1;{const t=W1(n),r=W1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},d$=function(n,e){return n===e?0:n<e?-1:1},Aw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},pM=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=pM(n[e[r]]);return t+="}",t},z1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const q1=function(n){(0,L.hu)(!ED(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const C=v.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(C.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},g$=new RegExp("^-?(0*)\\d{1,10}$"),W1=function(n){if(g$.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},j_=function(n){try{n()}catch(e){setTimeout(()=>{throw ys("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class v${constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ys(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class w${constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ys(e)}}let Rw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const X1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tF="websocket",nF="long_polling";class mM{constructor(e,t,r,i,a=!1,l="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ig.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ig.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rF(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===tF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function E$(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Bi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class I${constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const _M={},yM={};function vM(n){const e=n.toString();return _M[e]||(_M[e]=new I$),_M[e]}class b${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&j_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class jh{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sw(e),this.stats_=vM(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),rF(t,nF,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new b$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wM((...a)=>{const[l,f,m,v,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&X1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jh.forceAllow_=!0}static forceDisallow(){jh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!jh.forceAllow_&&(jh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=z1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class wM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=j1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=wM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Vi("frame writing exception"),f.stack&&Vi(f.stack),Vi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let CD=null;typeof MozWebSocket<"u"?CD=MozWebSocket:typeof WebSocket<"u"&&(CD=WebSocket);let H_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sw(this.connId),this.stats_=vM(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&X1.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),rF(t,tF,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ig.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${dM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new CD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==CD&&!n.forceDisallow_}static previouslyFailed(){return ig.isInMemoryStorage||!0===ig.get("previous_websocket_failure")}markConnectionHealthy(){ig.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=z1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[jh,H_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=H_&&H_.isAvailable();let i=r&&!H_.previouslyFailed();if(t.webSocketOnly&&(r||ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[H_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _F{constructor(e,t,r,i,a,l,f,m,v,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sw("c:"+this.id+":"),this.transportManager_=new cF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Aw("t",e),r=Aw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Aw("t",e),r=Aw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Aw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?fM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ys("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ig.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class bD extends vF{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bD}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Tn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function wn(){return new Tn("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hh(n){return n.pieces_.length-n.pieceNum_}function Hn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Tn(n.pieces_,e)}function IM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Mw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function IF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Tn(e,0)}function _r(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Tn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Tn(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function js(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return js(Hn(n),Hn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function q$(n,e){const t=Mw(n,0),r=Mw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=og(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function CM(n,e){if(Hh(n)!==Hh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ya(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Hh(n)>Hh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class W${constructor(e,t){this.errorPrefix_=t,this.parts_=Mw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);CF(this)}}function CF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ag(n))}function ag(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class bM extends vF{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new bM}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nw=1e3;let TD,ug=(()=>{class n extends yF{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Sw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&bD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,C=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ys(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):fM("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const C=function(){v?v.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(B){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(B)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,G]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?Vi("getToken() completed but was canceled"):(Vi("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=G&&G.token,v=new _F(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,le=>{ys(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(B){t.log_("Failed to get token: "+B),m||(t.repoInfo_.nodeAdmin&&ys(B),C())}}})()}interrupt(t){Vi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>pM(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Tn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Vi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+dM.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=bD.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class DD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(Bh,e),i=new an(Bh,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class TF extends DD{static get __EMPTY_NODE(){return TD}static set __EMPTY_NODE(e){TD=e}compare(e,t){return og(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(jc,TD)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,TD)}toString(){return".key"}}const bl=new TF;class SD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let TM,mu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??no.EMPTY_NODE,this.right=l??no.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return no.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return no.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class no{constructor(e,t=no.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new no(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,mu.BLACK,null,null))}remove(e){return new no(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new SD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new SD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new SD(this.root_,null,this.comparator_,!0,e)}}function tG(n,e){return og(n.name,e.name)}function DM(n,e){return og(n,e)}no.EMPTY_NODE=new class eG{copy(e,t,r,i,a){return this}insert(e,t,r){return new mu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SF=function(n){return"number"==typeof n?"number:"+q1(n):"string:"+n},AF=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===TM||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===TM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xF,RF,MF,$_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AF(this.priorityNode_)}static set __childrenNodeConstructor(t){xF=t}static get __childrenNodeConstructor(){return xF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=tn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===Hh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+SF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?q1(this.value_):this.value_,this.lazyHash_=H1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const er=new class sG extends DD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?og(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(jc,new $_("[PRIORITY-POST]",MF))}makePost(e,t){const r=RF(e);return new an(t,new $_("[PRIORITY-POST]",r))}toString(){return".priority"}},oG=Math.log(2);class aG{constructor(e){this.count=parseInt(Math.log(e+1)/oG,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const AD=function(n,e,t,r){n.sort(e);const i=function(m,v){const C=v-m;let S,N;if(0===C)return null;if(1===C)return S=n[m],N=t?t(S):S,new mu(N,S.node,mu.BLACK,null,null);{const B=parseInt(C/2,10)+m,G=i(m,B),le=i(B+1,v);return S=n[B],N=t?t(S):S,new mu(N,S.node,mu.BLACK,G,le)}},f=function(m){let v=null,C=null,S=n.length;const N=function(G,le){const _e=S-G,Ke=S;S-=G;const dt=i(_e+1,Ke),nt=n[_e],ut=t?t(nt):nt;B(new mu(ut,nt.node,le,null,dt))},B=function(G){v?(v.left=G,v=G):(C=G,v=G)};for(let G=0;G<m.count;++G){const le=m.nextBitIsOne(),_e=Math.pow(2,m.count-(G+1));le?N(_e,mu.BLACK):(N(_e,mu.BLACK),N(_e,mu.RED))}return C}(new aG(n.length));return new no(r||e,f)};let SM;const G_={};class Hc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(G_&&er,"ChildrenNode.ts has not been loaded"),SM=SM||new Hc({".priority":G_},{".priority":er}),SM}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof no?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==bl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(an.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?AD(r,e.getCompare()):G_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const C=Object.assign({},this.indexes_);return C[m]=f,new Hc(C,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===G_){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(an.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),AD(f,l.getCompare())}return G_}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new an(e.name,f))),m.insert(e,e.node)}});return new Hc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===G_)return i;{const a=t.get(e.name);return a?i.remove(new an(e.name,a)):i}});return new Hc(r,this.indexSet_)}}let Pw,Kt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&AF(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pw||(Pw=new n(new no(DM),null,Hc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Pw:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(Hn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Pw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=tn(t);if(null===i)return r;{(0,L.hu)(".priority"!==tn(t)||1===Hh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Hn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(er,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+SF(this.getPriority().val())+":"),this.forEachChild(er,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":H1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new an(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,an.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===kw?-1:0}withIndex(t){if(t===bl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===bl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(er),a=r.getIterator(er);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===bl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const kw=new class uG extends Kt{constructor(){super(new no(DM),Kt.EMPTY_NODE,Hc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};function Mr(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $_(n,Mr(e));if(n instanceof Array){let t=Kt.EMPTY_NODE;return Bi(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=Mr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Mr(e))}{const t=[];let r=!1;if(Bi(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Mr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new an(l,m)))}}),0===t.length)return Kt.EMPTY_NODE;const a=AD(t,tG,l=>l.name,DM);if(r){const l=AD(t,er.getCompare());return new Kt(a,Mr(e),new Hc({".priority":l},{".priority":er}))}return new Kt(a,Mr(e),Hc.Default)}}Object.defineProperties(an,{MIN:{value:new an(Bh,Kt.EMPTY_NODE)},MAX:{value:new an(jc,kw)}}),TF.__EMPTY_NODE=Kt.EMPTY_NODE,$_.__childrenNodeConstructor=Kt,function nG(n){TM=n}(kw),function iG(n){MF=n}(kw),function rG(n){RF=n}(Mr);class AM extends DD{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?og(e.name,t.name):a}makePost(e,t){const r=Mr(e),i=Kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,kw);return new an(jc,e)}toString(){return Mw(this.indexPath_,0).join("/")}}const xM=new class cG extends DD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?og(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=Mr(e);return new an(t,r)}toString(){return".value"}};function NF(n){return{type:"value",snapshotNode:n}}function z_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ow(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Fw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class RM{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Ow(t,f)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(z_(t,r)):l.trackChildChange(Fw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(er,(i,a)=>{t.hasChild(i)||r.trackChildChange(Ow(i,a))}),t.isLeafNode()||t.forEachChild(er,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Fw(i,a,l))}else r.trackChildChange(z_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Lw{constructor(e){this.indexedFilter_=new RM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Lw.getStartPost_(e),this.endPost_=Lw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new an(t,r))||(r=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Kt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Kt.EMPTY_NODE);const a=this;return t.forEachChild(er,(l,f)=>{a.matches(new an(l,f))||(i=i.updateImmediateChild(l,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hG{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Lw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new an(t,r))||(r=Kt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Kt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Kt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,B)=>S(B,N)}else l=this.index_.getCompare();const f=e;(0,L.hu)(f.numChildren()===this.limit_,"");const m=new an(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||f.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const B=null==N?1:l(N,m);if(C&&!r.isEmpty()&&B>=0)return a?.trackChildChange(Fw(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(Ow(t,S));const le=f.updateImmediateChild(t,Kt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(a?.trackChildChange(z_(N.name,N.node)),le.updateImmediateChild(N.name,N.node)):le}}return r.isEmpty()?e:C&&l(v,m)>=0?(null!=a&&(a.trackChildChange(Ow(v.name,v.node)),a.trackChildChange(z_(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Kt.EMPTY_NODE)):e}}class xD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=er}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===er}copy(){const e=new xD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function NM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function RD(n,e){const t=n.copy();return t.index_=e,t}function PF(n){const e={};if(n.isDefault())return e;let t;if(n.index_===er?t="$priority":n.index_===xM?t="$value":n.index_===bl?t="$key":((0,L.hu)(n.index_ instanceof AM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,L.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,L.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==er&&(e.i=n.index_.toString()),e}class MD extends yF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Sw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=MD.getListenId_(e,r),f={};this.listens_[l]=f;const m=PF(e._queryParams);this.restRequest_(a+".json",m,(v,C)=>{let S=C;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,l)===f){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=MD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=PF(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,L.cI)(f.responseText)}catch{ys("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&ys("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class yG{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ND(){return{value:null,children:new Map}}function q_(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,ND()),q_(n.children.get(r),e=Hn(e),t)}}function PM(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(er,(r,i)=>{q_(n,new Tn(r),i)}),PM(n,e)}}if(n.children.size>0){const t=tn(e);return e=Hn(e),n.children.has(t)&&PM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function kM(n,e,t){null!==n.value?t(e,n.value):function vG(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{kM(i,new Tn(e.toString()+"/"+r),t)})}class wG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class CG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wG(e);const r=1e4+2e4*Math.random();xw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Bi(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),xw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(va||(va={})),va))();function LM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class PD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Tn(e));return new PD(wn(),t,this.revert)}}return(0,L.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new PD(Hn(this.path),this.affectedTree,this.revert)}}class Uw{constructor(e,t){this.source=e,this.path=t,this.type=va.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new Uw(this.source,wn()):new Uw(this.source,Hn(this.path))}}class lg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=va.OVERWRITE}operationForChild(e){return nn(this.path)?new lg(this.source,wn(),this.snap.getImmediateChild(e)):new lg(this.source,Hn(this.path),this.snap)}}class W_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=va.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new Tn(e));return t.isEmpty()?null:t.value?new lg(this.source,wn(),t.value):new W_(this.source,wn(),t)}return(0,L.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new W_(this.source,Hn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $h{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class bG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Vw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function SG(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function TG(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function kD(n,e){return{eventCache:n,serverCache:e}}function Bw(n,e,t,r){return kD(new $h(e,t,r),n.serverCache)}function FF(n,e,t,r){return kD(n.eventCache,new $h(e,t,r))}function OD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function cg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let UM;class tr{constructor(e,t=(()=>(UM||(UM=new no(d$)),UM))()){this.value=e,this.children=t}static fromObject(e){let t=new tr(null);return Bi(e,(r,i)=>{t=t.set(new Tn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:wn(),value:this.value};if(nn(e))return null;{const r=tn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Hn(e),t);return null!=a?{path:_r(new Tn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(Hn(e)):new tr(null)}}set(e,t){if(nn(e))return new tr(t,this.children);{const r=tn(e),a=(this.children.get(r)||new tr(null)).set(Hn(e),t),l=this.children.insert(r,a);return new tr(this.value,l)}}remove(e){if(nn(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const i=r.remove(Hn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new tr(null):new tr(this.value,a)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(Hn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),a=(this.children.get(r)||new tr(null)).setTree(Hn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new tr(this.value,l)}}fold(e){return this.fold_(wn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(_r(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,wn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(nn(e))return null;{const a=tn(e),l=this.children.get(a);return l?l.findOnPath_(Hn(e),_r(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wn(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const i=tn(e),a=this.children.get(i);return a?a.foreachOnPath_(Hn(e),_r(t,i),r):new tr(null)}}foreach(e){this.foreach_(wn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_r(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _u{constructor(e){this.writeTree_=e}static empty(){return new _u(new tr(null))}}function jw(n,e,t){if(nn(e))return new _u(new tr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=js(i,e);return a=a.updateChild(l,t),new _u(n.writeTree_.set(i,a))}{const i=new tr(t),a=n.writeTree_.setTree(e,i);return new _u(a)}}}function VM(n,e,t){let r=n;return Bi(t,(i,a)=>{r=jw(r,_r(e,i),a)}),r}function LF(n,e){if(nn(e))return _u.empty();{const t=n.writeTree_.setTree(e,new tr(null));return new _u(t)}}function BM(n,e){return null!=dg(n,e)}function dg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(js(t.path,e)):null}function UF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(er,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Gh(n,e){if(nn(e))return n;{const t=dg(n,e);return new _u(null!=t?new tr(t):n.writeTree_.subtree(e))}}function jM(n){return n.writeTree_.isEmpty()}function Z_(n,e){return VF(wn(),n.writeTree_,e)}function VF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=VF(_r(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_r(n,".priority"),r)),t}}function FD(n,e){return GF(e,n)}function PG(n,e){if(n.snap)return ya(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ya(_r(n.path,t),e))return!0;return!1}function OG(n){return n.visible}function BF(n,e,t){let r=_u.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)ya(t,l)?(f=js(t,l),r=jw(r,f,a.snap)):ya(l,t)&&(f=js(l,t),r=jw(r,wn(),a.snap.getChild(f)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(ya(t,l))f=js(t,l),r=VM(r,f,a.children);else if(ya(l,t))if(f=js(l,t),nn(f))r=VM(r,wn(),a.children);else{const m=(0,L.DV)(a.children,tn(f));if(m){const v=m.getChild(Hn(f));r=jw(r,wn(),v)}}}}}return r}function jF(n,e,t,r,i){if(r||i){const a=Gh(n.visibleWrites,e);return!i&&jM(a)?t:i||null!=t||BM(a,wn())?Z_(BF(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ya(v.path,e)||ya(e,v.path))},e),t||Kt.EMPTY_NODE):null}{const a=dg(n.visibleWrites,e);if(null!=a)return a;{const l=Gh(n.visibleWrites,e);return jM(l)?t:null!=t||BM(l,wn())?Z_(l,t||Kt.EMPTY_NODE):null}}}function LD(n,e,t,r){return jF(n.writeTree,n.treePath,e,t,r)}function HM(n,e){return function FG(n,e,t){let r=Kt.EMPTY_NODE;const i=dg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(er,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Gh(n.visibleWrites,e);return t.forEachChild(er,(l,f)=>{const m=Z_(Gh(a,new Tn(l)),f);r=r.updateImmediateChild(l,m)}),UF(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return UF(Gh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function HF(n,e,t,r){return function LG(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=_r(e,t);if(BM(n.visibleWrites,a))return null;{const l=Gh(n.visibleWrites,a);return jM(l)?i.getChild(t):Z_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function UD(n,e){return function VG(n,e){return dg(n.visibleWrites,e)}(n.writeTree,_r(n.treePath,e))}function $M(n,e,t){return function UG(n,e,t,r){const i=_r(e,t),a=dg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Z_(Gh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $F(n,e){return GF(_r(n.treePath,e),n.writeTree)}function GF(n,e){return{treePath:n,writeTree:e}}class $G{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Fw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Ow(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,z_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Fw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const zF=new class GG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class GM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new $h(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $M(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cg(this.viewCache_),a=function HG(n,e,t,r,i,a){return function BG(n,e,t,r,i,a,l){let f;const m=Gh(n.visibleWrites,e),v=dg(m,wn());if(null!=v)f=v;else{if(null==t)return[];f=Z_(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const C=[],S=l.getCompare(),N=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let B=N.getNext();for(;B&&C.length<i;)0!==S(B,r)&&C.push(B),B=N.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function qF(n,e,t,r,i,a){const l=e.eventCache;if(null!=UD(r,t))return e;{let f,m;if(nn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=cg(e),S=HM(r,v instanceof Kt?v:Kt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=LD(r,cg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=tn(t);if(".priority"===v){(0,L.hu)(1===Hh(t),"Can't have a priority with additional path components");const C=l.getNode();m=e.serverCache.getNode();const S=HF(r,t,C,m);f=null!=S?n.filter.updatePriority(C,S):l.getNode()}else{const C=Hn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const N=HF(r,t,l.getNode(),m);S=null!=N?l.getNode().getImmediateChild(v).updateChild(C,N):l.getNode().getImmediateChild(v)}else S=$M(r,v,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),v,S,C,i,a):l.getNode()}}return Bw(e,f,l.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function VD(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const C=l?n.filter:n.filter.getIndexedFilter();if(nn(t))v=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const B=m.getNode().updateChild(t,r);v=C.updateFullNode(m.getNode(),B,null)}else{const B=tn(t);if(!m.isCompleteForPath(t)&&Hh(t)>1)return e;const G=Hn(t),_e=m.getNode().getImmediateChild(B).updateChild(G,r);v=".priority"===B?C.updatePriority(m.getNode(),_e):C.updateChild(m.getNode(),B,_e,G,zF,null)}const S=FF(e,v,m.isFullyInitialized()||nn(t),C.filtersNodes());return qF(n,S,t,i,new GM(i,S,a),f)}function zM(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const C=new GM(i,e,a);if(nn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Bw(e,v,!0,n.filter.filtersNodes());else{const S=tn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Bw(e,v,f.isFullyInitialized(),f.isFiltered());else{const N=Hn(t),B=f.getNode().getImmediateChild(S);let G;if(nn(N))G=r;else{const le=C.getCompleteChild(S);G=null!=le?".priority"===IM(N)&&le.getChild(IF(N)).isEmpty()?le:le.updateChild(N,r):Kt.EMPTY_NODE}m=B.equals(G)?e:Bw(e,n.filter.updateChild(f.getNode(),S,G,N,C,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function WF(n,e){return n.eventCache.isCompleteForChild(e)}function ZF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function qM(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=nn(t)?r:new tr(null).setTree(t,r);const C=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(C.hasChild(S)){const G=ZF(0,e.serverCache.getNode().getImmediateChild(S),N);m=VD(n,m,new Tn(S),G,i,a,l,f)}}),v.children.inorderTraversal((S,N)=>{const B=!e.serverCache.isCompleteForChild(S)&&null===N.value;if(!C.hasChild(S)&&!B){const le=ZF(0,e.serverCache.getNode().getImmediateChild(S),N);m=VD(n,m,new Tn(S),le,i,a,l,f)}}),m}class JG{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new RM(r.getIndex()),a=function fG(n){return n.loadsAllData()?new RM(n.getIndex()):n.hasLimit()?new hG(n):new Lw(n)}(r);this.processor_=function zG(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,m=i.updateFullNode(Kt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Kt.EMPTY_NODE,f.getNode(),null),C=new $h(m,l.isFullyInitialized(),i.filtersNodes()),S=new $h(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=kD(S,C),this.eventGenerator_=new bG(this.query_)}get query(){return this.query_}}function n3(n,e){const t=cg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function KF(n){return 0===n.eventRegistrations_.length}function YF(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function QF(n,e,t,r){e.type===va.MERGE&&null!==e.source.queryId&&((0,L.hu)(cg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(OD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function WG(n,e,t,r,i){const a=new $G;let l,f;if(t.type===va.OVERWRITE){const v=t;v.source.fromUser?l=zM(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!nn(v.path),l=VD(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===va.MERGE){const v=t;v.source.fromUser?l=function KG(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const C=_r(t,m);WF(e,tn(C))&&(f=zM(n,f,C,v,i,a,l))}),r.foreach((m,v)=>{const C=_r(t,m);WF(e,tn(C))||(f=zM(n,f,C,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=qM(n,e,v.path,v.children,r,i,f,a))}else if(t.type===va.ACK_USER_WRITE){const v=t;l=v.revert?function XG(n,e,t,r,i,a){let l;if(null!=UD(r,t))return e;{const f=new GM(r,e,i),m=e.eventCache.getNode();let v;if(nn(t)||".priority"===tn(t)){let C;if(e.serverCache.isFullyInitialized())C=LD(r,cg(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Kt,"serverChildren would be complete if leaf node"),C=HM(r,S)}v=n.filter.updateFullNode(m,C,a)}else{const C=tn(t);let S=$M(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=m.getImmediateChild(C)),v=null!=S?n.filter.updateChild(m,C,S,Hn(t),f,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Kt.EMPTY_NODE,Hn(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=LD(r,cg(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=UD(r,wn()),Bw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function YG(n,e,t,r,i,a,l){if(null!=UD(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(nn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return VD(n,e,t,m.getNode().getChild(t),i,a,f,l);if(nn(t)){let v=new tr(null);return m.getNode().forEachChild(bl,(C,S)=>{v=v.set(new Tn(C),S)}),qM(n,e,t,v,i,a,f,l)}return e}{let v=new tr(null);return r.foreach((C,S)=>{const N=_r(t,C);m.isCompleteForPath(N)&&(v=v.set(C,m.getNode().getChild(N)))}),qM(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==va.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function QG(n,e,t,r,i){const a=e.serverCache;return qF(n,FF(e,a.getNode(),a.isFullyInitialized()||nn(t),a.isFiltered()),t,r,zF,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function ZG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=OD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(NF(OD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function qG(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,XF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function XF(n,e,t,r){return function DG(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function dG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Vw(n,i,"child_removed",e,r,t),Vw(n,i,"child_added",e,r,t),Vw(n,i,"child_moved",a,r,t),Vw(n,i,"child_changed",e,r,t),Vw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let BD,HD;class JF{constructor(){this.views=new Map}}function WM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),QF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(QF(l,e,t,r));return a}}function eL(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=LD(t,i?r:null),m=!1;f?m=!0:r instanceof Kt?(f=HM(t,r),m=!1):(f=Kt.EMPTY_NODE,m=!1);const v=kD(new $h(f,m,!1),new $h(r,i,!1));return new JG(e,v)}return l}function tL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zh(n,e){let t=null;for(const r of n.views.values())t=t||n3(r,e);return t}function nL(n,e){return e._queryParams.loadsAllData()?jD(n):n.views.get(e._queryIdentifier)}function rL(n,e){return null!=nL(n,e)}function qh(n){return null!=jD(n)}function jD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let h3=1;class iL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=function jG(){return{visibleWrites:_u.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZM(n,e,t,r,i){return function xG(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?K_(n,new lg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wh(n,e,t=!1){const r=function MG(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function NG(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&PG(f,r.path)?i=!1:ya(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function kG(n){n.visibleWrites=BF(n.allWrites,OG,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LF(n.visibleWrites,r.path):Bi(r.children,m=>{n.visibleWrites=LF(n.visibleWrites,_r(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new tr(null);return null!=r.snap?a=a.set(wn(),!0):Bi(r.children,l=>{a=a.set(new Tn(l),!0)}),K_(n,new PD(r.path,a,t))}return[]}function Hw(n,e,t){return K_(n,new lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function $D(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||rL(l,e))){const m=function l3(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=qh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(YF(v,t,r)),KF(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(YF(m,t,r)),KF(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!qh(n)&&a.push(new(function o3(){return(0,L.hu)(BD,"Reference.ts has not been loaded"),BD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function a3(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const C=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(N,B)=>qh(B));if(C&&!S){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const B=function v3(n){return n.fold((e,t,r)=>{if(t&&qh(t))return[jD(t)];{let i=[];return t&&(i=tL(t)),Bi(r,(a,l)=>{i=i.concat(l)}),i}})}(N);for(let G=0;G<B.length;++G){const le=B[G],_e=le.query,Ke=uL(n,le);n.listenProvider_.startListening(Gw(_e),$w(n,_e),Ke.hashFn,Ke.onComplete)}}}!S&&v.length>0&&!r&&(C?n.listenProvider_.stopListening(Gw(e),null):v.forEach(N=>{const B=n.queryToTagMap.get(zD(N));n.listenProvider_.stopListening(Gw(N),B)}))}!function w3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=zD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function sL(n,e,t,r){const i=YM(n,r);if(null!=i){const a=QM(i),l=a.path,f=a.queryId,m=js(l,e);return XM(n,l,new lg(LM(f),m,t))}return[]}function KM(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(N,B)=>{const G=js(N,i);a=a||zh(B,G),l=l||qh(B)});let m,f=n.syncPointTree_.get(i);f?(l=l||qh(f),a=a||zh(f,wn())):(f=new JF,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=Kt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((B,G)=>{const le=zh(G,wn());le&&(a=a.updateImmediateChild(B,le))}));const v=rL(f,e);if(!v&&!e._queryParams.loadsAllData()){const N=zD(e);(0,L.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const B=function E3(){return h3++}();n.queryToTagMap.set(N,B),n.tagToQueryMap.set(B,N)}let S=function u3(n,e,t,r,i,a){const l=eL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function r3(n,e){n.eventRegistrations_.push(e)}(l,t),function i3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(er,(a,l)=>{r.push(z_(a,l))}),t.isFullyInitialized()&&r.push(NF(t.getNode())),XF(n,r,t.getNode(),e)}(l,t)}(f,e,t,FD(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const N=nL(f,e);S=S.concat(function I3(n,e,t){const r=e._path,i=$w(n,e),a=uL(n,t),l=n.listenProvider_.startListening(Gw(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!qh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,C,S)=>{if(!nn(v)&&C&&qh(C))return[jD(C).query];{let N=[];return C&&(N=N.concat(tL(C).map(B=>B.query))),Bi(S,(B,G)=>{N=N.concat(G)}),N}});for(let v=0;v<m.length;++v){const C=m[v];n.listenProvider_.stopListening(Gw(C),$w(n,C))}}return l}(n,e,N))}return S}function GD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=zh(f,js(l,e));if(v)return v});return jF(i,e,a,t,!0)}function K_(n,e){return oL(e,n.syncPointTree_,null,FD(n.pendingWriteTree_,wn()))}function oL(n,e,t,r){if(nn(n.path))return aL(n,e,t,r);{const i=e.get(wn());null==t&&null!=i&&(t=zh(i,wn()));let a=[];const l=tn(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,C=$F(r,l);a=a.concat(oL(f,m,v,C))}return i&&(a=a.concat(WM(i,n,r,t))),a}}function aL(n,e,t,r){const i=e.get(wn());null==t&&null!=i&&(t=zh(i,wn()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=$F(r,l),C=n.operationForChild(l);C&&(a=a.concat(aL(C,f,m,v)))}),i&&(a=a.concat(WM(i,n,r,t))),a}function uL(n,e){const t=e.query,r=$w(n,t);return{hashFn:()=>(function e3(n){return n.viewCache_.serverCache.getNode()}(e)||Kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function m3(n,e,t){const r=YM(n,t);if(r){const i=QM(r),a=i.path,l=i.queryId,f=js(a,e);return XM(n,a,new Uw(LM(l),f))}return[]}(n,t._path,r):function g3(n,e){return K_(n,new Uw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function p$(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return $D(n,t,null,a)}}}}function $w(n,e){const t=zD(e);return n.queryToTagMap.get(t)}function zD(n){return n._path.toString()+"$"+n._queryIdentifier}function YM(n,e){return n.tagToQueryMap.get(e)}function QM(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Tn(n.substr(0,e))}}function XM(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),WM(r,t,FD(n.pendingWriteTree_,e),null)}function Gw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function d3(){return(0,L.hu)(HD,"Reference.ts has not been loaded"),HD}())(n._repo,n._path):n}class JM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JM(t)}node(){return this.node_}}class eN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_r(this.path_,e);return new eN(this.syncTree_,t)}node(){return GD(this.syncTree_,this.path_)}}const lL=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?b3(n[".sv"],e,t):"object"==typeof n[".sv"]?D3(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},b3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},D3=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},cL=function(n,e,t,r){return nN(e,new eN(t,n),r)},tN=function(n,e,t){return nN(n,new JM(e),t)};function nN(n,e,t){const r=n.getPriority().val(),i=lL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=lL(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new $_(f,Mr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new $_(i))),l.forEachChild(er,(f,m)=>{const v=nN(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class rN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function qD(n,e){let t=e instanceof Tn?e:new Tn(e),r=n,i=tn(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new rN(i,r,a),t=Hn(t),i=tn(t)}return r}function hg(n){return n.node.value}function iN(n,e){n.node.value=e,sN(n)}function dL(n){return n.node.childCount>0}function WD(n,e){Bi(n.node.children,(t,r)=>{e(new rN(t,n,r))})}function hL(n,e,t,r){t&&!r&&e(n),WD(n,i=>{hL(i,e,!0,r)}),t&&r&&e(n)}function zw(n){return new Tn(null===n.parent?n.name:zw(n.parent)+"/"+n.name)}function sN(n){null!==n.parent&&function A3(n,e,t){const r=function T3(n){return void 0===hg(n)&&!dL(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,sN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,sN(n))}(n.parent,n.name,n)}const x3=/[\[\].#$\/\u0000-\u001F\u007F]/,R3=/[\[\].#$\u0000-\u001F\u007F]/,oN=10485760,ZD=function(n){return"string"==typeof n&&0!==n.length&&!x3.test(n)},fL=function(n){return"string"==typeof n&&0!==n.length&&!R3.test(n)},qw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ED(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Dl=function(n,e,t,r){r&&void 0===e||Ww((0,L.gK)(n,"value"),e,t)},Ww=function(n,e,t){const r=t instanceof Tn?new W$(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ag(r));if("function"==typeof e)throw new Error(n+"contains a function "+ag(r)+" with contents = "+e.toString());if(ED(e))throw new Error(n+"contains "+e.toString()+" "+ag(r));if("string"==typeof e&&e.length>oN/3&&(0,L.ug)(e)>oN)throw new Error(n+"contains a string greater than "+oN+" utf8 bytes "+ag(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Bi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!ZD(l)))throw new Error(n+" contains an invalid key ("+l+") "+ag(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Z$(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),CF(n)})(r,l),Ww(n,f,r),function K$(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+ag(r)+" in addition to actual children.")}},pL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Bi(e,(l,f)=>{const m=new Tn(l);if(Ww(i,f,_r(t,m)),".priority"===IM(m)&&!qw(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Mw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!ZD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(q$);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ya(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},aN=function(n,e,t){if(!t||void 0!==e){if(ED(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qw(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Zw=function(n,e,t,r){if(!(r&&void 0===t||ZD(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kw=function(n,e,t,r){if(!(r&&void 0===t||fL(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wa=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},gL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ZD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fL(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class k3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function KD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!CM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function mL(n,e,t){KD(n,t),_L(n,r=>CM(r,e))}function Ro(n,e,t){KD(n,t),_L(n,r=>ya(r,e)||ya(e,r))}function _L(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(O3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function O3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();sg&&Vi("event: "+t.toString()),j_(r)}}}const yL="repo_interrupt";class L3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new k3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ND(),this.transactionQueueTree_=new rN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vL(n){const t=n.infoData_.getNode(new Tn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Yw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:vL(n)})}function wL(n,e,t,r,i){n.dataUpdateCount++;const a=new Tn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,L.UI)(t,v=>Mr(v));l=function _3(n,e,t,r){const i=YM(n,r);if(i){const a=QM(i),l=a.path,f=a.queryId,m=js(l,e),v=tr.fromObject(t);return XM(n,l,new W_(LM(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Mr(t);l=sL(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>Mr(v));l=function p3(n,e,t){const r=tr.fromObject(t);return K_(n,new W_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Mr(t);l=Hw(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=Q_(n,a)),Ro(n.eventQueue_,f,l)}function EL(n,e){uN(n,"connected",e),!1===e&&function H3(n){Y_(n,"onDisconnectEvents");const e=Yw(n),t=ND();kM(n.onDisconnect_,wn(),(i,a)=>{const l=cL(i,a,n.serverSyncTree_,e);q_(t,i,l)});let r=[];kM(t,wn(),(i,a)=>{r=r.concat(Hw(n.serverSyncTree_,i,a));const l=hN(n,i);Q_(n,l)}),n.onDisconnect_=ND(),Ro(n.eventQueue_,wn(),r)}(n)}function uN(n,e,t){const r=new Tn("/.info/"+e),i=Mr(t);n.infoData_.updateSnapshot(r,i);const a=Hw(n.infoSyncTree_,r,i);Ro(n.eventQueue_,r,a)}function YD(n){return n.nextWriteId_++}function lN(n,e,t,r,i){Y_(n,"set",{path:e.toString(),value:t,priority:r});const a=Yw(n),l=Mr(t,r),f=GD(n.serverSyncTree_,e),m=tN(l,f,a),v=YD(n),C=ZM(n.serverSyncTree_,e,m,v,!0);KD(n.eventQueue_,C),n.server_.put(e.toString(),l.val(!0),(N,B)=>{const G="ok"===N;G||ys("set at "+e+" failed: "+N);const le=Wh(n.serverSyncTree_,v,!G);Ro(n.eventQueue_,e,le),Zh(0,i,N,B)});const S=hN(n,e);Q_(n,S),Ro(n.eventQueue_,S,[])}function $3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&PM(n.onDisconnect_,e),Zh(0,t,r,i)})}function IL(n,e,t,r){const i=Mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&q_(n.onDisconnect_,e,i),Zh(0,r,a,l)})}function cN(n,e,t){let r;r=".info"===tn(e._path)?$D(n.infoSyncTree_,e,t):$D(n.serverSyncTree_,e,t),mL(n.eventQueue_,e._path,r)}function CL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yL)}function Y_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vi(t,...e)}function Zh(n,e,t,r){e&&j_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function dN(n,e,t){return GD(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function QD(n,e=n.transactionQueueTree_){if(e||XD(n,e),hg(e)){const t=DL(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function K3(n,e,t){const r=t.map(v=>v.currentWriteId),i=dN(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const C=t[v];(0,L.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=js(e,C.path);a=a.updateChild(S,C.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{Y_(n,"transaction put response",{path:m.toString(),status:v});let C=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,C=C.concat(Wh(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();XD(n,qD(n.transactionQueueTree_,e)),QD(n,n.transactionQueueTree_),Ro(n.eventQueue_,e,C);for(let N=0;N<S.length;N++)j_(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ys("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Q_(n,e)}},l)}(n,zw(e),t)}else dL(e)&&WD(e,t=>{QD(n,t)})}function Q_(n,e){const t=bL(n,e),r=zw(t);return function Y3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=js(t,m.path);let S,C=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,S=m.abortReason,i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,S="maxretry",i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0));else{const N=dN(n,m.path,l);m.currentInputSnapshot=N;const B=e[f].update(N.val());if(void 0!==B){Ww("transaction failed: Data returned ",B,m.path);let G=Mr(B);"object"==typeof B&&null!=B&&(0,L.r3)(B,".priority")||(G=G.updatePriority(N.getPriority()));const _e=m.currentWriteId,Ke=Yw(n),dt=tN(G,N,Ke);m.currentOutputSnapshotRaw=G,m.currentOutputSnapshotResolved=dt,m.currentWriteId=YD(n),l.splice(l.indexOf(_e),1),i=i.concat(ZM(n.serverSyncTree_,m.path,dt,m.currentWriteId,m.applyLocally)),i=i.concat(Wh(n.serverSyncTree_,_e,!0))}else C=!0,S="nodata",i=i.concat(Wh(n.serverSyncTree_,m.currentWriteId,!0))}Ro(n.eventQueue_,t,i),i=[],C&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}XD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)j_(r[f]);QD(n,n.transactionQueueTree_)}(n,DL(n,t),r),r}function bL(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===hg(r);)r=qD(r,t),t=tn(e=Hn(e));return r}function DL(n,e){const t=[];return TL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function TL(n,e,t){const r=hg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);WD(e,i=>{TL(n,i,t)})}function XD(n,e){const t=hg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,iN(e,t.length>0?t:void 0)}WD(e,r=>{XD(n,r)})}function hN(n,e){const t=zw(bL(n,e)),r=qD(n.transactionQueueTree_,e);return function S3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{fN(n,i)}),fN(n,r),hL(r,i=>{fN(n,i)}),t}function fN(n,e){const t=hg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Wh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?iN(e,void 0):t.length=a+1,Ro(n.eventQueue_,zw(e),i);for(let l=0;l<r.length;l++)j_(r[l])}}const pN=function(n,e){const t=J3(n),r=t.namespace;return"firebase.com"===t.domain&&Cl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Cl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new mM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Tn(t.pathString)}},J3=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function Q3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const N=function X3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ys(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const B=e.slice(0,v);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},SL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ez=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=SL.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=SL.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class AL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class xL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class gN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class RL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return $3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){wa("OnDisconnect.remove",this._path);const e=new L.BH;return IL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){wa("OnDisconnect.set",this._path),Dl("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return IL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){wa("OnDisconnect.setWithPriority",this._path),Dl("OnDisconnect.setWithPriority",e,this._path,!1),aN("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function G3(n,e,t,r,i){const a=Mr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&q_(n.onDisconnect_,e,a),Zh(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){wa("OnDisconnect.update",this._path),pL("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function z3(n,e,t,r){if((0,L.xb)(t))return Vi("onDisconnect().update() called with empty data.  Don't do anything."),void Zh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Bi(t,(l,f)=>{const m=Mr(f);q_(n.onDisconnect_,_r(e,l),m)}),Zh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ro{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return nn(this._path)?null:IM(this._path)}get ref(){return new Ea(this._repo,this._path)}get _queryIdentifier(){const e=kF(this._queryParams),t=pM(e);return"{}"===t?"default":t}get _queryObject(){return kF(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof ro))return!1;const t=this._repo===e._repo,r=CM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function z$(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function JD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Kh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===bl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Bh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==jc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===er){if(null!=e&&!qw(e)||null!=t&&!qw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof AM||n.getIndex()===xM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ea extends ro{constructor(e,t){super(e,t,new xD,!1)}get parent(){const e=IF(this._path);return null===e?null:new Ea(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class fg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Tn(e),r=pg(this.ref,e);return new fg(this._node.getChild(t),r,er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new fg(i,pg(this.ref,r),er)))}hasChild(e){const t=new Tn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ML(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?pg(n._root,e):n._root}function NL(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=pN(e,n._repo.repoInfo_.nodeAdmin);gL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Cl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ML(n,t.path.toString())}function pg(n,e){return null===tn((n=(0,L.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Kw("child","path",t,!1)):Kw("child","path",e,!1),new Ea(n._repo,_r(n._path,e));var t}function mN(n,e){n=(0,L.m9)(n),wa("set",n._path),Dl("set",e,n._path,!1);const t=new L.BH;return lN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function sz(n,e){pL("update",e,n._path,!1);const t=new L.BH;return function j3(n,e,t,r){Y_(n,"update",{path:e.toString(),value:t});let i=!0;const a=Yw(n),l={};if(Bi(t,(f,m)=>{i=!1,l[f]=cL(_r(e,f),Mr(m),n.serverSyncTree_,a)}),i)Vi("update() called with empty data.  Don't do anything."),Zh(0,r,"ok",void 0);else{const f=YD(n),m=function f3(n,e,t,r){!function RG(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=VM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=tr.fromObject(t);return K_(n,new W_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);KD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,C)=>{const S="ok"===v;S||ys("update at "+e+" failed: "+v);const N=Wh(n.serverSyncTree_,f,!S),B=N.length>0?Q_(n,e):e;Ro(n.eventQueue_,B,N),Zh(0,r,v,C)}),Bi(t,v=>{const C=hN(n,_r(e,v));Q_(n,C)}),Ro(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function oz(n){n=(0,L.m9)(n);const e=new gN(()=>{}),t=new Qw(e);return function B3(n,e,t){const r=function y3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,C)=>{const S=js(v,t);r=r||zh(C,S)});let i=n.syncPointTree_.get(t);i?r=r||zh(i,wn()):(i=new JF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new $h(r,!0,!1):null;return function t3(n){return OD(n.viewCache_)}(eL(i,e,FD(n.pendingWriteTree_,e._path),a?l.getNode():Kt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Mr(i).withIndex(e._queryParams.getIndex());let l;if(KM(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Hw(n.serverSyncTree_,e._path,a);else{const f=$w(n.serverSyncTree_,e);l=sL(n.serverSyncTree_,e._path,a,f)}return Ro(n.eventQueue_,e._path,l),$D(n.serverSyncTree_,e,t,null,!0),a},i=>(Y_(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new fg(r,new Ea(n._repo,n._path),n._queryParams.getIndex()))}class Qw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new AL("value",this,new fg(e.snapshotNode,new Ea(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xL(this,e,t):null}matches(e){return e instanceof Qw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xL(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=pg(new Ea(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new AL(e.type,this,new fg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof tT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Xw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(C,S)=>{cN(n._repo,n,f),m(C,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new gN(t,a||void 0),f="value"===e?new Qw(l):new tT(e,l);return function q3(n,e,t){let r;r=".info"===tn(e._path)?KM(n.infoSyncTree_,e,t):KM(n.serverSyncTree_,e,t),mL(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>cN(n._repo,n,f)}function _N(n,e,t,r){return Xw(n,"value",e,t,r)}function PL(n,e,t,r){return Xw(n,"child_added",e,t,r)}function kL(n,e,t,r){return Xw(n,"child_changed",e,t,r)}function OL(n,e,t,r){return Xw(n,"child_moved",e,t,r)}function FL(n,e,t,r){return Xw(n,"child_removed",e,t,r)}function LL(n,e,t){let r=null;const i=t?new gN(t):null;"value"===e?r=new Qw(i):e&&(r=new tT(e,i)),cN(n._repo,n,r)}class yu{}class UL extends yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dl("endAt",this._value,e._path,!0);const t=NM(e._queryParams,this._value,this._key);if(eT(t),Kh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ro(e._repo,e._path,t,e._orderByCalled)}}class uz extends yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dl("endBefore",this._value,e._path,!1);const t=function _G(n,e,t){let r;return r=NM(n,e,n.index_===bl||t?t:Bh),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(eT(t),Kh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ro(e._repo,e._path,t,e._orderByCalled)}}class VL extends yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dl("startAt",this._value,e._path,!0);const t=MM(e._queryParams,this._value,this._key);if(eT(t),Kh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ro(e._repo,e._path,t,e._orderByCalled)}}class dz extends yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dl("startAfter",this._value,e._path,!1);const t=function mG(n,e,t){let r;return r=MM(n,e,n.index_===bl||t?t:jc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eT(t),Kh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ro(e._repo,e._path,t,e._orderByCalled)}}class fz extends yu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ro(e._repo,e._path,function pG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class gz extends yu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ro(e._repo,e._path,function gG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class _z extends yu{constructor(e){super(),this._path=e}_apply(e){JD(e,"orderByChild");const t=new Tn(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new AM(t),i=RD(e._queryParams,r);return Kh(i),new ro(e._repo,e._path,i,!0)}}class vz extends yu{_apply(e){JD(e,"orderByKey");const t=RD(e._queryParams,bl);return Kh(t),new ro(e._repo,e._path,t,!0)}}class Ez extends yu{_apply(e){JD(e,"orderByPriority");const t=RD(e._queryParams,er);return Kh(t),new ro(e._repo,e._path,t,!0)}}class Cz extends yu{_apply(e){JD(e,"orderByValue");const t=RD(e._queryParams,xM);return Kh(t),new ro(e._repo,e._path,t,!0)}}class Dz extends yu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Dl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new UL(this._value,this._key)._apply(new VL(this._value,this._key)._apply(e))}}function vu(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function s3(n){(0,L.hu)(!BD,"__referenceConstructor has already been defined"),BD=n})(Ea),function c3(n){(0,L.hu)(!HD,"__referenceConstructor has already been defined"),HD=n}(Ea);const yN={};function jL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Cl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=pN(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=pN(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const C=i&&m?new Rw(Rw.OWNER):new w$(n.name,n.options,e);gL("Invalid Firebase Database URL",l),nn(l.path)||Cl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Rz(n,e,t,r){let i=yN[e.name];i||(i={},yN[e.name]=i);let a=i[n.toURLString()];return a&&Cl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new L3(n,false,t,r),i[n.toURLString()]=a,a}(f,n,C,new v$(n.name,t));return new Nz(S,n)}class Nz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function U3(n,e,t){if(n.stats_=vM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new MD(n.repoInfo_,(r,i,a,l)=>{wL(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>EL(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ug(n.repoInfo_,e,(r,i,a,l)=>{wL(n,r,i,a,l)},r=>{EL(n,r)},r=>{!function V3(n,e){Bi(e,(t,r)=>{uN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function C$(n,e){const t=n.toString();return yM[t]||(yM[t]=e()),yM[t]}(n.repoInfo_,()=>new CG(n.stats_,n.server_)),n.infoData_=new yG,n.infoSyncTree_=new iL({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Hw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),uN(n,"connected",!1),n.serverSyncTree_=new iL({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);Ro(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ea(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xz(n,e){const t=yN[e];(!t||t[n.key]!==n)&&Cl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),CL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Cl("Cannot call "+e+" on a deleted database.")}}function HL(){cF.IS_TRANSPORT_INITIALIZED&&ys("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Pz(){HL(),jh.forceDisallow()}function kz(){HL(),H_.forceDisallow(),jh.forceAllow()}function Lz(n,e){G1(n,e)}const Vz={".sv":"timestamp"};class Hz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ug.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ug.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Uz(n){V1(Ki.SDK_VERSION),(0,Ki._registerComponent)(new hs.wA("database",(e,{instanceIdentifier:t})=>jL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(L1,"0.14.4",n),(0,Ki.registerVersion)(L1,"0.14.4","esm2017")}();const qz=new Os.Yd("@firebase/database-compat"),GL=function(n){qz.warn("FIREBASE WARNING: "+n)};class Kz{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,GL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Yz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Yh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Kw("DataSnapshot.child","path",e,!1),new Yh(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Yh(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Mo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class rs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=rs.getCancelAndContextArgs_("Query.on",r,i),f=(v,C)=>{t.call(l.context,new Yh(this.database,v),C)};f.userCallback=t,f.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return _N(this._delegate,f,m),t;case"child_added":return PL(this._delegate,f,m),t;case"child_removed":return FL(this._delegate,f,m),t;case"child_changed":return kL(this._delegate,f,m),t;case"child_moved":return OL(this._delegate,f,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,LL(this._delegate,e,i)}else LL(this._delegate,e)}get(){return oz(this._delegate).then(e=>new Yh(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=rs.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,f=(v,C)=>{const S=new Yh(this.database,v);t&&t.call(a.context,S,C),l.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":_N(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":PL(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":FL(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":kL(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":OL(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new rs(this.database,vu(this._delegate,function pz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fz(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new rs(this.database,vu(this._delegate,function mz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gz(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new rs(this.database,vu(this._delegate,function yz(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kw("orderByChild","path",n,!1),new _z(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new rs(this.database,vu(this._delegate,function wz(){return new vz}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new rs(this.database,vu(this._delegate,function Iz(){return new Ez}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new rs(this.database,vu(this._delegate,function bz(){return new Cz}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new rs(this.database,vu(this._delegate,function cz(n=null,e){return Zw("startAt","key",e,!0),new VL(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new rs(this.database,vu(this._delegate,function hz(n,e){return Zw("startAfter","key",e,!0),new dz(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new rs(this.database,vu(this._delegate,function az(n,e){return Zw("endAt","key",e,!0),new UL(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new rs(this.database,vu(this._delegate,function lz(n,e){return Zw("endBefore","key",e,!0),new uz(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new rs(this.database,vu(this._delegate,function Tz(n,e){return Zw("equalTo","key",e,!0),new Dz(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof rs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Mo(this.database,new Ea(this._delegate._repo,this._delegate._path))}}class Mo extends rs{constructor(e,t){super(e,new ro(t._repo,t._path,new xD,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Mo(this.database,pg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Mo(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Mo(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=mN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,GL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wa("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=sz(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function iz(n,e,t){if(wa("setWithPriority",n._path),Dl("setWithPriority",e,n._path,!1),aN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return lN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function nz(n){return wa("remove",n._path),mN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function $z(n,e,t){var r;if(n=(0,L.m9)(n),wa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,f=_N(n,()=>{});return function Z3(n,e,t,r,i,a){Y_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:j1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=dN(n,e,void 0);l.currentInputSnapshot=f;const m=l.update(f.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Ww("transaction failed: Data returned ",m,l.path),l.status=0;const v=qD(n.transactionQueueTree_,e),C=hg(v)||[];let S;C.push(l),iN(v,C),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(S=(0,L.DV)(m,".priority"),(0,L.hu)(qw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(GD(n.serverSyncTree_,e)||Kt.EMPTY_NODE).getPriority().val();const N=Yw(n),B=Mr(m,S),G=tN(B,f,N);l.currentOutputSnapshotRaw=B,l.currentOutputSnapshotResolved=G,l.currentWriteId=YD(n);const le=ZM(n.serverSyncTree_,e,G,l.currentWriteId,l.applyLocally);Ro(n.eventQueue_,e,le),QD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,C)=>{let S=null;m?a.reject(m):(S=new fg(C,new Ea(n._repo,n._path),er),a.resolve(new Hz(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Yz(a.committed,new Yh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function rz(n,e){n=(0,L.m9)(n),wa("setPriority",n._path),aN("setPriority",e,!1);const t=new L.BH;return lN(n._repo,_r(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function tz(n,e){n=(0,L.m9)(n),wa("push",n._path),Dl("push",e,n._path,!0);const t=vL(n._repo),r=ez(t),i=pg(n,r),a=pg(n,r);let l;return l=null!=e?mN(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Mo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Mo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return wa("Reference.onDisconnect",this._delegate._path),new Kz(new RL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Jw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Pz,forceLongPolling:kz}}useEmulator(e,t,r={}){!function $L(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Cl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Rw(Rw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new Rw(l)}!function Az(n,e,t,r){n.repoInfo_=new mM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Mo){const t=NL(this._delegate,e.toString());return new Mo(this,t)}{const t=ML(this._delegate,e);return new Mo(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=NL(this._delegate,e);return new Mo(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function Oz(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),CL(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function Fz(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function W3(n){n.persistentConnection_&&n.persistentConnection_.resume(yL)}(n._repo)}(this._delegate)}}Jw.ServerValue={TIMESTAMP:function Bz(){return Vz}(),increment:n=>function jz(n){return{".sv":{increment:n}}}(n)};var Xz=Object.freeze({__proto__:null,initStandalone:function Qz({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){V1(t);const l=new hs.zt("auth-internal",new hs.H0("database-standalone"));return l.setComponent(new hs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Jw(jL(n,l,void 0,e,a),n),namespace:i}}});const Jz=Jw.ServerValue;function zL(n){return null==n}function qL(n){return"function"==typeof n.set}function WL(n,e){return qL(e)?e:n.ref(e)}function ZL(n,e){if(function t6(n){return"string"==typeof n}(n))return e.stringCase();if(qL(n))return e.firebaseCase();if(function n6(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function eE(n,e,t="on",r=xm.z){return new yn.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,st.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,TI.B)())}function KL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function s6(n,e){const{payload:t,prevKey:r,key:i}=e,a=KL(n,i),l=function i6(n,e){if(zL(e))return 0;{const t=KL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function YL(n){return(zL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function QL(n,e,t){return function r6(n,e,t){return eE(n,"value","once",t).pipe(xr(r=>{const i=[gt(r)];return e.forEach(a=>i.push(eE(n,a,"on",t))),(0,cm.T)(...i).pipe(rl(s6,[]))}),nC())}(n,e=YL(e),t)}function XL(n,e,t){const r=(e=YL(e)).map(i=>eE(n,i,"on",t));return(0,cm.T)(...r)}function JL(n,e){return function(r,i){return ZL(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function l6(n){return function(t){return t?ZL(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function eU(n,e){return function(){return eE(n,"value","on",e)}}!function e6(n){n.INTERNAL.registerComponent(new hs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Jw(i,r)},"PUBLIC").setServiceProps({Reference:Mo,Query:rs,Database:Jw,DataSnapshot:Yh,enableLogging:Lz,INTERNAL:Xz,ServerValue:Jz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(tp.Z);const h6=new d.OlP("angularfire2.realtimeDatabaseURL"),f6=new d.OlP("angularfire2.database.use-emulator");let p6=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,S,N,B,G,le,_e){this.schedulers=f;const Ke=m,dt=(0,ui.on)(t,l,r);v&&Am(dt,l,C,N,B,G,S,le),this.database=(0,ui.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const nt=l.runOutsideAngular(()=>dt.database(i||void 0));return Ke&&nt.useEmulator(...Ke),nt},[Ke])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>WL(this.database,t));let a=i;return r&&(a=r(i)),function c6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:JL(r,"update"),set:JL(r,"set"),push:i=>r.push(i),remove:l6(r),snapshotChanges:i=>QL(n,i,t).pipe(fn.iC),stateChanges:i=>XL(n,i,t).pipe(fn.iC),auditTrail:i=>function o6(n,e,t){return function u6(n,e,t){return function a6(n,e){return eE(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function s$(...n){const e=(0,_o.jO)(n);return(0,Kr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,na.Xf)(n[m]).subscribe((0,bn.x)(r,v=>{a[m]=v,!f&&!l[m]&&(l[m]=!0,(f=l.every(Ld.y))&&(l=null))},i$.Z));t.subscribe((0,bn.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,st.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function o$(n){return(0,Kr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,bn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,st.U)(i=>i.actions))}(n,XL(n,e).pipe(rl((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(fn.iC),valueChanges:(i,a)=>QL(n,i,t).pipe((0,st.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),fn.iC)}}(a,this)}object(t){return function d6(n,e){return{query:n,snapshotChanges:()=>eU(n,e.schedulers.outsideAngular)().pipe(fn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>eU(n,e.schedulers.outsideAngular)().pipe(fn.iC,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>WL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui.Dh),d.LFG(ui.xv,8),d.LFG(h6,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(fn.HU),d.LFG(f6,8),d.LFG(zd,8),d.LFG(Xu,8),d.LFG(Ju,8),d.LFG(el,8),d.LFG(tl,8),d.LFG(nl,8),d.LFG(Sm,8),d.LFG(wo,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),g6=(()=>{class n{constructor(){tu.Z.registerVersion("angularfire",fn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[p6]}),n})();class Ia extends Xa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var m6=V(9672);function tU(...n){const e=(0,_o.yG)(n),t=(0,_o.jO)(n),{args:r,keys:i}=ju(n);if(0===r.length)return(0,ln.D)([],e);const a=new yn.y(function _6(n,e,t=Ld.y){return r=>{nU(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)nU(e,()=>{const v=(0,ln.D)(n[m],e);let C=!1;v.subscribe((0,bn.x)(r,S=>{a[m]=S,C||(C=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>T(i,l):Ld.y));return t?a.pipe(D(t)):a}function nU(n,e,t){n?(0,m6.f)(t,n,e):e()}function rU(n){return new yn.y(e=>{(0,na.Xf)(n()).subscribe(e)})}var y6=V(9635);function tE(n,e){const t=(0,Gy.m)(n)?n:()=>n,r=i=>i.error(t());return new yn.y(e?i=>e.schedule(r,0,i):r)}var iU=V(727);function vN(){return(0,Kr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,bn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class sU extends yn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Kr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new iU.w0;const t=this.getSubject();e.add(this.source.subscribe((0,bn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=iU.w0.EMPTY)}return e}refCount(){return vN()(this)}}var vs=V(8505);function Qh(n){return(0,Kr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,bn.x)(t,void 0,void 0,l=>{a=(0,na.Xf)(n(l,Qh(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function wN(n){return n<=0?()=>Qu.E:(0,Kr.e)((e,t)=>{let r=[];e.subscribe((0,bn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oU(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ds((i,a)=>n(i,a,r)):Ld.y,wN(1),t?rv(e):SI(()=>new nv))}function EN(n){return(0,Kr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const rn="primary",nE=Symbol("RouteTitle");class E6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function X_(n){return new E6(n)}function I6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Tl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!aU(n[i],e[i]))return!1;return!0}function aU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function uU(n){return Array.prototype.concat.apply([],n)}function lU(n){return n.length>0?n[n.length-1]:null}function is(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xh(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,ln.D)(Promise.resolve(n)):gt(n)}const nT=!1,b6={exact:function hU(n,e,t){if(!mg(n.segments,e.segments)||!rT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hU(n.children[r],e.children[r],t))return!1;return!0},subset:fU},cU={exact:function D6(n,e){return Tl(n,e)},subset:function T6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aU(n[t],e[t]))},ignored:()=>!0};function dU(n,e,t){return b6[t.paths](n.root,e.root,t.matrixParams)&&cU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fU(n,e,t){return pU(n,e,e.segments,t)}function pU(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!mg(i,t)||e.hasChildren()||!rT(i,t,r))}if(n.segments.length===t.length){if(!mg(n.segments,t)||!rT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fU(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(mg(n.segments,i)&&rT(n.segments,i,r)&&n.children[rn])&&pU(n.children[rn],e,a,r)}}function rT(n,e,t){return e.every((r,i)=>cU[t](n[i].parameters,r.parameters))}class gg{constructor(e=new un([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=X_(this.queryParams)),this._queryParamMap}toString(){return x6.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,is(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iT(this)}}class rE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=X_(this.parameters)),this._parameterMap}toString(){return _U(this)}}function mg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let iE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new IN},providedIn:"root"}),n})();class IN{parse(e){const t=new U6(e);return new gg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sE(e.root,!0)}`,r=function N6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${sT(t)}=${sT(i)}`).join("&"):`${sT(t)}=${sT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function R6(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const x6=new IN;function iT(n){return n.segments.map(e=>_U(e)).join("/")}function sE(n,e){if(!n.hasChildren())return iT(n);if(e){const t=n.children[rn]?sE(n.children[rn],!1):"",r=[];return is(n.children,(i,a)=>{a!==rn&&r.push(`${a}:${sE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function A6(n,e){let t=[];return is(n.children,(r,i)=>{i===rn&&(t=t.concat(e(r,i)))}),is(n.children,(r,i)=>{i!==rn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===rn?[sE(n.children[rn],!1)]:[`${i}:${sE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${iT(n)}/${t[0]}`:`${iT(n)}/(${t.join("//")})`}}function gU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sT(n){return gU(n).replace(/%3B/gi,";")}function CN(n){return gU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oT(n){return decodeURIComponent(n)}function mU(n){return oT(n.replace(/\+/g,"%20"))}function _U(n){return`${CN(n.path)}${function M6(n){return Object.keys(n).map(e=>`;${CN(e)}=${CN(n[e])}`).join("")}(n.parameters)}`}const P6=/^[^\/()?;=#]+/;function aT(n){const e=n.match(P6);return e?e[0]:""}const k6=/^[^=?&#]+/,F6=/^[^&#]+/;class U6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[rn]=new un(e,t)),r}parseSegment(){const e=aT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,nT);return this.capture(e),new rE(oT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=aT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=aT(this.remaining);i&&(r=i,this.capture(r))}e[oT(t)]=oT(r)}parseQueryParam(e){const t=function O6(n){const e=n.match(k6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function L6(n){const e=n.match(F6);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=mU(t),a=mU(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=aT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,nT);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=rn);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[rn]:new un([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,nT)}}function bN(n){return n.segments.length>0?new un([],{[rn]:n}):n}function uT(n){const e={};for(const r of Object.keys(n.children)){const a=uT(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function V6(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function _g(n){return n instanceof gg}function H6(n,e,t,r,i){if(0===t.length)return J_(e.root,e.root,e.root,r,i);const a=function wU(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vU(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return is(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new vU(t,e,r)}(t);return a.toRoot()?J_(e.root,e.root,new un([],{}),r,i):function l(m){const v=function G6(n,e,t,r){if(n.isAbsolute)return new ey(e.root,!0,0);if(-1===r)return new ey(t,t===e.root,0);return function EU(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new ey(r,!1,i-a)}(t,r+(oE(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),C=v.processChildren?uE(v.segmentGroup,v.index,a.commands):TN(v.segmentGroup,v.index,a.commands);return J_(e.root,v.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function oE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function aE(n){return"object"==typeof n&&null!=n&&n.outlets}function J_(n,e,t,r,i){let l,a={};r&&is(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),l=n===e?t:yU(n,e,t);const f=bN(uT(l));return new gg(f,a,i)}function yU(n,e,t){const r={};return is(n.children,(i,a)=>{r[a]=i===e?t:yU(i,e,t)}),new un(n.segments,r)}class vU{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oE(r[0]))throw new d.vHH(4003,!1);const i=r.find(aE);if(i&&i!==lU(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ey{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function TN(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return uE(n,e,t);const r=function q6(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(aE(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!CU(m,v,l))return a;r+=2}else{if(!CU(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new un(n.segments.slice(0,r.pathIndex),{});return a.children[rn]=new un(n.segments.slice(r.pathIndex),n.children),uE(a,0,i)}return r.match&&0===i.length?new un(n.segments,{}):r.match&&!n.hasChildren()?SN(n,e,t):r.match?uE(n,0,i):SN(n,e,t)}function uE(n,e,t){if(0===t.length)return new un(n.segments,{});{const r=function z6(n){return aE(n[0])?n[0].outlets:{[rn]:n}}(t),i={};return is(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=TN(n.children[l],e,a))}),is(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new un(n.segments,i)}}function SN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(aE(a)){const m=W6(a.outlets);return new un(r,m)}if(0===i&&oE(t[0])){r.push(new rE(n.segments[e].path,IU(t[0]))),i++;continue}const l=aE(a)?a.outlets[rn]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&oE(f)?(r.push(new rE(l,IU(f))),i+=2):(r.push(new rE(l,{})),i++)}return new un(r,{})}function W6(n){const e={};return is(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=SN(new un([],{}),0,t))}),e}function IU(n){const e={};return is(n,(t,r)=>e[r]=`${t}`),e}function CU(n,e,t){return n==t.path&&Tl(e,t.parameters)}const lE="imperative";class Sl{constructor(e,t){this.id=e,this.url=t}}class AN extends Sl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yg extends Sl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lT extends Sl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bU extends Sl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class DU extends Sl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Z6 extends Sl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K6 extends Sl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y6 extends Sl{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q6 extends Sl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X6 extends Sl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eq{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tq{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nq{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rq{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iq{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TU{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let oq=(()=>{class n{createUrlTree(t,r,i,a,l,f){return H6(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),aq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return oq.\u0275fac(e)},providedIn:"root"}),n})();class SU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=RN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RN(e,this._root).map(t=>t.value)}}function xN(n,e){if(n===e.value)return e;for(const t of e.children){const r=xN(n,t);if(r)return r}return null}function RN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=RN(n,t);if(r.length)return r.unshift(e),r}return[]}class $c{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ty(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class AU extends SU{constructor(e,t){super(e),this.snapshot=t,MN(this,e)}toString(){return this.snapshot.toString()}}function xU(n,e){const t=function uq(n,e){const l=new cT([],{},{},"",{},rn,e,null,n.root,-1,{});return new MU("",new $c(l,[]))}(n,e),r=new Ia([new rE("",{})]),i=new Ia({}),a=new Ia({}),l=new Ia({}),f=new Ia(""),m=new vg(r,i,l,f,a,rn,e,t.root);return m.snapshot=t.root,new AU(new $c(m,[]),t)}class vg{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,st.U)(v=>v[nE]))??gt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>X_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>X_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RU(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function lq(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cT{get title(){return this.data?.[nE]}constructor(e,t,r,i,a,l,f,m,v,C,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=X_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=X_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MU extends SU{constructor(e,t){super(t),this.url=e,MN(this,t)}toString(){return NU(this._root)}}function MN(n,e){e.value._routerState=n,e.children.forEach(t=>MN(n,t))}function NU(n){const e=n.children.length>0?` { ${n.children.map(NU).join(", ")} } `:"";return`${n.value}${e}`}function NN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Tl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Tl(e.params,t.params)||n.params.next(t.params),function C6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Tl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Tl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function PN(n,e){const t=Tl(n.params,e.params)&&function S6(n,e){return mg(n,e)&&n.every((t,r)=>Tl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||PN(n.parent,e.parent))}function cE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function dq(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cE(n,r,i);return cE(n,r)})}(n,e,t);return new $c(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>cE(n,f)),l}}const r=function hq(n){return new vg(new Ia(n.url),new Ia(n.params),new Ia(n.queryParams),new Ia(n.fragment),new Ia(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>cE(n,a));return new $c(r,i)}}const kN="ngNavigationCancelingError";function PU(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=_g(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kU(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function kU(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[kN]=!0,r.cancellationCode=e,t&&(r.url=t),r}function OU(n){return FU(n)&&_g(n.url)}function FU(n){return n&&n[kN]}class fq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new dE,this.attachRef=null}}let dE=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fq,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dT=!1;let ON=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=rn,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(dE),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,dT);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,dT);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,dT);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,dT);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new pq(t,f,i.injector);if(r&&function gq(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class pq{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vg?this.route:e===dE?this.childContexts:this.parent.get(e,t)}}let FN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[ON],encapsulation:2}),n})();function LU(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function UN(n){const e=n.children&&n.children.map(UN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=FN),t}function Ca(n){return n.outlet||rn}function UU(n,e){const t=n.filter(r=>Ca(r)===e);return t.push(...n.filter(r=>Ca(r)!==e)),t}function hE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wq{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),NN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ty(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),is(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ty(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ty(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ty(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new iq(a.value.snapshot))}),e.children.length&&this.forwardEvent(new nq(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(NN(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),NN(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=hE(i.snapshot),m=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class VU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hT{constructor(e,t){this.component=e,this.route=t}}function Eq(n,e,t){const r=n._root;return fE(r,e?e._root:null,t,[r.value])}function ny(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function fE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ty(e);return n.children.forEach(l=>{(function Cq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function bq(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mg(n.url,e.url)||!Tl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PN(n,e)||!Tl(n.queryParams,e.queryParams);default:return!PN(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new VU(r)):(a.data=l.data,a._resolvedData=l._resolvedData),fE(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new hT(f.outlet.component,l))}else l&&pE(e,f,i),i.canActivateChecks.push(new VU(r)),fE(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),is(a,(l,f)=>pE(l,t.getContext(f),i)),i}function pE(n,e,t){const r=ty(n),i=n.value;is(r,(a,l)=>{pE(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new hT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gE(n){return"function"==typeof n}function VN(n){return n instanceof nv||"EmptyError"===n?.name}const fT=Symbol("INITIAL_VALUE");function ry(){return xr(n=>tU(n.map(e=>e.pipe(Od(1),ep(fT)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===fT)return fT;if(!1===t||t instanceof gg)return t}return!0}),ds(e=>e!==fT),Od(1)))}function BU(n){return(0,y6.z)((0,vs.b)(e=>{if(_g(e))throw PU(0,e)}),(0,st.U)(e=>!0===e))}const BN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jU(n,e,t,r,i){const a=jN(n,e,t);return a.matched?function jq(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?gt(i.map(l=>{const f=ny(l,n);return Xh(function Rq(n){return n&&gE(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(ry(),BU()):gt(!0)}(r=LU(e,r),e,t).pipe((0,st.U)(l=>!0===l?a:{...BN})):gt(a)}function jN(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...BN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||I6)(t,n,e);if(!i)return{...BN};const a={};is(i.posParams,(f,m)=>{a[m]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function pT(n,e,t,r){if(t.length>0&&function Gq(n,e,t){return t.some(r=>gT(n,e,r)&&Ca(r)!==rn)}(n,t,r)){const a=new un(e,function $q(n,e,t,r){const i={};i[rn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ca(a)!==rn){const l=new un([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ca(a)]=l}return i}(n,e,r,new un(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function zq(n,e,t){return t.some(r=>gT(n,e,r))}(n,t,r)){const a=new un(n.segments,function Hq(n,e,t,r,i){const a={};for(const l of r)if(gT(n,t,l)&&!i[Ca(l)]){const f=new un([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Ca(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new un(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function gT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function HU(n,e,t,r){return!!(Ca(n)===r||r!==rn&&gT(e,t,n))&&("**"===n.path||jN(e,n,t).matched)}function $U(n,e,t){return 0===e.length&&!n.children[t]}const mT=!1;class _T{constructor(e){this.segmentGroup=e||null}}class GU{constructor(e){this.urlTree=e}}function mE(n){return tE(new _T(n))}function zU(n){return tE(new GU(n))}class Kq{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=pT(this.urlTree.root,[],[],this.config).segmentGroup,t=new un(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,rn).pipe((0,st.U)(a=>this.createUrlTree(uT(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qh(a=>{if(a instanceof GU)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof _T?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,rn).pipe((0,st.U)(i=>this.createUrlTree(uT(i),e.queryParams,e.fragment))).pipe(Qh(i=>{throw i instanceof _T?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,mT)}createUrlTree(e,t,r){const i=bN(e);return new gg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(a=>new un([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,ln.D)(i).pipe(Za(a=>{const l=r.children[a],f=UU(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,st.U)(m=>({segment:m,outlet:a})))}),rl((a,l)=>(a[l.outlet]=l.segment,a),{}),oU())}expandSegment(e,t,r,i,a,l){return(0,ln.D)(r).pipe(Za(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Qh(v=>{if(v instanceof _T)return gt(null);throw v}))),ca(f=>!!f),Qh((f,m)=>{if(VN(f))return $U(t,i,a)?gt(new un([],{})):mE(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return HU(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):mE(t):mE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zU(a):this.lineralizeSegments(r,a).pipe((0,Zi.z)(l=>{const f=new un(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:C}=jN(t,i,a);if(!f)return mE(t);const S=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?zU(S):this.lineralizeSegments(i,S).pipe((0,Zi.z)(N=>this.expandSegment(e,t,r,N.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=LU(r,e),r.loadChildren?(r._loadedRoutes?gt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new un(i,{})))):gt(new un(i,{}))):jU(t,r,i,e).pipe(xr(({matched:l,consumedSegments:f,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Zi.z)(C=>{const S=C.injector??e,N=C.routes,{segmentGroup:B,slicedSegments:G}=pT(t,f,m,N),le=new un(B.segments,B.children);if(0===G.length&&le.hasChildren())return this.expandChildren(S,N,le).pipe((0,st.U)(nt=>new un(f,nt)));if(0===N.length&&0===G.length)return gt(new un(f,{}));const _e=Ca(r)===a;return this.expandSegment(S,le,N,G,_e?rn:a,!0).pipe((0,st.U)(dt=>new un(f.concat(dt.segments),dt.children)))})):mE(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Bq(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?gt(!0):gt(i.map(l=>{const f=ny(l,n);return Xh(function Tq(n){return n&&gE(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(ry(),BU())}(e,t,r).pipe((0,Zi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,vs.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Wq(n){return tE(kU(mT,3))}())):gt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[rn])return tE(new d.vHH(4e3,mT));i=i.children[rn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new gg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return is(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return is(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new un(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,mT);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Qq{}class eW{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=pT(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,rn).pipe((0,st.U)(t=>{if(null===t)return null;const r=new cT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $c(r,t),a=new MU(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=RU(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(Za(i=>{const a=r.children[i],l=UU(t,i);return this.processSegmentGroup(e,l,a,i)}),rl((i,a)=>i&&a?(i.push(...a),i):null),function v6(n,e=!1){return(0,Kr.e)((t,r)=>{let i=0;t.subscribe((0,bn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),rv(null),oU(),(0,st.U)(i=>{if(null===i)return null;const a=WU(i);return function tW(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,ln.D)(t).pipe(Za(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),ca(l=>!!l),Qh(l=>{if(VN(l))return $U(r,i,a)?gt([]):gt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!HU(t,r,i,a))return gt(null);let l;if("**"===t.path){const f=i.length>0?lU(i).parameters:{},m=KU(r)+i.length;l=gt({snapshot:new cT(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YU(t),Ca(t),t.component??t._loadedComponent??null,t,ZU(r),m,QU(t)),consumedSegments:[],remainingSegments:[]})}else l=jU(r,t,i,e).pipe((0,st.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:C})=>{if(!f)return null;const S=KU(r)+m.length;return{snapshot:new cT(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YU(t),Ca(t),t.component??t._loadedComponent??null,t,ZU(r),S,QU(t)),consumedSegments:m,remainingSegments:v}}));return l.pipe(xr(f=>{if(null===f)return gt(null);const{snapshot:m,consumedSegments:v,remainingSegments:C}=f;e=t._injector??e;const S=t._loadedInjector??e,N=function nW(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:G}=pT(r,v,C,N.filter(_e=>void 0===_e.redirectTo));if(0===G.length&&B.hasChildren())return this.processChildren(S,N,B).pipe((0,st.U)(_e=>null===_e?null:[new $c(m,_e)]));if(0===N.length&&0===G.length)return gt([new $c(m,[])]);const le=Ca(t)===a;return this.processSegment(S,N,B,G,le?rn:a).pipe((0,st.U)(_e=>null===_e?null:[new $c(m,_e)]))}))}}function rW(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function WU(n){const e=[],t=new Set;for(const r of n){if(!rW(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=WU(r.children);e.push(new $c(r.value,i))}return e.filter(r=>!t.has(r))}function ZU(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function KU(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function YU(n){return n.data||{}}function QU(n){return n.resolve||{}}function XU(n){return"string"==typeof n.title||null===n.title}function HN(n){return xr(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,st.U)(()=>e)):gt(e)})}const iy=new d.OlP("ROUTES");let $N=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Xh(t.loadComponent()).pipe((0,st.U)(eV),(0,vs.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),EN(()=>{this.componentLoaders.delete(t)})),i=new sU(r,()=>new Xa.x).pipe(vN());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,C=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=uU(m.get(iy,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(UN),injector:m}}),EN(()=>{this.childrenLoaders.delete(r)})),l=new sU(a,()=>new Xa.x).pipe(vN());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Xh(t()).pipe((0,st.U)(eV),(0,Zi.z)(i=>i instanceof d.YKP||Array.isArray(i)?gt(i):(0,ln.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eV(n){return function hW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let vT=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Xa.x,this.configLoader=(0,d.f3M)($N),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(iE),this.rootContexts=(0,d.f3M)(dE),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new eq(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new J6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ia({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:lE,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ds(r=>0!==r.id),(0,st.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),xr(r=>{let i=!1,a=!1;return gt(r).pipe((0,vs.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xr(l=>{const f=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new bU(l.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Qu.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return tV(l.source)&&(t.browserUrlTree=l.extractedUrl),gt(l).pipe(xr(C=>{const S=this.transitions?.getValue();return this.events.next(new AN(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),S!==this.transitions?.getValue()?Qu.E:Promise.resolve(C)}),function Yq(n,e,t,r){return xr(i=>function Zq(n,e,t,r,i){return new Kq(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,st.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,vs.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function sW(n,e,t,r,i){return(0,Zi.z)(a=>function Jq(n,e,t,r,i,a,l="emptyOnly"){return new eW(n,e,t,r,i,l,a).recognize().pipe(xr(f=>null===f?function Xq(n){return new yn.y(e=>e.error(n))}(new Qq):gt(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,st.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,vs.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const N=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(N,C)}t.browserUrlTree=C.urlAfterRedirects}const S=new Z6(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:S,source:N,restoredState:B,extras:G}=l,le=new AN(C,this.urlSerializer.serialize(S),N,B);this.events.next(le);const _e=xU(S,this.rootComponentType).snapshot;return gt(r={...l,targetSnapshot:_e,urlAfterRedirects:S,extras:{...G,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new bU(l.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Qu.E}}),(0,vs.b)(l=>{const f=new K6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,st.U)(l=>r={...l,guards:Eq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Nq(n,e){return(0,Zi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?gt({...t,guardsResult:!0}):function Pq(n,e,t,r){return(0,ln.D)(n).pipe((0,Zi.z)(i=>function Vq(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?gt(a.map(f=>{const m=hE(e)??i,v=ny(f,m);return Xh(function xq(n){return n&&gE(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(ca())})).pipe(ry()):gt(!0)}(i.component,i.route,t,e,r)),ca(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Zi.z)(f=>f&&function Dq(n){return"boolean"==typeof n}(f)?function kq(n,e,t,r){return(0,ln.D)(e).pipe(Za(i=>Rm(function Fq(n,e){return null!==n&&e&&e(new tq(n)),gt(!0)}(i.route.parent,r),function Oq(n,e){return null!==n&&e&&e(new rq(n)),gt(!0)}(i.route,r),function Uq(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Iq(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>rU(()=>gt(l.guards.map(m=>{const v=hE(l.node)??t,C=ny(m,v);return Xh(function Aq(n){return n&&gE(n.canActivateChild)}(C)?C.canActivateChild(r,n):v.runInContext(()=>C(r,n))).pipe(ca())})).pipe(ry())));return gt(a).pipe(ry())}(n,i.path,t),function Lq(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(a=>rU(()=>{const l=hE(e)??t,f=ny(a,l);return Xh(function Sq(n){return n&&gE(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(ca())}));return gt(i).pipe(ry())}(n,i.route,t))),ca(i=>!0!==i,!0))}(r,a,n,e):gt(f)),(0,st.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,vs.b)(l=>{if(r.guardsResult=l.guardsResult,_g(l.guardsResult))throw PU(0,l.guardsResult);const f=new Y6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),ds(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),HN(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe((0,vs.b)(f=>{const m=new Q6(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),xr(f=>{let m=!1;return gt(f).pipe(function oW(n,e){return(0,Zi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let a=0;return(0,ln.D)(i).pipe(Za(l=>function aW(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!XU(i)&&(a[nE]=i.title),function uW(n,e,t,r){const i=function lW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return gt({});const a={};return(0,ln.D)(i).pipe((0,Zi.z)(l=>function cW(n,e,t,r){const i=hE(e)??r,a=ny(n,i);return Xh(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(ca(),(0,vs.b)(f=>{a[l]=f}))),wN(1),function w6(n){return(0,st.U)(()=>n)}(a),Qh(l=>VN(l)?Qu.E:tE(l)))}(a,n,e,r).pipe((0,st.U)(l=>(n._resolvedData=l,n.data=RU(n,t).resolve,i&&XU(i)&&(n.data[nE]=i.title),null)))}(l.route,r,n,e)),(0,vs.b)(()=>a++),wN(1),(0,Zi.z)(l=>a===i.length?gt(t):Qu.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,vs.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,vs.b)(f=>{const m=new X6(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),HN(l=>{const f=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,vs.b)(C=>{m.component=C}),(0,st.U)(()=>{})));for(const C of m.children)v.push(...f(C));return v};return tU(f(l.targetSnapshot.root)).pipe(rv(),Od(1))}),HN(()=>this.afterPreactivation()),(0,st.U)(l=>{const f=function cq(n,e,t){const r=cE(n,e._root,t?t._root:void 0);return new AU(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,vs.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new wq(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,vs.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new yg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),EN(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Qh(l=>{if(a=!0,FU(l)){OU(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new lT(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),OU(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||tV(r.source)};t.scheduleNavigation(m,lE,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new DU(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Qu.E}))}))}cancelNavigationTransition(t,r,i){const a=new lT(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tV(n){return n!==lE}let nV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===rn);return r}getResolvedTitleForRoute(t){return t.data[nE]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(fW)},providedIn:"root"}),n})(),fW=(()=>{class n extends nV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(go))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(mW)},providedIn:"root"}),n})();class gW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let mW=(()=>{class n extends gW{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wT=new d.OlP("",{providedIn:"root",factory:()=>({})});let yW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(vW)},providedIn:"root"}),n})(),vW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wW(n){throw n}function EW(n,e,t){return e.parse("/")}const IW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ws=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(wT,{optional:!0})||{},this.errorHandler=this.options.errorHandler||wW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||EW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(yW),this.routeReuseStrategy=(0,d.f3M)(pW),this.urlCreationStrategy=(0,d.f3M)(aq),this.titleStrategy=(0,d.f3M)(nV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=uU((0,d.f3M)(iy,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(vT),this.urlSerializer=(0,d.f3M)(iE),this.location=(0,d.f3M)(Pe),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new gg,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xU(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),lE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(UN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:l;let C=null;switch(f){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=_g(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,lE,null,r)}navigate(t,r={skipLocationChange:!1}){return function bW(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...IW}:!1===r?{...CW}:r,_g(t))return dU(this.currentUrlTree,t,i);const a=this.parseUrl(t);return dU(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,m,v,C;return l?(f=l.resolve,m=l.reject,v=l.promise):v=new Promise((S,N)=>{f=S,m=N}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gc=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Xa.x;const m=l.nativeElement.tagName;this.isAnchorElement="A"===m||"AREA"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof yg&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ws),d.Y36(vg),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(rt))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),iV=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof yg&&this.update()})}ngAfterContentInit(){gt(this.links.changes,gt(null)).pipe((0,qd.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,ln.D)(t).pipe((0,qd.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function DW(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ws),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Gc,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Gc,5),2&t){let a;d.iGM(a=d.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class sV{}let TW=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ds(t=>t instanceof yg),Za(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,ln.D)(i).pipe((0,qd.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const a=i.pipe((0,Zi.z)(l=>null===l?gt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([a,l]).pipe((0,qd.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ws),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(sV),d.LFG($N))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const GN=new d.OlP("");let oV=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof AN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof TU&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new TU(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function wg(n,e){return{\u0275kind:n,\u0275providers:e}}function uV(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(ws),i=n.get(lV);1===n.get(qN)&&r.initialNavigation(),n.get(cV,null,d.XFs.Optional)?.setUpPreloading(),n.get(GN,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const lV=new d.OlP("",{factory:()=>new Xa.x}),qN=new d.OlP("",{providedIn:"root",factory:()=>1});const cV=new d.OlP("");function MW(n){return wg(0,[{provide:cV,useExisting:TW},{provide:sV,useExisting:n}])}const dV=new d.OlP("ROUTER_FORROOT_GUARD"),NW=[Pe,{provide:iE,useClass:IN},ws,dE,{provide:vg,useFactory:function aV(n){return n.routerState.root},deps:[ws]},$N,[]];function PW(){return new d.PXZ("Router",ws)}let hV=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[NW,[],{provide:iy,multi:!0,useValue:t},{provide:dV,useFactory:LW,deps:[[ws,new d.FiY,new d.tp0]]},{provide:wT,useValue:r||{}},r?.useHash?{provide:rt,useClass:De}:{provide:rt,useClass:Te},{provide:GN,useFactory:()=>{const n=(0,d.f3M)(Bo),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(wT),r=(0,d.f3M)(vT),i=(0,d.f3M)(iE);return t.scrollOffset&&n.setOffset(t.scrollOffset),new oV(i,r,n,e,t)}},r?.preloadingStrategy?MW(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:PW},r?.initialNavigation?UW(r):[],[{provide:fV,useFactory:uV},{provide:d.tb,multi:!0,useExisting:fV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:iy,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dV,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[FN]}),n})();function LW(n){return"guarded"}function UW(n){return["disabled"===n.initialNavigation?wg(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(ws);return()=>{e.setUpLocationChangeListener()}}},{provide:qN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wg(2,[{provide:qN,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(ge,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(ws),l=e.get(lV);(function r(i){e.get(ws).events.pipe(ds(l=>l instanceof yg||l instanceof lT||l instanceof DU),(0,st.U)(l=>l instanceof yg||l instanceof lT&&(0===l.code||1===l.code)&&null),ds(l=>null!==l),Od(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(vT).afterPreactivation=()=>(i(!0),l.closed?gt(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const fV=new d.OlP("");var pV=V(8401);class No{constructor(e,t,r,i,a){this.afs=e,this.fireAuth=t,this.router=r,this.http=i,this.ngZone=a,this.user=new Ia({displayName:"Ram",emailVerified:"false",photoURL:"././assets/images/blank-profile.png"}),this.fireAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")),console.log(this.userData)):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}setUserList(e){this.user.next(e)}getUserList(){return this.user.asObservable()}login(e,t){return this.fireAuth.signInWithEmailAndPassword(e,t).then(r=>{this.SetUserData(r.user),this.fireAuth.authState.subscribe(i=>{i&&this.router.navigate(["./home"])})}).catch(r=>{window.alert(r.message)})}signup(e,t){return this.fireAuth.createUserWithEmailAndPassword(e,t).then(r=>{this.sendEmailForVerification(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}sendEmailForVerification(){return this.fireAuth.currentUser.then(e=>e.sendEmailForVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}SetUserData(e){return this.afs.doc("users/${user.uid}").set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}signout(){return this.fireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["./signin"])})}signingoogle(){return this.fireAuth.signInWithPopup(new pV.Q).then(e=>{this.router.navigate(["./home"]),this.SetUserData(e.user)})}signinfacebook(){return this.fireAuth.signInWithPopup(new pV.N).then(e=>{this.router.navigate(["./home"]),this.SetUserData(e.user)},e=>{console.log("Facebook Error",e)})}getUnivercityData(){return this.http.get("https://gorest.co.in/public/v2/users")}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}}function BW(n,e){if(1&n&&(d.TgZ(0,"div",3)(1,"div",4),d._UZ(2,"img",5),d.TgZ(3,"div",6)(4,"h4"),d._uU(5),d.qZA(),d.TgZ(6,"h6"),d._uU(7),d.qZA()()()()),2&n){const t=e.$implicit;d.xp6(2),d.s9C("src",t.imgPath,d.LSH),d.xp6(3),d.Oqu(t.name),d.xp6(2),d.Oqu(t.designation)}}No.\u0275fac=function(e){return new(e||No)(d.LFG(YO),d.LFG(zd),d.LFG(ws),d.LFG(Yy),d.LFG(d.R0b))},No.\u0275prov=d.Yz7({token:No,factory:No.\u0275fac,providedIn:"root"});class yE{constructor(e){this.auth=e,this.tutors=[{imgPath:"./assets/images/tutor1.jpg",name:"Mia Adam",designation:"Founder & CEO"},{imgPath:"./assets/images/tutor2.jpg",name:"Mia Adam",designation:"Founder & CEO"},{imgPath:"./assets/images/tutor3.jpg",name:"Mia Adam",designation:"Founder & CEO"},{imgPath:"./assets/images/pic4.jpg",name:"Jaffery Goodwin",designation:"Senior Manager"}]}ngOnInit(){this.auth.getUserList().subscribe(e=>{this.title=e.displayName})}}yE.\u0275fac=function(e){return new(e||yE)(d.Y36(No))},yE.\u0275cmp=d.Xpm({type:yE,selectors:[["app-aboutus"]],decls:7,vars:2,consts:[[1,"container","p-20"],[1,"row"],["class","column col-sm-3",4,"ngFor","ngForOf"],[1,"column","col-sm-3"],[1,"card"],[3,"src"],[1,"pl-12","pt-12"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"h3"),d._uU(2),d.qZA(),d.TgZ(3,"h5"),d._uU(4,"Meet our team of Creators, designers, and world class problem solvers"),d.qZA(),d.TgZ(5,"div",1),d.YNc(6,BW,8,3,"div",2),d.qZA()()),2&e&&(d.xp6(2),d.hij("Welcome to ",t.title,""),d.xp6(4),d.Q6J("ngForOf",t.tutors))},dependencies:[pi],styles:[".card[_ngcontent-%COMP%]{background-color:#e1e1e1}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:6px;border-top-right-radius:6px}"]});class Eg{constructor(){this.courses=[{id:0,name:"React",imagePath:"https://149695847.v2.pressablecdn.com/wp-content/uploads/2021/01/pasted-image-0-2.png",version:"Vesion : 7",description:"Build encapsulated components that manage their own state, then compose them to make complex UIs.",details:{head1:"Declarative",para1:"React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable and easier to debug.",head2:"Component-Based",para2:"Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DO"}},{id:1,name:"Angular",imagePath:"https://www.levelaccess.com/wp-content/uploads/2015/08/AngularJS_google.png",version:"Vesion : 14",description:"Build encapsulated components that manage their own state, then compose them to make complex UIs.",details:{head1:"Declarative",para1:"React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable and easier to debug.",head2:"Component-Based",para2:"Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DO"}},{id:2,name:"Vue",imagePath:"https://miro.medium.com/max/720/1*OrjCKmou1jT4It5so5gvOA.jpeg",version:"Vesion : 3",description:"Build encapsulated components that manage their own state, then compose them to make complex UIs.",details:{head1:"Declarative",para1:"React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable and easier to debug.",head2:"Component-Based",para2:"Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DO"}},{id:3,name:"Javascript",imagePath:"./assets/js.png",version:"Vesion : 12",description:"Build encapsulated components that manage their own state, then compose them to make complex UIs.",details:{head1:"Declarative",para1:"React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable and easier to debug.",head2:"Component-Based",para2:"Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DO"}},{id:4,name:"Jquery",imagePath:"./assets/jquery.png",version:"Vesion : 7",description:"Build encapsulated components that manage their own state, then compose them to make complex UIs.",details:{head1:"Declarative",para1:"React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable and easier to debug.",head2:"Component-Based",para2:"Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DO"}},{id:5,name:"MongoDB",imagePath:"./assets/mongodb.png",version:"Vesion : 14",description:"Build encapsulated components that manage their own state, then compose them to make complex UIs.",details:{head1:"Declarative",para1:"React makes it painless to create interactive UIs. Design simple views for each state in your application, and React will efficiently update and render just the right components when your data changes. Declarative views make your code more predictable and easier to debug.",head2:"Component-Based",para2:"Build encapsulated components that manage their own state, then compose them to make complex UIs. Since component logic is written in JavaScript instead of templates, you can easily pass rich data through your app and keep state out of the DO"}}]}}function jW(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"h2"),d._uU(2),d.qZA(),d.TgZ(3,"div",2),d._UZ(4,"img",3),d.TgZ(5,"p",4),d._uU(6),d.qZA()(),d.TgZ(7,"h5"),d._uU(8),d.qZA(),d.TgZ(9,"p"),d._uU(10),d.qZA(),d.TgZ(11,"h5"),d._uU(12),d.qZA(),d.TgZ(13,"p"),d._uU(14),d.qZA()()),2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.currentCourse.name),d.xp6(2),d.Q6J("src",t.currentCourse.imagePath,d.LSH),d.xp6(2),d.Oqu(t.currentCourse.description),d.xp6(2),d.Oqu(t.currentCourse.details.head1),d.xp6(2),d.Oqu(t.currentCourse.details.para1),d.xp6(2),d.Oqu(t.currentCourse.details.head2),d.xp6(2),d.Oqu(t.currentCourse.details.para2)}}Eg.\u0275fac=function(e){return new(e||Eg)},Eg.\u0275prov=d.Yz7({token:Eg,factory:Eg.\u0275fac,providedIn:"root"});class vE{constructor(e,t){this.common=e,this.activeRoute=t}ngOnInit(){this.currentCourseId=this.activeRoute.snapshot.paramMap.get("id"),this.currentCourse=this.common.courses.find(e=>e.id==this.currentCourseId),console.log(this.currentCourseId)}}vE.\u0275fac=function(e){return new(e||vE)(d.Y36(Eg),d.Y36(vg))},vE.\u0275cmp=d.Xpm({type:vE,selectors:[["app-course-details"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"details-header","row"],[1,"col-md-5",3,"src"],[1,"col-md-7"]],template:function(e,t){1&e&&d.YNc(0,jW,15,7,"div",0),2&e&&d.Q6J("ngIf",t.currentCourse)},dependencies:[zr],styles:[".details-header[_ngcontent-%COMP%]{background-color:#eaf0ff;padding:16px;margin-bottom:16px}.details-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%;max-height:200px}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:15px 0}"]});const HW=function(n){return["course-details",n]};function $W(n,e){if(1&n&&(d.TgZ(0,"div",3)(1,"div",4)(2,"h5",5),d._uU(3),d.qZA(),d._UZ(4,"img",6),d.TgZ(5,"h6"),d._uU(6),d.qZA(),d.TgZ(7,"p",7),d._uU(8),d.qZA(),d.TgZ(9,"a",8),d._uU(10,"Show Details"),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(3),d.Oqu(t.name),d.xp6(1),d.s9C("src",t.imagePath,d.LSH),d.xp6(2),d.Oqu(t.version),d.xp6(2),d.Oqu(t.description),d.xp6(1),d.Q6J("routerLink",d.VKq(5,HW,t.id))}}class wE{constructor(e){this.service=e}ngOnInit(){this.courses=this.service.courses,console.log(this.courses)}}function GW(n,e){if(1&n&&(d.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),d._uU(4),d.qZA()()(),d.TgZ(5,"h3",3),d._uU(6),d.qZA(),d.TgZ(7,"p",3),d._uU(8),d.qZA(),d.TgZ(9,"button"),d._uU(10,"Read More"),d.qZA()()),2&n){const t=e.$implicit;d.xp6(4),d.hij(" ",t.icon," "),d.xp6(2),d.Oqu(t.title),d.xp6(2),d.Oqu(t.content)}}wE.\u0275fac=function(e){return new(e||wE)(d.Y36(Eg))},wE.\u0275cmp=d.Xpm({type:wE,selectors:[["app-courses"]],decls:3,vars:1,consts:[[1,"column","container"],[1,"m-10","row"],["class","card col-md-3",4,"ngFor","ngForOf"],[1,"card","col-md-3"],[1,"card-body"],[1,"card-title"],["alt","...",1,"card-img-top",3,"src"],[1,"card-text"],["href","#",1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1),d.YNc(2,$W,11,7,"div",2),d.qZA()()),2&e&&(d.xp6(2),d.Q6J("ngForOf",t.courses))},dependencies:[pi,Gc],styles:[".card[_ngcontent-%COMP%]{margin:10px}.card.col-md-3[_ngcontent-%COMP%]{width:31%!important}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-height:125px;max-height:125px}a[_ngcontent-%COMP%]{color:var(--bs-white)!important}"]});class EE{constructor(e){this.auth=e,this.title="Ram",this.services=[{icon:"grid_view",title:"UI UX Design",content:"Join Indias Best UI/UX Program | Learn From Top Industry Experts | Certified In UI/UX. Master the UI/UX | Work on Live Projects | Build OTT UI, Ecommerce UI and Lot More."},{icon:"web",title:"Web Development",content:"Join Indias Best UI/UX Program | Learn From Top Industry Experts | Certified In UI/UX. Master the UI/UX | Work on Live Projects | Build OTT UI, Ecommerce UI and Lot More."},{icon:"app_registration",title:"App Development",content:"Join Indias Best UI/UX Program | Learn From Top Industry Experts | Certified In UI/UX. Master the UI/UX | Work on Live Projects | Build OTT UI, Ecommerce UI and Lot More."}]}ngOnInit(){this.auth.getUserList().subscribe(e=>{this.user=e,this.title=this.user.displayName})}}EE.\u0275fac=function(e){return new(e||EE)(d.Y36(No))},EE.\u0275cmp=d.Xpm({type:EE,selectors:[["app-home"]],decls:11,vars:2,consts:[[1,"col-12"],[1,"row","home-banner"],[1,"container","home-t-section","p-20"],[1,"mb-12"],[1,"row","d-flex","p-20","justify-content-center"],["class","service-card","routerLink","../courses",4,"ngFor","ngForOf"],["routerLink","../courses",1,"service-card"],[1,"d-flex","justify-content-center"],[1,"s-icon","d-flex","justify-content-center","align-items-center"],[1,"material-icons"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d._UZ(1,"div",1),d.TgZ(2,"div",2)(3,"h3",3),d._uU(4),d.qZA(),d.TgZ(5,"h5",3),d._uU(6,"Meet our team of Creators, designers, and world class problem solvers"),d.qZA(),d.TgZ(7,"p"),d._uU(8,"In systems engineering, information systems and software engineering, the systems development life cycle, also referred to as the application development life cycle, is a process for planning, creating, testing, and deploying an information system"),d.qZA(),d.TgZ(9,"div",4),d.YNc(10,GW,11,3,"div",5),d.qZA()()()),2&e&&(d.xp6(4),d.hij("Welcome to ",t.title,""),d.xp6(6),d.Q6J("ngForOf",t.services))},dependencies:[pi,Gc],styles:[".home-t-section[_ngcontent-%COMP%]{background-color:#fff;padding:12px;color:#333;border-top-left-radius:6px;border-top-right-radius:6px;margin:-150px auto auto;min-height:400px;border:1px solid #DADCDF;box-shadow:0 2px 8px #0000000f}.home-t-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .home-t-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .home-t-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 16px}.home-banner[_ngcontent-%COMP%]{width:100%;height:400px;background:url(banner1.aee7ae2b5b21d016.jpg) -100px}.service-card[_ngcontent-%COMP%]{width:30%;margin:24px 12px 12px;padding:12px;background-color:#e6e7ec;border-radius:6px;border:1px solid #DADCDF;box-shadow:0 2px 8px #0000000f}.s-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background-color:#fdc200;color:#fff;font-size:24px;margin-bottom:12px}.s-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff}.service-card[_ngcontent-%COMP%]:hover{background-color:#1594b4;color:#fff;cursor:pointer}.service-card[_ngcontent-%COMP%]:hover   .s-icon[_ngcontent-%COMP%]{background-color:#fff;color:#1594b4}.service-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.service-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:transparent}.service-card[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{color:#fff}.service-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:0}"]});class gV{constructor(){this.email="",this.password=""}}function zW(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Email is invalid"),d.qZA())}function qW(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Email is required"),d.qZA())}function WW(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,zW,2,0,"span",25),d.YNc(2,qW,2,0,"span",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.email||null==t.validate.email.errors?null:t.validate.email.errors.email),d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.email||null==t.validate.email.errors?null:t.validate.email.errors.required)}}function ZW(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Password is invalid"),d.qZA())}function KW(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Password is required"),d.qZA())}function YW(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,ZW,2,0,"span",25),d.YNc(2,KW,2,0,"span",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.password||null==t.validate.password.errors?null:t.validate.password.errors.minLength),d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.password||null==t.validate.password.errors?null:t.validate.password.errors.required)}}class oy{constructor(e,t){this.formBuilder=e,this.auth=t,this.userObj=new gV,this.submitted=!1,this.logoutBtn=!1}ngOnInit(){this.signinValue=this.formBuilder.group({email:["",[Sr.required,Sr.email]],password:["",[Sr.minLength(5),Sr.required]]})}signIn(){this.submitted=!0,this.userObj.email=this.signinValue.value.email,this.userObj.password=this.signinValue.value.password,this.auth.login(this.userObj.email,this.userObj.password)}signinWithGoogle(){this.auth.signingoogle()}signinWithFacebook(){this.auth.signinfacebook()}get validate(){return this.signinValue.controls}}function QW(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Email is invalid"),d.qZA())}function XW(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Email is required"),d.qZA())}function JW(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,QW,2,0,"span",25),d.YNc(2,XW,2,0,"span",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.email||null==t.validate.email.errors?null:t.validate.email.errors.email),d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.email||null==t.validate.email.errors?null:t.validate.email.errors.required)}}function e4(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Password is invalid"),d.qZA())}function t4(n,e){1&n&&(d.TgZ(0,"span",26),d._uU(1,"Password is required"),d.qZA())}function n4(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,e4,2,0,"span",25),d.YNc(2,t4,2,0,"span",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.password||null==t.validate.password.errors?null:t.validate.password.errors.minLength),d.xp6(1),d.Q6J("ngIf",null==t.validate||null==t.validate.password||null==t.validate.password.errors?null:t.validate.password.errors.required)}}oy.\u0275fac=function(e){return new(e||oy)(d.Y36($T),d.Y36(No))},oy.\u0275cmp=d.Xpm({type:oy,selectors:[["app-signin"]],decls:38,vars:3,consts:[[1,"signin-container","row","d-flex","justify-content-center","align-items-center"],[1,"col-md-5","d-flex","justify-content-center","align-items-center","row"],[1,"row","col-md-10","d-flex","justify-content-center"],[1,"text-center","column"],[1,"column","text-center"],[1,"row",3,"formGroup","ngSubmit"],[1,"signin-section"],["type","email","placeholder","Email","formControlName","email",1,"row"],["class","row error-section",4,"ngIf"],["type","text","placeholder","Password","formControlName","password",1,"row"],[1,"row"],["type","submit",1,"btn","btn-primary"],[1,"column","mt-10"],["routerLink","../signup"],[1,"d-flex","row","justify-content-center","social-media"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"],[1,"btn","btn-warning",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-facebook"],["d","M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"],[1,"col-md-7","row","p-0"],[1,"bg-wrapper"],[1,"welcome-section","d-flex","row","align-items-end"],[1,"row","error-section"],["class","text-red",4,"ngIf"],[1,"text-red"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),d._uU(4,"Welcome back!"),d.qZA(),d.TgZ(5,"p",4),d._uU(6," Log in to learning"),d.qZA(),d.TgZ(7,"form",5),d.NdJ("ngSubmit",function(){return t.signIn()}),d.TgZ(8,"div",6),d._UZ(9,"input",7),d.YNc(10,WW,3,2,"div",8),d._UZ(11,"input",9),d.YNc(12,YW,3,2,"div",8),d.TgZ(13,"div",10)(14,"button",11),d._uU(15,"Sign in"),d.qZA()(),d.TgZ(16,"div",12),d._uU(17," or log in with "),d.qZA(),d.TgZ(18,"div",12),d._uU(19," Don't have an account? "),d.TgZ(20,"a",13),d._uU(21,"Sign Up"),d.qZA()()()(),d.TgZ(22,"div",14)(23,"button",15),d.NdJ("click",function(){return t.signinWithGoogle()}),d.O4$(),d.TgZ(24,"svg",16),d._UZ(25,"path",17),d.qZA(),d._uU(26," Google "),d.qZA(),d.kcU(),d.TgZ(27,"button",18),d.NdJ("click",function(){return t.signinWithFacebook()}),d.O4$(),d.TgZ(28,"svg",19),d._UZ(29,"path",20),d.qZA(),d._uU(30," Facebook "),d.qZA()()()(),d.kcU(),d.TgZ(31,"div",21)(32,"div",22)(33,"div",23)(34,"h2"),d._uU(35,"Welcome to Easy Learn!"),d.qZA(),d.TgZ(36,"h4"),d._uU(37,"Get started with your immersive learning experience"),d.qZA()()()()()),2&e&&(d.xp6(7),d.Q6J("formGroup",t.signinValue),d.xp6(3),d.Q6J("ngIf",t.submitted&&(null==t.validate||null==t.validate.email?null:t.validate.email.errors)),d.xp6(2),d.Q6J("ngIf",t.submitted&&(null==t.validate||null==t.validate.password?null:t.validate.password.errors)))},dependencies:[zr,Gc,kf,It,Id,Cd,Qs,Fy]});class IE{constructor(e,t){this.formBuilder=e,this.auth=t,this.userObj=new gV,this.submitted=!1,this.logoutBtn=!1}ngOnInit(){this.signinValue=this.formBuilder.group({email:["",[Sr.required,Sr.email]],password:["",[Sr.minLength(5),Sr.required]]})}signinWithGoogle(){this.auth.signingoogle()}signUp(){this.submitted=!0,this.userObj.email=this.signinValue.value.email,this.userObj.password=this.signinValue.value.password,this.auth.signup(this.userObj.email,this.userObj.password),this.userObj.email="",this.userObj.password=""}get validate(){return this.signinValue.controls}}function r4(n,e){1&n&&d._UZ(0,"img",4)}function i4(n,e){if(1&n&&(d.TgZ(0,"tr")(1,"td",8),d._uU(2),d.qZA(),d.TgZ(3,"td",9),d._uU(4),d.qZA(),d.TgZ(5,"td",9),d._uU(6),d.qZA(),d.TgZ(7,"td",9),d._uU(8),d.qZA(),d.TgZ(9,"td",9),d._uU(10),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.id),d.xp6(2),d.Oqu(t.name),d.xp6(2),d.Oqu(t.email),d.xp6(2),d.Oqu(t.gender),d.xp6(2),d.Oqu(t.status)}}IE.\u0275fac=function(e){return new(e||IE)(d.Y36($T),d.Y36(No))},IE.\u0275cmp=d.Xpm({type:IE,selectors:[["app-signup"]],decls:36,vars:3,consts:[[1,"signin-container","row","d-flex","justify-content-center","align-items-center"],[1,"col-md-5","d-flex","justify-content-center","align-items-center","row"],[1,"row","col-md-10","d-flex","justify-content-center"],[1,"text-center","column"],[1,"column","text-center"],[1,"row",3,"formGroup"],[1,"signin-section"],["type","email","placeholder","Email","formControlName","email",1,"row"],["class","row error-section",4,"ngIf"],["type","text","placeholder","Password","formControlName","password",1,"row"],[1,"row"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"column","mt-10"],["routerLink","/signin"],[1,"d-flex","row","justify-content-center","social-media"],[1,"btn","btn-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"],[1,"btn","btn-warning"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-facebook"],["d","M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"],[1,"col-md-7","row","p-0"],[1,"bg-wrapper"],[1,"welcome-section","d-flex","row","align-items-end"],[1,"row","error-section"],["class","text-red",4,"ngIf"],[1,"text-red"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),d._uU(4,"Welcome back!"),d.qZA(),d.TgZ(5,"p",4),d._uU(6," Sign up to learning"),d.qZA(),d.TgZ(7,"form",5)(8,"div",6),d._UZ(9,"input",7),d.YNc(10,JW,3,2,"div",8),d._UZ(11,"input",9),d.YNc(12,n4,3,2,"div",8),d.TgZ(13,"div",10)(14,"button",11),d.NdJ("click",function(){return t.signUp()}),d._uU(15,"Sign up"),d.qZA()(),d.TgZ(16,"div",12),d._uU(17," Already a user? "),d.TgZ(18,"a",13),d._uU(19,"Sign In"),d.qZA()()()(),d.TgZ(20,"div",14)(21,"button",15),d.NdJ("click",function(){return t.signinWithGoogle()}),d.O4$(),d.TgZ(22,"svg",16),d._UZ(23,"path",17),d.qZA(),d._uU(24," Google "),d.qZA(),d.kcU(),d.TgZ(25,"button",18),d.O4$(),d.TgZ(26,"svg",19),d._UZ(27,"path",20),d.qZA(),d._uU(28," Facebook "),d.qZA()()()(),d.kcU(),d.TgZ(29,"div",21)(30,"div",22)(31,"div",23)(32,"h2"),d._uU(33,"Welcome to Easy Learn!"),d.qZA(),d.TgZ(34,"h4"),d._uU(35,"Get started with your immersive learning experience"),d.qZA()()()()()),2&e&&(d.xp6(7),d.Q6J("formGroup",t.signinValue),d.xp6(3),d.Q6J("ngIf",t.submitted&&(null==t.validate||null==t.validate.email?null:t.validate.email.errors)),d.xp6(2),d.Q6J("ngIf",t.submitted&&(null==t.validate||null==t.validate.password?null:t.validate.password.errors)))},dependencies:[zr,Gc,kf,It,Id,Cd,Qs,Fy]});const s4=function(n){return{itemsPerPage:15,currentPage:n}};function o4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"table",5)(2,"thead")(3,"th"),d._uU(4,"Id"),d.qZA(),d.TgZ(5,"th"),d._uU(6,"Name"),d.qZA(),d.TgZ(7,"th"),d._uU(8,"Email"),d.qZA(),d.TgZ(9,"th"),d._uU(10,"Gender"),d.qZA(),d.TgZ(11,"th"),d._uU(12,"Status"),d.qZA()(),d.YNc(13,i4,11,5,"tr",6),d.ALo(14,"paginate"),d.qZA(),d.TgZ(15,"pagination-controls",7),d.NdJ("pageChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.p=i)}),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(13),d.Q6J("ngForOf",d.xi3(14,1,t.users,d.VKq(4,s4,t.p)))}}class CE{constructor(e){this.auth=e}ngOnInit(){this.auth.getUnivercityData().subscribe(e=>{this.users=e})}}function a4(n,e){if(1&n&&(d.TgZ(0,"div",4)(1,"p",9),d._uU(2,"We have sent a confirmation email to "),d.TgZ(3,"strong"),d._uU(4),d.qZA(),d._uU(5,"."),d.qZA(),d.TgZ(6,"p",9),d._uU(7,"Please check your email and click on the link to verfiy your email address."),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}CE.\u0275fac=function(e){return new(e||CE)(d.Y36(No))},CE.\u0275cmp=d.Xpm({type:CE,selectors:[["app-user-details"]],decls:4,vars:2,consts:[[1,"container","p-20"],[1,"d-flex","justify-content-center","loader"],["src","././assets/images/loader.gif",4,"ngIf"],[4,"ngIf"],["src","././assets/images/loader.gif"],[1,"container"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end",3,"pageChange"],["width","10%"],["width","20%"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1),d.YNc(2,r4,1,0,"img",2),d.qZA(),d.YNc(3,o4,16,6,"div",3),d.qZA()),2&e&&(d.xp6(2),d.Q6J("ngIf",!t.users),d.xp6(1),d.Q6J("ngIf",t.users))},dependencies:[pi,zr,uS,sS],styles:["table[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:solid 1px #333}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px}pagination-controls[_ngcontent-%COMP%]{width:100%;height:40px;position:fixed;bottom:0;right:0;background-color:#dedede;font-size:14px;font-weight:700;padding:8px}pagination-controls[_ngcontent-%COMP%]   pagination-template[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{margin-top:8px!important}.loader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:69%}"]});class bE{constructor(e){this.authService=e}}bE.\u0275fac=function(e){return new(e||bE)(d.Y36(No))},bE.\u0275cmp=d.Xpm({type:bE,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Thank You for Registering"),d.qZA(),d.YNc(5,a4,8,1,"div",3),d.TgZ(6,"div",4)(7,"button",5),d.NdJ("click",function(){return t.authService.sendEmailForVerification()}),d._UZ(8,"i",6),d._uU(9," Resend Verification Email "),d.qZA()()(),d.TgZ(10,"div",7)(11,"span"),d._uU(12,"Go back to?"),d.TgZ(13,"span",8),d._uU(14," Sign in"),d.qZA()()()()()),2&e&&(d.xp6(5),d.Q6J("ngIf",t.authService.userData))},dependencies:[zr,Gc]});class ay{constructor(e,t){this.router=e,this.authService=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["./signin"]),!0}}ay.\u0275fac=function(e){return new(e||ay)(d.LFG(ws),d.LFG(No))},ay.\u0275prov=d.Yz7({token:ay,factory:ay.\u0275fac,providedIn:"root"});const u4=[{path:"",component:oy},{path:"signin",component:oy},{path:"signup",component:IE},{path:"home",component:EE,canActivate:[ay]},{path:"aboutus",component:yE},{path:"courses",component:wE},{path:"courses/course-details/:id",component:vE},{path:"verify-email",component:bE},{path:"user-details",component:CE}];class uy{}function l4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",17),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.signin())}),d._uU(1,"Log in"),d.qZA()}}function c4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",17),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.auth.signout())}),d._uU(1,"Log out"),d.qZA()}}uy.\u0275fac=function(e){return new(e||uy)},uy.\u0275mod=d.oAB({type:uy}),uy.\u0275inj=d.cJS({imports:[hV.forRoot(u4),hV]});class DE{constructor(e,t){this.router=e,this.auth=t,this.isLoggedIn=!1,this.logStatus=!1,this.imagePath="././assets/images/blank-profile.png",this.statusName=!1}ngOnInit(){console.log(this.auth.isLoggedIn),this.auth.getUserList().subscribe(e=>{console.log(e),this.users=e,console.log(this.users),this.userName=this.users.displayName,this.imagePath=this.users.photoURL,"Ram"!=this.userName&&(this.logStatus=!0)})}signin(){this.router.navigate(["/signin"])}signOut(){this.auth.signout(),this.router.navigate(["./signin"]),this.statusName=!0}}DE.\u0275fac=function(e){return new(e||DE)(d.Y36(ws),d.Y36(No))},DE.\u0275cmp=d.Xpm({type:DE,selectors:[["app-header"]],decls:26,vars:3,consts:[[1,"navbar","navbar-expand-lg","bg-primary","navbar-fixed-top"],[1,"container-fluid"],[1,"column"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active","aria-current","page","routerLink","/home",1,"nav-link"],["routerLinkActive","active","aria-current","page","routerLink","/aboutus",1,"nav-link"],["routerLinkActive","active","routerLink","/courses",1,"nav-link"],["routerLinkActive","active","routerLink","/user-details",1,"nav-link"],[1,"mr-12"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"profile-pic"],[3,"src"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),d._uU(4,"Easy to Learn"),d.qZA()(),d.TgZ(5,"button",4),d._UZ(6,"span",5),d.qZA(),d.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),d._uU(11,"Home"),d.qZA()(),d.TgZ(12,"li",8)(13,"a",10),d._uU(14,"Aboutus"),d.qZA()(),d.TgZ(15,"li",8)(16,"a",11),d._uU(17,"Courses"),d.qZA()(),d.TgZ(18,"li",8)(19,"a",12),d._uU(20,"User Details"),d.qZA()()(),d.TgZ(21,"div",13),d.YNc(22,l4,2,0,"button",14),d.YNc(23,c4,2,0,"button",14),d.qZA(),d.TgZ(24,"div",15),d._UZ(25,"img",16),d.qZA()()()()),2&e&&(d.xp6(22),d.Q6J("ngIf",!t.auth.isLoggedIn),d.xp6(1),d.Q6J("ngIf",t.auth.isLoggedIn),d.xp6(2),d.s9C("src",t.imagePath,d.LSH))},dependencies:[zr,Gc,iV],styles:[".navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:var(--bs-white)!important}.navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .navbar-nav[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:var(--bs-white)!important;border-bottom:solid 3px #fff;padding-bottom:10px}.nav-link[_ngcontent-%COMP%]{color:var(--bs-white)!important;margin:0 15px}.nav-link[_ngcontent-%COMP%]:hover{font-weight:700}.btn-outline-success[_ngcontent-%COMP%]{color:var(--bs-white)}.profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;border-radius:50%}"]});class TE{constructor(){this.title="angularPoc"}}TE.\u0275fac=function(e){return new(e||TE)},TE.\u0275cmp=d.Xpm({type:TE,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&d._UZ(0,"app-header")(1,"router-outlet")},dependencies:[ON,DE]});class ly{constructor(){}intercept(e,t){return t.handle(e)}}ly.\u0275fac=function(e){return new(e||ly)},ly.\u0275prov=d.Yz7({token:ly,factory:ly.\u0275fac});class cy{}cy.\u0275fac=function(e){return new(e||cy)},cy.\u0275mod=d.oAB({type:cy,bootstrap:[TE]}),cy.\u0275inj=d.cJS({providers:[{provide:hI,useClass:ly,multi:!0}],imports:[Pg,uy,rI,iI,yo,lS,ui.hO.initializeApp({apiKey:"AIzaSyBAaZfX0lhVBR2MPbUyPecxxbloeaKwRY0",authDomain:"angular-bootstrap-e3902.firebaseapp.com",projectId:"angular-bootstrap-e3902",storageBucket:"angular-bootstrap-e3902.appspot.com",messagingSenderId:"975407337161",appId:"1:975407337161:web:343bee998e006126144718"}),eC,fj,r$,g6]}),Zs().bootstrapModule(cy).catch(n=>console.error(n))},9751:(ht,Se,V)=>{V.d(Se,{y:()=>fe});var d=V(930),$=V(727),k=V(8822),se=V(9635),ae=V(2416),ue=V(576),ye=V(2806);let fe=(()=>{class J{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ge=new J;return Ge.source=this,Ge.operator=Re,Ge}subscribe(Re,Ge,rt){const me=function Z(J){return J&&J instanceof d.Lv||function q(J){return J&&(0,ue.m)(J.next)&&(0,ue.m)(J.error)&&(0,ue.m)(J.complete)}(J)&&(0,$.Nn)(J)}(Re)?Re:new d.Hp(Re,Ge,rt);return(0,ye.x)(()=>{const{operator:Te,source:De}=this;me.add(Te?Te.call(me,De):De?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ge){Re.error(Ge)}}forEach(Re,Ge){return new(Ge=ge(Ge))((rt,me)=>{const Te=new d.Hp({next:De=>{try{Re(De)}catch(Pe){me(Pe),Te.unsubscribe()}},error:me,complete:rt});this.subscribe(Te)})}_subscribe(Re){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Re)}[k.L](){return this}pipe(...Re){return(0,se.U)(Re)(this)}toPromise(Re){return new(Re=ge(Re))((Ge,rt)=>{let me;this.subscribe(Te=>me=Te,Te=>rt(Te),()=>Ge(me))})}}return J.create=Be=>new J(Be),J})();function ge(J){var Be;return null!==(Be=J??ae.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ht,Se,V)=>{V.d(Se,{x:()=>ye});var d=V(9751),$=V(727);const se=(0,V(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=V(8737),ue=V(2806);let ye=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const J=new fe(this,this);return J.operator=Z,J}_throwIfClosed(){if(this.closed)throw new se}next(Z){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(Z)}})}error(Z){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:J}=this;for(;J.length;)J.shift().error(Z)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:J,isStopped:Be,observers:Re}=this;return J||Be?$.Lc:(this.currentObservers=null,Re.push(Z),new $.w0(()=>{this.currentObservers=null,(0,ae.P)(Re,Z)}))}_checkFinalizedStatuses(Z){const{hasError:J,thrownError:Be,isStopped:Re}=this;J?Z.error(Be):Re&&Z.complete()}asObservable(){const Z=new d.y;return Z.source=this,Z}}return ge.create=(q,Z)=>new fe(q,Z),ge})();class fe extends ye{constructor(q,Z){super(),this.destination=q,this.source=Z}next(q){var Z,J;null===(J=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===J||J.call(Z,q)}error(q){var Z,J;null===(J=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===J||J.call(Z,q)}complete(){var q,Z;null===(Z=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===Z||Z.call(q)}_subscribe(q){var Z,J;return null!==(J=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(q))&&void 0!==J?J:$.Lc}}},930:(ht,Se,V)=>{V.d(Se,{Hp:()=>rt,Lv:()=>J});var d=V(576),$=V(727),k=V(2416),se=V(7849),ae=V(5032);const ue=ge("C",void 0,void 0);function ge(Oe,Me,Ae){return{kind:Oe,value:Me,error:Ae}}var q=V(3410),Z=V(2806);class J extends $.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,$.Nn)(Me)&&Me.add(this)):this.destination=Pe}static create(Me,Ae,$e){return new rt(Me,Ae,$e)}next(Me){this.isStopped?De(function fe(Oe){return ge("N",Oe,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?De(function ye(Oe){return ge("E",void 0,Oe)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?De(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Re(Oe,Me){return Be.call(Oe,Me)}class Ge{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Me)}catch($e){me($e)}}error(Me){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Me)}catch($e){me($e)}else me(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Ae){me(Ae)}}}class rt extends J{constructor(Me,Ae,$e){let ee;if(super(),(0,d.m)(Me)||!Me)ee={next:Me??void 0,error:Ae??void 0,complete:$e??void 0};else{let ce;this&&k.v.useDeprecatedNextContext?(ce=Object.create(Me),ce.unsubscribe=()=>this.unsubscribe(),ee={next:Me.next&&Re(Me.next,ce),error:Me.error&&Re(Me.error,ce),complete:Me.complete&&Re(Me.complete,ce)}):ee=Me}this.destination=new Ge(ee)}}function me(Oe){k.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Oe):(0,se.h)(Oe)}function De(Oe,Me){const{onStoppedNotification:Ae}=k.v;Ae&&q.z.setTimeout(()=>Ae(Oe,Me))}const Pe={closed:!0,next:ae.Z,error:function Te(Oe){throw Oe},complete:ae.Z}},727:(ht,Se,V)=>{V.d(Se,{Lc:()=>ue,w0:()=>ae,Nn:()=>ye});var d=V(576);const k=(0,V(3888).d)(ge=>function(Z){ge(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((J,Be)=>`${Be+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var se=V(8737);class ae{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Re of Z)Re.remove(this);else Z.remove(this);const{initialTeardown:J}=this;if((0,d.m)(J))try{J()}catch(Re){q=Re instanceof k?Re.errors:[Re]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Re of Be)try{fe(Re)}catch(Ge){q=q??[],Ge instanceof k?q=[...q,...Ge.errors]:q.push(Ge)}}if(q)throw new k(q)}}add(q){var Z;if(q&&q!==this)if(this.closed)fe(q);else{if(q instanceof ae){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(q)}}_hasParent(q){const{_parentage:Z}=this;return Z===q||Array.isArray(Z)&&Z.includes(q)}_addParent(q){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(q),Z):Z?[Z,q]:q}_removeParent(q){const{_parentage:Z}=this;Z===q?this._parentage=null:Array.isArray(Z)&&(0,se.P)(Z,q)}remove(q){const{_finalizers:Z}=this;Z&&(0,se.P)(Z,q),q instanceof ae&&q._removeParent(this)}}ae.EMPTY=(()=>{const ge=new ae;return ge.closed=!0,ge})();const ue=ae.EMPTY;function ye(ge){return ge instanceof ae||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function fe(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2416:(ht,Se,V)=>{V.d(Se,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Se,V)=>{V.d(Se,{E:()=>$});const $=new(V(9751).y)(ae=>ae.complete())},8996:(ht,Se,V)=>{V.d(Se,{D:()=>Me});var d=V(8421),$=V(5363),k=V(9468),ue=V(9751),fe=V(2202),ge=V(576),q=V(9672);function J(Ae,$e){if(!Ae)throw new Error("Iterable cannot be null");return new ue.y(ee=>{(0,q.f)(ee,$e,()=>{const ce=Ae[Symbol.asyncIterator]();(0,q.f)(ee,$e,()=>{ce.next().then(Ie=>{Ie.done?ee.complete():ee.next(Ie.value)})},0,!0)})})}var Be=V(3670),Re=V(8239),Ge=V(1144),rt=V(6495),me=V(2206),Te=V(4532),De=V(3260);function Me(Ae,$e){return $e?function Oe(Ae,$e){if(null!=Ae){if((0,Be.c)(Ae))return function se(Ae,$e){return(0,d.Xf)(Ae).pipe((0,k.R)($e),(0,$.Q)($e))}(Ae,$e);if((0,Ge.z)(Ae))return function ye(Ae,$e){return new ue.y(ee=>{let ce=0;return $e.schedule(function(){ce===Ae.length?ee.complete():(ee.next(Ae[ce++]),ee.closed||this.schedule())})})}(Ae,$e);if((0,Re.t)(Ae))return function ae(Ae,$e){return(0,d.Xf)(Ae).pipe((0,k.R)($e),(0,$.Q)($e))}(Ae,$e);if((0,me.D)(Ae))return J(Ae,$e);if((0,rt.T)(Ae))return function Z(Ae,$e){return new ue.y(ee=>{let ce;return(0,q.f)(ee,$e,()=>{ce=Ae[fe.h](),(0,q.f)(ee,$e,()=>{let Ie,Q;try{({value:Ie,done:Q}=ce.next())}catch(X){return void ee.error(X)}Q?ee.complete():ee.next(Ie)},0,!0)}),()=>(0,ge.m)(ce?.return)&&ce.return()})}(Ae,$e);if((0,De.L)(Ae))return function Pe(Ae,$e){return J((0,De.Q)(Ae),$e)}(Ae,$e)}throw(0,Te.z)(Ae)}(Ae,$e):(0,d.Xf)(Ae)}},8421:(ht,Se,V)=>{V.d(Se,{Xf:()=>Be});var d=V(655),$=V(1144),k=V(8239),se=V(9751),ae=V(3670),ue=V(2206),ye=V(4532),fe=V(6495),ge=V(3260),q=V(576),Z=V(7849),J=V(8822);function Be(Oe){if(Oe instanceof se.y)return Oe;if(null!=Oe){if((0,ae.c)(Oe))return function Re(Oe){return new se.y(Me=>{const Ae=Oe[J.L]();if((0,q.m)(Ae.subscribe))return Ae.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,$.z)(Oe))return function Ge(Oe){return new se.y(Me=>{for(let Ae=0;Ae<Oe.length&&!Me.closed;Ae++)Me.next(Oe[Ae]);Me.complete()})}(Oe);if((0,k.t)(Oe))return function rt(Oe){return new se.y(Me=>{Oe.then(Ae=>{Me.closed||(Me.next(Ae),Me.complete())},Ae=>Me.error(Ae)).then(null,Z.h)})}(Oe);if((0,ue.D)(Oe))return Te(Oe);if((0,fe.T)(Oe))return function me(Oe){return new se.y(Me=>{for(const Ae of Oe)if(Me.next(Ae),Me.closed)return;Me.complete()})}(Oe);if((0,ge.L)(Oe))return function De(Oe){return Te((0,ge.Q)(Oe))}(Oe)}throw(0,ye.z)(Oe)}function Te(Oe){return new se.y(Me=>{(function Pe(Oe,Me){var Ae,$e,ee,ce;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,d.KL)(Oe);!($e=yield Ae.next()).done;)if(Me.next($e.value),Me.closed)return}catch(Ie){ee={error:Ie}}finally{try{$e&&!$e.done&&(ce=Ae.return)&&(yield ce.call(Ae))}finally{if(ee)throw ee.error}}Me.complete()})})(Oe,Me).catch(Ae=>Me.error(Ae))})}},6451:(ht,Se,V)=>{V.d(Se,{T:()=>ue});var d=V(8189),$=V(8421),k=V(515),se=V(7669),ae=V(8996);function ue(...ye){const fe=(0,se.yG)(ye),ge=(0,se._6)(ye,1/0),q=ye;return q.length?1===q.length?(0,$.Xf)(q[0]):(0,d.J)(ge)((0,ae.D)(q,fe)):k.E}},5403:(ht,Se,V)=>{V.d(Se,{x:()=>$});var d=V(930);function $(se,ae,ue,ye,fe){return new k(se,ae,ue,ye,fe)}class k extends d.Lv{constructor(ae,ue,ye,fe,ge,q){super(ae),this.onFinalize=ge,this.shouldUnsubscribe=q,this._next=ue?function(Z){try{ue(Z)}catch(J){ae.error(J)}}:super._next,this._error=fe?function(Z){try{fe(Z)}catch(J){ae.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(Z){ae.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(ht,Se,V)=>{V.d(Se,{U:()=>k});var d=V(4482),$=V(5403);function k(se,ae){return(0,d.e)((ue,ye)=>{let fe=0;ue.subscribe((0,$.x)(ye,ge=>{ye.next(se.call(ae,ge,fe++))}))})}},8189:(ht,Se,V)=>{V.d(Se,{J:()=>k});var d=V(5577),$=V(4671);function k(se=1/0){return(0,d.z)($.y,se)}},5577:(ht,Se,V)=>{V.d(Se,{z:()=>fe});var d=V(4004),$=V(8421),k=V(4482),se=V(9672),ae=V(5403),ye=V(576);function fe(ge,q,Z=1/0){return(0,ye.m)(q)?fe((J,Be)=>(0,d.U)((Re,Ge)=>q(J,Re,Be,Ge))((0,$.Xf)(ge(J,Be))),Z):("number"==typeof q&&(Z=q),(0,k.e)((J,Be)=>function ue(ge,q,Z,J,Be,Re,Ge,rt){const me=[];let Te=0,De=0,Pe=!1;const Oe=()=>{Pe&&!me.length&&!Te&&q.complete()},Me=$e=>Te<J?Ae($e):me.push($e),Ae=$e=>{Re&&q.next($e),Te++;let ee=!1;(0,$.Xf)(Z($e,De++)).subscribe((0,ae.x)(q,ce=>{Be?.(ce),Re?Me(ce):q.next(ce)},()=>{ee=!0},void 0,()=>{if(ee)try{for(Te--;me.length&&Te<J;){const ce=me.shift();Ge?(0,se.f)(q,Ge,()=>Ae(ce)):Ae(ce)}Oe()}catch(ce){q.error(ce)}}))};return ge.subscribe((0,ae.x)(q,Me,()=>{Pe=!0,Oe()})),()=>{rt?.()}}(J,Be,ge,Z)))}},5363:(ht,Se,V)=>{V.d(Se,{Q:()=>se});var d=V(9672),$=V(4482),k=V(5403);function se(ae,ue=0){return(0,$.e)((ye,fe)=>{ye.subscribe((0,k.x)(fe,ge=>(0,d.f)(fe,ae,()=>fe.next(ge),ue),()=>(0,d.f)(fe,ae,()=>fe.complete(),ue),ge=>(0,d.f)(fe,ae,()=>fe.error(ge),ue)))})}},3099:(ht,Se,V)=>{V.d(Se,{B:()=>ae});var d=V(8421),$=V(7579),k=V(930),se=V(4482);function ae(ye={}){const{connector:fe=(()=>new $.x),resetOnError:ge=!0,resetOnComplete:q=!0,resetOnRefCountZero:Z=!0}=ye;return J=>{let Be,Re,Ge,rt=0,me=!1,Te=!1;const De=()=>{Re?.unsubscribe(),Re=void 0},Pe=()=>{De(),Be=Ge=void 0,me=Te=!1},Oe=()=>{const Me=Be;Pe(),Me?.unsubscribe()};return(0,se.e)((Me,Ae)=>{rt++,!Te&&!me&&De();const $e=Ge=Ge??fe();Ae.add(()=>{rt--,0===rt&&!Te&&!me&&(Re=ue(Oe,Z))}),$e.subscribe(Ae),!Be&&rt>0&&(Be=new k.Hp({next:ee=>$e.next(ee),error:ee=>{Te=!0,De(),Re=ue(Pe,ge,ee),$e.error(ee)},complete:()=>{me=!0,De(),Re=ue(Pe,q),$e.complete()}}),(0,d.Xf)(Me).subscribe(Be))})(J)}}function ue(ye,fe,...ge){if(!0===fe)return void ye();if(!1===fe)return;const q=new k.Hp({next:()=>{q.unsubscribe(),ye()}});return fe(...ge).subscribe(q)}},9468:(ht,Se,V)=>{V.d(Se,{R:()=>$});var d=V(4482);function $(k,se=0){return(0,d.e)((ae,ue)=>{ue.add(k.schedule(()=>ae.subscribe(ue),se))})}},8505:(ht,Se,V)=>{V.d(Se,{b:()=>ae});var d=V(576),$=V(4482),k=V(5403),se=V(4671);function ae(ue,ye,fe){const ge=(0,d.m)(ue)||ye||fe?{next:ue,error:ye,complete:fe}:ue;return ge?(0,$.e)((q,Z)=>{var J;null===(J=ge.subscribe)||void 0===J||J.call(ge);let Be=!0;q.subscribe((0,k.x)(Z,Re=>{var Ge;null===(Ge=ge.next)||void 0===Ge||Ge.call(ge,Re),Z.next(Re)},()=>{var Re;Be=!1,null===(Re=ge.complete)||void 0===Re||Re.call(ge),Z.complete()},Re=>{var Ge;Be=!1,null===(Ge=ge.error)||void 0===Ge||Ge.call(ge,Re),Z.error(Re)},()=>{var Re,Ge;Be&&(null===(Re=ge.unsubscribe)||void 0===Re||Re.call(ge)),null===(Ge=ge.finalize)||void 0===Ge||Ge.call(ge)}))}):se.y}},4408:(ht,Se,V)=>{V.d(Se,{o:()=>ae});var d=V(727);class $ extends d.w0{constructor(ye,fe){super()}schedule(ye,fe=0){return this}}const k={setInterval(ue,ye,...fe){const{delegate:ge}=k;return ge?.setInterval?ge.setInterval(ue,ye,...fe):setInterval(ue,ye,...fe)},clearInterval(ue){const{delegate:ye}=k;return(ye?.clearInterval||clearInterval)(ue)},delegate:void 0};var se=V(8737);class ae extends ${constructor(ye,fe){super(ye,fe),this.scheduler=ye,this.work=fe,this.pending=!1}schedule(ye,fe=0){var ge;if(this.closed)return this;this.state=ye;const q=this.id,Z=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(Z,q,fe)),this.pending=!0,this.delay=fe,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(Z,this.id,fe),this}requestAsyncId(ye,fe,ge=0){return k.setInterval(ye.flush.bind(ye,this),ge)}recycleAsyncId(ye,fe,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return fe;null!=fe&&k.clearInterval(fe)}execute(ye,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ye,fe);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,fe){let q,ge=!1;try{this.work(ye)}catch(Z){ge=!0,q=Z||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ye,scheduler:fe}=this,{actions:ge}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ge,this),null!=ye&&(this.id=this.recycleAsyncId(fe,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Se,V)=>{V.d(Se,{v:()=>k});var d=V(6063);class ${constructor(ae,ue=$.now){this.schedulerActionCtor=ae,this.now=ue}schedule(ae,ue=0,ye){return new this.schedulerActionCtor(this,ae).schedule(ye,ue)}}$.now=d.l.now;class k extends ${constructor(ae,ue=$.now){super(ae,ue),this.actions=[],this._active=!1}flush(ae){const{actions:ue}=this;if(this._active)return void ue.push(ae);let ye;this._active=!0;do{if(ye=ae.execute(ae.state,ae.delay))break}while(ae=ue.shift());if(this._active=!1,ye){for(;ae=ue.shift();)ae.unsubscribe();throw ye}}}},4986:(ht,Se,V)=>{V.d(Se,{z:()=>k});var d=V(4408);const k=new(V(7565).v)(d.o)},6063:(ht,Se,V)=>{V.d(Se,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ht,Se,V)=>{V.d(Se,{z:()=>d});const d={setTimeout($,k,...se){const{delegate:ae}=d;return ae?.setTimeout?ae.setTimeout($,k,...se):setTimeout($,k,...se)},clearTimeout($){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(ht,Se,V)=>{V.d(Se,{h:()=>$});const $=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Se,V)=>{V.d(Se,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,Se,V)=>{V.d(Se,{_6:()=>ue,jO:()=>se,yG:()=>ae});var d=V(576);function k(ye){return ye[ye.length-1]}function se(ye){return(0,d.m)(k(ye))?ye.pop():void 0}function ae(ye){return function $(ye){return ye&&(0,d.m)(ye.schedule)}(k(ye))?ye.pop():void 0}function ue(ye,fe){return"number"==typeof k(ye)?ye.pop():fe}},8737:(ht,Se,V)=>{function d($,k){if($){const se=$.indexOf(k);0<=se&&$.splice(se,1)}}V.d(Se,{P:()=>d})},3888:(ht,Se,V)=>{function d($){const se=$(ae=>{Error.call(ae),ae.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}V.d(Se,{d:()=>d})},2806:(ht,Se,V)=>{V.d(Se,{O:()=>se,x:()=>k});var d=V(2416);let $=null;function k(ae){if(d.v.useDeprecatedSynchronousErrorHandling){const ue=!$;if(ue&&($={errorThrown:!1,error:null}),ae(),ue){const{errorThrown:ye,error:fe}=$;if($=null,ye)throw fe}}else ae()}function se(ae){d.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ae)}},9672:(ht,Se,V)=>{function d($,k,se,ae=0,ue=!1){const ye=k.schedule(function(){se(),ue?$.add(this.schedule(null,ae)):this.unsubscribe()},ae);if($.add(ye),!ue)return ye}V.d(Se,{f:()=>d})},4671:(ht,Se,V)=>{function d($){return $}V.d(Se,{y:()=>d})},1144:(ht,Se,V)=>{V.d(Se,{z:()=>d});const d=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(ht,Se,V)=>{V.d(Se,{D:()=>$});var d=V(576);function $(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(ht,Se,V)=>{function d($){return"function"==typeof $}V.d(Se,{m:()=>d})},3670:(ht,Se,V)=>{V.d(Se,{c:()=>k});var d=V(8822),$=V(576);function k(se){return(0,$.m)(se[d.L])}},6495:(ht,Se,V)=>{V.d(Se,{T:()=>k});var d=V(2202),$=V(576);function k(se){return(0,$.m)(se?.[d.h])}},8239:(ht,Se,V)=>{V.d(Se,{t:()=>$});var d=V(576);function $(k){return(0,d.m)(k?.then)}},3260:(ht,Se,V)=>{V.d(Se,{L:()=>se,Q:()=>k});var d=V(655),$=V(576);function k(ae){return(0,d.FC)(this,arguments,function*(){const ye=ae.getReader();try{for(;;){const{value:fe,done:ge}=yield(0,d.qq)(ye.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(fe)}}finally{ye.releaseLock()}})}function se(ae){return(0,$.m)(ae?.getReader)}},4482:(ht,Se,V)=>{V.d(Se,{A:()=>$,e:()=>k});var d=V(576);function $(se){return(0,d.m)(se?.lift)}function k(se){return ae=>{if($(ae))return ae.lift(function(ue){try{return se(ue,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,Se,V)=>{function d(){}V.d(Se,{Z:()=>d})},9635:(ht,Se,V)=>{V.d(Se,{U:()=>k,z:()=>$});var d=V(4671);function $(...se){return k(se)}function k(se){return 0===se.length?d.y:1===se.length?se[0]:function(ue){return se.reduce((ye,fe)=>fe(ye),ue)}}},7849:(ht,Se,V)=>{V.d(Se,{h:()=>k});var d=V(2416),$=V(3410);function k(se){$.z.setTimeout(()=>{const{onUnhandledError:ae}=d.v;if(!ae)throw se;ae(se)})}},4532:(ht,Se,V)=>{function d($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Se,{z:()=>d})},655:(ht,Se,V)=>{function se(Q,X){var he={};for(var oe in Q)Object.prototype.hasOwnProperty.call(Q,oe)&&X.indexOf(oe)<0&&(he[oe]=Q[oe]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(oe=Object.getOwnPropertySymbols(Q);Le<oe.length;Le++)X.indexOf(oe[Le])<0&&Object.prototype.propertyIsEnumerable.call(Q,oe[Le])&&(he[oe[Le]]=Q[oe[Le]])}return he}function fe(Q,X,he,oe){return new(he||(he=Promise))(function(Ue,_t){function sn(Bt){try{bt(oe.next(Bt))}catch(Et){_t(Et)}}function mn(Bt){try{bt(oe.throw(Bt))}catch(Et){_t(Et)}}function bt(Bt){Bt.done?Ue(Bt.value):function Le(Ue){return Ue instanceof he?Ue:new he(function(_t){_t(Ue)})}(Bt.value).then(sn,mn)}bt((oe=oe.apply(Q,X||[])).next())})}function me(Q){return this instanceof me?(this.v=Q,this):new me(Q)}function Te(Q,X,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,oe=he.apply(Q,X||[]),Ue=[];return Le={},_t("next"),_t("throw"),_t("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function _t(Xt){oe[Xt]&&(Le[Xt]=function(cr){return new Promise(function(Wt,wt){Ue.push([Xt,cr,Wt,wt])>1||sn(Xt,cr)})})}function sn(Xt,cr){try{!function mn(Xt){Xt.value instanceof me?Promise.resolve(Xt.value.v).then(bt,Bt):Et(Ue[0][2],Xt)}(oe[Xt](cr))}catch(Wt){Et(Ue[0][3],Wt)}}function bt(Xt){sn("next",Xt)}function Bt(Xt){sn("throw",Xt)}function Et(Xt,cr){Xt(cr),Ue.shift(),Ue.length&&sn(Ue[0][0],Ue[0][1])}}function Pe(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,X=Q[Symbol.asyncIterator];return X?X.call(Q):(Q=function J(Q){var X="function"==typeof Symbol&&Symbol.iterator,he=X&&Q[X],oe=0;if(he)return he.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&oe>=Q.length&&(Q=void 0),{value:Q&&Q[oe++],done:!Q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),he={},oe("next"),oe("throw"),oe("return"),he[Symbol.asyncIterator]=function(){return this},he);function oe(Ue){he[Ue]=Q[Ue]&&function(_t){return new Promise(function(sn,mn){!function Le(Ue,_t,sn,mn){Promise.resolve(mn).then(function(bt){Ue({value:bt,done:sn})},_t)}(sn,mn,(_t=Q[Ue](_t)).done,_t.value)})}}}V.d(Se,{FC:()=>Te,KL:()=>Pe,_T:()=>se,mG:()=>fe,qq:()=>me})},4650:(ht,Se,V)=>{V.d(Se,{$8M:()=>Yl,$WT:()=>Kn,$Z:()=>pS,AFp:()=>Fi,ALo:()=>gs,AaK:()=>fe,AsE:()=>dp,BQk:()=>fc,CHM:()=>af,CRH:()=>cu,CZH:()=>ga,CqO:()=>aC,D6c:()=>ax,EJc:()=>vb,EpF:()=>sC,F4k:()=>oC,FYo:()=>WT,FiY:()=>ra,GfV:()=>fI,Gpc:()=>Z,JOm:()=>Ps,KtG:()=>Qc,LFG:()=>He,LSH:()=>JE,Lbi:()=>O0,Lck:()=>Ve,MAs:()=>rC,MMx:()=>mt,MR2:()=>Zi,NdJ:()=>yv,O4$:()=>Hl,OlP:()=>Qt,Oqu:()=>Yd,P3R:()=>$y,PXZ:()=>Ib,Q6J:()=>iC,QGY:()=>rp,Qsj:()=>rP,R0b:()=>ts,RDi:()=>RT,Rgc:()=>mh,SBq:()=>om,Sil:()=>bh,Suo:()=>yh,TTD:()=>Vo,TgZ:()=>Xs,VKq:()=>vt,X6Q:()=>Sb,XFs:()=>et,Xpm:()=>Po,Xts:()=>nI,Y36:()=>jf,YKP:()=>tb,YNc:()=>rl,Yjl:()=>Oo,Yz7:()=>wt,Z0I:()=>xn,ZZ4:()=>w_,_Bn:()=>su,_UZ:()=>np,_Vd:()=>Ya,_c5:()=>sx,_uU:()=>yC,aQg:()=>tw,c2e:()=>GA,cJS:()=>ss,cg1:()=>yc,dDg:()=>Eb,dqk:()=>xt,eFA:()=>Dh,ekj:()=>Mv,eoX:()=>Pc,f3M:()=>Xe,g9A:()=>k0,h0i:()=>ol,hGG:()=>ox,hij:()=>Qd,iGM:()=>a_,ifc:()=>Ee,ip1:()=>f_,jDz:()=>Ze,kL8:()=>_p,kcU:()=>Tr,lG2:()=>Eu,lqb:()=>uc,lri:()=>j0,n5z:()=>Kl,oAB:()=>ko,oxw:()=>vv,q4F:()=>pI,qLn:()=>Uf,qOj:()=>bm,qZA:()=>ct,rWj:()=>H0,s9C:()=>Ev,sBO:()=>Ah,s_b:()=>r_,soG:()=>Fp,tb:()=>Ch,tp0:()=>T,uIk:()=>JI,vHH:()=>me,vpe:()=>Ci,wAp:()=>Ct,xi3:()=>ou,xp6:()=>bI,ynx:()=>hc,z2F:()=>Hp,zSh:()=>tm,zs3:()=>la});var d=V(7579),$=V(727),k=V(9751),se=V(6451),ae=V(3099);function ue(s){for(let o in s)if(s[o]===ue)return o;throw Error("Could not find renamed property on target object.")}function ye(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ue({__forward_ref__:ue});function Z(s){return s.__forward_ref__=Z,s.toString=function(){return fe(this())},s}function J(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===Z}function Re(s){return s&&!!s.\u0275providers}const rt="https://g.co/ng/security#xss";class me extends Error{constructor(o,u){super(function Te(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function De(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new me(-201,!1)}function Bt(s,o){null==s&&function Et(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ss(s){return{providers:s.providers||[],imports:s.imports||[]}}function $n(s){return os(s,hi)||os(s,_n)}function xn(s){return null!==$n(s)}function os(s,o){return s.hasOwnProperty(o)?s[o]:null}function Gn(s){return s&&(s.hasOwnProperty(Di)||s.hasOwnProperty(yr))?s[Di]:null}const hi=ue({\u0275prov:ue}),Di=ue({\u0275inj:ue}),_n=ue({ngInjectableDef:ue}),yr=ue({ngInjectorDef:ue});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let Pr;function nr(s){const o=Pr;return Pr=s,o}function zn(s,o,u){const c=$n(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&et.Optional?null:void 0!==o?o:void $e(fe(s))}const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),kn={},qn="__NG_DI_FLAG__",vr="ngTempTokenPath",Ti=/\n/gm,Si="__source";let jt;function ni(s){const o=jt;return jt=s,o}function Wn(s,o=et.Default){if(void 0===jt)throw new me(-203,!1);return null===jt?zn(s,void 0,o):jt.get(s,o&et.Optional?null:void 0,o)}function He(s,o=et.Default){return(function kr(){return Pr}()||Wn)(J(s),o)}function Xe(s,o=et.Default){return He(s,yt(o))}function yt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function St(s){const o=[];for(let u=0;u<s.length;u++){const c=J(s[u]);if(Array.isArray(c)){if(0===c.length)throw new me(900,!1);let h,p=et.Default;for(let y=0;y<c.length;y++){const E=c[y],b=Zn(E);"number"==typeof b?-1===b?h=E.token:p|=b:h=E}o.push(He(h,p))}else o.push(He(c))}return o}function Yt(s,o){return s[qn]=o,s.prototype[qn]=o,s}function Zn(s){return s[qn]}function O(s){return{toString:s}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),Ee=(()=>{return(s=Ee||(Ee={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ee;var s})();const Ye={},ze=[],Dt=ue({\u0275cmp:ue}),zt=ue({\u0275dir:ue}),Nt=ue({\u0275pipe:ue}),Rn=ue({\u0275mod:ue}),Tt=ue({\u0275fac:ue}),wr=ue({__NG_ELEMENT_ID__:ue});let Al=0;function Po(s){return O(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||ze,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ee.Emulated,id:"c"+Al++,styles:s.styles||ze,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=s.dependencies,y=s.features;return h.inputs=Ml(s.inputs,c),h.outputs=Ml(s.outputs),y&&y.forEach(E=>E(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Rl).filter(Er):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Or).filter(Er):null,h})}function Rl(s){return on(s)||Sn(s)}function Er(s){return null!==s}function ko(s){return O(()=>({type:s.type,bootstrap:s.bootstrap||ze,declarations:s.declarations||ze,imports:s.imports||ze,exports:s.exports||ze,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ml(s,o){if(null==s)return Ye;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const Eu=Po;function Oo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function on(s){return s[Dt]||null}function Sn(s){return s[zt]||null}function Or(s){return s[Nt]||null}function Kn(s){const o=on(s)||Sn(s)||Or(s);return null!==o&&o.standalone}function Gr(s,o){const u=s[Rn]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function mi(s){return Array.isArray(s)&&"object"==typeof s[1]}function _i(s){return Array.isArray(s)&&!0===s[1]}function Ds(s){return 0!=(4&s.flags)}function Ta(s){return s.componentOffset>-1}function kl(s){return 1==(1&s.flags)}function br(s){return null!==s.template}function Cg(s){return 0!=(256&s[2])}function so(s,o){return s.hasOwnProperty(Tt)?s[Tt]:null}class Uo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Vo(){return Bo}function Bo(s){return s.type.prototype.ngOnChanges&&(s.setInput=oo),xu}function xu(){const s=Ru(this),o=s?.current;if(o){const u=s.previous;if(u===Ye)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function oo(s,o,u,c){const h=this.declaredInputs[u],p=Ru(s)||function Mu(s,o){return s[jo]=o}(s,{previous:Ye,current:null}),y=p.current||(p.current={}),E=p.previous,b=E[h];y[h]=new Uo(b&&b.currentValue,o,E===Ye),s[c]=o}Vo.ngInherit=!0;const jo="__ngSimpleChanges__";function Ru(s){return s[jo]||null}function On(s){for(;Array.isArray(s);)s=s[0];return s}function Hs(s,o){return On(o[s])}function Dr(s,o){return On(o[s.index])}function Nu(s,o){return s.data[o]}function Ss(s,o){return s[o]}function fr(s,o){const u=o[s];return mi(u)?u:u[0]}function uo(s){return 64==(64&s[2])}function Hi(s,o){return null==o?null:s[o]}function Ll(s){s[18]=0}function lo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const kt={lFrame:Ag(null),bindingsEnabled:!0};function Yc(){return kt.bindingsEnabled}function we(){return kt.lFrame.lView}function Jt(){return kt.lFrame.tView}function af(s){return kt.lFrame.contextLView=s,s[8]}function Qc(s){return kt.lFrame.contextLView=null,s}function pr(){let s=Vl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Vl(){return kt.lFrame.currentTNode}function $i(s,o){const u=kt.lFrame;u.currentTNode=s,u.isParent=o}function Go(){return kt.lFrame.isParent}function Xc(){kt.lFrame.isParent=!1}function Lr(){const s=kt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function As(){return kt.lFrame.bindingIndex++}function $s(s){const o=kt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Bl(s,o){const u=kt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Gs(o)}function Gs(s){kt.lFrame.currentDirectiveIndex=s}function cf(){return kt.lFrame.currentQueryIndex}function jl(s){kt.lFrame.currentQueryIndex=s}function ed(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function df(s,o,u){if(u&et.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&et.Host||(h=ed(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=kt.lFrame=Sg();return c.currentTNode=o,c.lView=s,!0}function Ou(s){const o=Sg(),u=s[1];kt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Sg(){const s=kt.lFrame,o=null===s?null:s.child;return null===o?Ag(s):o}function Ag(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function xg(){const s=kt.lFrame;return kt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const td=xg;function Rg(){const s=xg();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ii(){return kt.lFrame.selectedIndex}function xs(s){kt.lFrame.selectedIndex=s}function pn(){const s=kt.lFrame;return Nu(s.tView,s.selectedIndex)}function Hl(){kt.lFrame.currentNamespace="svg"}function Tr(){!function ff(){kt.lFrame.currentNamespace=null}()}function Oa(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function Zo(s,o,u){id(s,o,3,u)}function Rs(s,o,u,c){(3&s[2])===u&&id(s,o,u,c)}function ls(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function id(s,o,u,c){const p=c??-1,y=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<p||-1==p)&&(Fu(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Fu(s,o,u,c){const h=u[c]<0,p=u[c+1],E=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Fa{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function co(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const p=u[c++],y=u[c++],E=u[c++];s.setAttribute(o,y,E,p)}else{const p=h,y=u[++c];Va(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function ho(s){return 3===s||4===s||6===s}function Va(s){return 64===s.charCodeAt(0)}function Gi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||$l(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function $l(s,o,u,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Gl(s){return-1!==s}function Ba(s){return 32767&s}function fo(s,o){let u=function zl(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Yo=!0;function cs(s){const o=Yo;return Yo=s,o}let sd=0;const Wr={};function Ws(s,o){const u=ql(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Xo(c.data,s),Xo(o,null),Xo(c.blueprint,null));const h=ja(s,o),p=s.injectorIndex;if(Gl(h)){const y=Ba(h),E=fo(h,o),b=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|b[y+A]}return o[p+8]=h,p}function Xo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ql(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ja(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=_f(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function ad(s,o,u){!function od(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(wr)&&(c=u[wr]),null==c&&(c=u[wr]=sd++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function ud(s,o,u){if(u&et.Optional||void 0!==s)return s;$e()}function Jo(s,o,u,c){if(u&et.Optional&&void 0===c&&(c=null),!(u&(et.Self|et.Host))){const h=s[9],p=nr(void 0);try{return h?h.get(o,c,u&et.Optional):zn(o,c,u&et.Optional)}finally{nr(p)}}return ud(c,0,u)}function gf(s,o,u,c=et.Default,h){if(null!==s){if(1024&o[2]){const y=function Pg(s,o,u,c,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=zi(p,y,u,c|et.Self,Wr);if(E!==Wr)return E;let b=p.parent;if(!b){const A=y[21];if(A){const M=A.get(u,Wr,c);if(M!==Wr)return M}b=_f(y),y=y[15]}p=b}return h}(s,o,u,c,Wr);if(y!==Wr)return y}const p=zi(s,o,u,c,Wr);if(p!==Wr)return p}return Jo(o,u,c,h)}function zi(s,o,u,c,h){const p=function ld(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(wr)?s[wr]:void 0;return"number"==typeof o?o>=0?255&o:mf:o}(u);if("function"==typeof p){if(!df(o,s,c))return c&et.Host?ud(h,0,c):Jo(o,u,c,h);try{const y=p(c);if(null!=y||c&et.Optional)return y;$e()}finally{td()}}else if("number"==typeof p){let y=null,E=ql(s,o),b=-1,A=c&et.Host?o[16][6]:null;for((-1===E||c&et.SkipSelf)&&(b=-1===E?ja(s,o):o[E+8],-1!==b&&oi(c,!1)?(y=o[1],E=Ba(b),o=fo(b,o)):E=-1);-1!==E;){const M=o[1];if(Zl(p,E,M.data)){const j=Wl(E,o,u,y,c,A);if(j!==Wr)return j}b=o[E+8],-1!==b&&oi(c,o[1].data[E+8]===A)&&Zl(p,E,o)?(y=M,E=Ba(b),o=fo(b,o)):E=-1}}return h}function Wl(s,o,u,c,h,p){const y=o[1],E=y.data[s+8],M=Ha(E,y,u,null==c?Ta(E)&&Yo:c!=y&&0!=(3&E.type),h&et.Host&&p===E);return null!==M?qi(o,y,M,E):Wr}function Ha(s,o,u,c,h){const p=s.providerIndexes,y=o.data,E=1048575&p,b=s.directiveStart,M=p>>20,K=h?E+M:s.directiveEnd;for(let ie=c?E:E+M;ie<K;ie++){const Ce=y[ie];if(ie<b&&u===Ce||ie>=b&&Ce.type===u)return ie}if(h){const ie=y[b];if(ie&&br(ie)&&ie.type===u)return b}return null}function qi(s,o,u,c){let h=s[u];const p=o.data;if(function si(s){return s instanceof Fa}(h)){const y=h;y.resolving&&function Oe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new me(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():De(s)}(p[u]));const E=cs(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?nr(y.injectImpl):null;df(s,c,et.Default);try{h=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function rd(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=Bo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&nr(b),cs(E),y.resolving=!1,td()}}return h}function Zl(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function oi(s,o){return!(s&et.Self||s&et.Host&&o)}class Zs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return gf(this._tNode,this._lView,o,yt(c),u)}}function mf(){return new Zs(pr(),we())}function Kl(s){return O(()=>{const o=s.prototype.constructor,u=o[Tt]||ea(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Tt]||ea(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ea(s){return Be(s)?()=>{const o=ea(J(s));return o&&o()}:so(s)}function _f(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Yl(s){return function Uu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(ho(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(pr(),s)}const $a="__parameters__";function Vu(s,o,u){return O(()=>{const c=function cd(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return E.annotation=y,E;function E(b,A,M){const j=b.hasOwnProperty($a)?b[$a]:Object.defineProperty(b,$a,{value:[]})[$a];for(;j.length<=M;)j.push(null);return(j[M]=j[M]||[]).push(y),b}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Qt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ms(s,o){s.forEach(u=>Array.isArray(u)?Ms(u,o):o(u))}function Jl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function za(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ai(s,o,u){let c=yn(s,o);return c>=0?s[1|c]=u:(c=~c,function gy(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ln(s,o){const u=yn(s,o);if(u>=0)return s[1|u]}function yn(s,o){return function md(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const ra=Yt(Vu("Optional"),8),T=Yt(Vu("SkipSelf"),4);var Ps=(()=>((Ps=Ps||{})[Ps.Important=1]="Important",Ps[Ps.DashCase=2]="DashCase",Ps))();const Ed=new Map;let jg=0;const $g="__ngContext__";function wi(s,o){mi(o)?(s[$g]=o[20],function Id(s){Ed.set(s[20],s)}(o)):s[$g]=o}function xe(s,o){return undefined(s,o)}function ot(s){const o=s[3];return _i(o)?o[3]:o}function Pi(s){return oa(s[13])}function Ys(s){return oa(s[4])}function oa(s){for(;null!==s&&!_i(s);)s=s[4];return s}function aa(s,o,u,c,h){if(null!=c){let p,y=!1;_i(c)?p=c:mi(c)&&(y=!0,c=c[0]);const E=On(c);0===s&&null!==u?null==h?PE(o,u,E):Ku(o,u,E,h||null,!0):1===s&&null!==u?Ku(o,u,E,h||null,!0):2===s?function ic(s,o,u){const c=Wg(s,o);c&&function ET(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function ZN(s,o,u,c,h){const p=u[7];p!==On(u)&&aa(o,s,c,p,h);for(let E=10;E<u.length;E++){const b=u[E];Rd(b[1],b,s,o,c,p)}}(o,s,p,u,h)}}function Td(s,o,u){return s.createElement(o,u)}function Zu(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,lo(h,-1)),u.splice(c,1)}function Ad(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Zu(h,c),o>0&&(s[u-1][4]=c[4]);const p=za(s,10+o);!function Iy(s,o){Rd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Nf(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Rd(s,o,u,3,null,null),function Wa(s){let o=s[13];if(!o)return Cy(s[1],s);for(;o;){let u=null;if(mi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)mi(o)&&Cy(o[1],o),o=o[3];null===o&&(o=s),mi(o)&&Cy(o[1],o),u=o&&o[4]}o=u}}(o)}}function Cy(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function qg(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Fa)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=h[p[y]],b=p[y+1];try{b.call(E)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function by(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+3];y>=0?c[h=y]():c[h=-y].unsubscribe(),p+=2}else{const y=c[h=u[p+1]];u[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&_i(o[3])){u!==o[3]&&Zu(u,o);const c=o[19];null!==c&&c.detachView(s)}!function rc(s){Ed.delete(s[20])}(o)}}function ME(s,o,u){return function NE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===Ee.None||p===Ee.Emulated)return null}return Dr(c,u)}}(s,o.parent,u)}function Ku(s,o,u,c,h){s.insertBefore(o,u,c,h)}function PE(s,o,u){s.appendChild(o,u)}function Dy(s,o,u,c,h){null!==c?Ku(s,o,u,c,h):PE(s,o,u)}function Wg(s,o){return s.parentNode(o)}let kf,Yg,Zg=function CT(s,o,u){return 40&s.type?Dr(s,u):null};function xd(s,o,u,c){const h=ME(s,c,o),p=o[11],E=function IT(s,o,u){return Zg(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let b=0;b<u.length;b++)Dy(p,h,u[b],E,!1);else Dy(p,h,u,E,!1)}function Kg(s,o){if(null!==o){const u=o.type;if(3&u)return Dr(o,s);if(4&u)return xy(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Kg(s,c);{const h=s[o.index];return _i(h)?xy(-1,h):On(h)}}if(32&u)return xe(o,s)()||On(s[o.index]);{const c=bT(s,o);return null!==c?Array.isArray(c)?c[0]:Kg(ot(s[16]),c):Kg(s,o.next)}}return null}function bT(s,o){return null!==o?s[16][6].projection[o.projection]:null}function xy(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Kg(c,h)}return o[7]}function Pf(s,o,u,c,h,p,y){for(;null!=u;){const E=c[u.index],b=u.type;if(y&&0===o&&(E&&wi(On(E),c),u.flags|=2),32!=(32&u.flags))if(8&b)Pf(s,o,u.child,c,h,p,!1),aa(o,s,h,E,p);else if(32&b){const A=xe(u,c);let M;for(;M=A();)aa(o,s,h,M,p);aa(o,s,h,E,p)}else 16&b?Md(s,o,c,u,h,p):aa(o,s,h,E,p);u=y?u.projectionNext:u.next}}function Rd(s,o,u,c,h,p){Pf(u,c,s.firstChild,o,h,p,!1)}function Md(s,o,u,c,h,p){const y=u[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)aa(o,s,h,b[A],p);else Pf(s,o,b,y[3],h,p,!0)}function TT(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function ST(s,o,u){const{mergedAttrs:c,classes:h,styles:p}=u;null!==c&&co(s,o,c),null!==h&&TT(s,o,h),null!==p&&function OE(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function RT(s){kf=s}function Py(s){return function VE(){if(void 0===Yg&&(Yg=null,xt.trustedTypes))try{Yg=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Yg}()?.createScriptURL(s)||s}class jE{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}function Qs(s){return s instanceof jE?s.changingThisBreaksApplicationSecurity:s}function Of(s,o){const u=function Oy(s){return s instanceof jE&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${rt})`)}return u===o}const OT=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ur=(()=>((Ur=Ur||{})[Ur.NONE=0]="NONE",Ur[Ur.HTML=1]="HTML",Ur[Ur.STYLE=2]="STYLE",Ur[Ur.SCRIPT=3]="SCRIPT",Ur[Ur.URL=4]="URL",Ur[Ur.RESOURCE_URL=5]="RESOURCE_URL",Ur))();function JE(s){const o=em();return o?o.sanitize(Ur.URL,s)||"":Of(s,"URL")?Qs(s):function Uy(s){return(s=String(s)).match(OT)?s:"unsafe:"+s}(De(s))}function HT(s){const o=em();if(o)return Py(o.sanitize(Ur.RESOURCE_URL,s)||"");if(Of(s,"ResourceURL"))return Py(Qs(s));throw new me(904,!1)}function $y(s,o,u){return function eP(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?HT:JE}(o,u)(s)}function em(){const s=we();return s&&s[12]}const nI=new Qt("ENVIRONMENT_INITIALIZER"),rI=new Qt("INJECTOR",-1),iI=new Qt("INJECTOR_DEF_TYPES");class gt{get(o,u=kn){if(u===kn){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return u}}function Zi(s){return{\u0275providers:s}}function Gy(...s){return{\u0275providers:Za(0,s),\u0275fromNgModule:!0}}function Za(s,...o){const u=[],c=new Set;let h;return Ms(o,p=>{const y=p;ds(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&Kr(h,u),u}function Kr(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];Lf(h,p=>{o.push(p)})}}function ds(s,o,u,c){if(!(s=J(s)))return!1;let h=null,p=Gn(s);const y=!p&&on(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Gn(b),!p)return!1;h=b}const E=c.has(h);if(y){if(E)return!1;if(c.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of b)ds(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(h);try{Ms(p.imports,M=>{ds(M,o,u,c)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&Kr(A,o)}if(!E){const A=so(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:ze},{provide:iI,useValue:h,multi:!0},{provide:nI,useValue:()=>He(h),multi:!0})}const b=p.providers;null==b||E||Lf(b,M=>{o.push(M)})}}return h!==s&&void 0!==s.providers}function Lf(s,o){for(let u of s)Re(u)&&(u=u.\u0275providers),Array.isArray(u)?Lf(u,o):o(u)}const Ka=ue({provide:String,useValue:ue});function sI(s){return null!==s&&"object"==typeof s&&Ka in s}function oc(s){return"function"==typeof s}const tm=new Qt("Set Injector scope."),ac={},Yu={};let uI;function nm(){return void 0===uI&&(uI=new gt),uI}class uc{}class qy extends uc{get destroyed(){return this._destroyed}constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sm(o,y=>this.processProvider(y)),this.records.set(rI,Un(void 0,this)),h.has("environment")&&this.records.set(uc,Un(void 0,this));const p=this.records.get(tm);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(iI.multi,ze,et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=ni(this),c=nr(void 0);try{return o()}finally{ni(u),nr(c)}}get(o,u=kn,c=et.Default){this.assertNotDestroyed(),c=yt(c);const h=ni(this),p=nr(void 0);try{if(!(c&et.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function im(s){return"function"==typeof s||"object"==typeof s&&s instanceof Qt}(o)&&$n(o);E=b&&this.injectableDefInScope(b)?Un(rm(o),ac):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&et.Self?nm():this.parent).get(o,u=c&et.Optional&&u===kn?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[vr]=y[vr]||[]).unshift(fe(o)),h)throw y;return function W(s,o,u,c){const h=s[vr];throw o[Si]&&h.unshift(o[Si]),s.message=function z(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=fe(o);if(Array.isArray(o))h=o.map(fe).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Ti,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[vr]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{nr(p),ni(h)}}resolveInjectorInitializers(){const o=ni(this),u=nr(void 0);try{const c=this.get(nI.multi,ze,et.Self);for(const h of c)h()}finally{ni(o),nr(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(fe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(o){let u=oc(o=J(o))?o:J(o&&o.provide);const c=function zT(s){return sI(s)?Un(void 0,s.useValue):Un(Pd(s),ac)}(o);if(oc(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Un(void 0,ac,!0),h.factory=()=>St(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===ac&&(u.value=Yu,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Zy(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function rm(s){const o=$n(s),u=null!==o?o.factory:so(s);if(null!==u)return u;if(s instanceof Qt)throw new me(204,!1);if(s instanceof Function)return function lI(s){const o=s.length;if(o>0)throw function Ks(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new me(204,!1);const u=function Es(s){const o=s&&(s[hi]||s[_n]);if(o){const u=function ji(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new me(204,!1)}function Pd(s,o,u){let c;if(oc(s)){const h=J(s);return so(h)||rm(h)}if(sI(s))c=()=>J(s.useValue);else if(function aI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...St(s.deps||[]));else if(function oI(s){return!(!s||!s.useExisting)}(s))c=()=>He(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function Wy(s){return!!s.deps}(s))return so(h)||rm(h);c=()=>new h(...St(s.deps))}return c}function Un(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function sm(s,o){for(const u of s)Array.isArray(u)?sm(u,o):u&&Re(u)?sm(u.\u0275providers,o):o(u)}class Ky{}class Yy{}class hI{resolveComponentFactory(o){throw function cI(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ya=(()=>{class s{}return s.NULL=new hI,s})();function qT(){return lc(pr(),we())}function lc(s,o){return new om(Dr(s,o))}let om=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=qT,s})();function nP(s){return s instanceof om?s.nativeElement:s}class WT{}let rP=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function iP(){const s=we(),u=fr(pr().index,s);return(mi(u)?u:s)[11]}(),s})(),sP=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class fI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const pI=new fI("15.1.1"),am={};function Xy(s){return s.ngOriginalError}class Uf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Xy(o);for(;u&&Xy(u);)u=Xy(u);return u||null}}function Qa(s){return s instanceof Function?s():s}function EI(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const II="ng-template";function lP(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==EI(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function YT(s){return 4===s.type&&s.value!==II}function cP(s,o,u){return o===(4!==s.type||u?s.value:II)}function dP(s,o,u){let c=4;const h=s.attrs||[],p=function JT(s){for(let o=0;o<s.length;o++)if(ho(s[o]))return o;return s.length}(h);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!cP(s,b,u)||""===b&&1===o.length){if(yo(c))return!1;y=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!lP(s.attrs,A,u)){if(yo(c))return!1;y=!0}continue}const j=hP(8&c?"class":b,h,YT(s),u);if(-1===j){if(yo(c))return!1;y=!0;continue}if(""!==A){let K;K=j>p?"":h[j+1].toLowerCase();const ie=8&c?K:null;if(ie&&-1!==EI(ie,A,0)||2&c&&A!==K){if(yo(c))return!1;y=!0}}}}else{if(!y&&!yo(c)&&!yo(b))return!1;if(y&&yo(b))continue;y=!1,c=b|1&c}}return yo(c)||y}function yo(s){return 0==(1&s)}function hP(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function eS(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function QT(s,o,u=!1){for(let c=0;c<o.length;c++)if(dP(s,o[c],u))return!0;return!1}function CI(s,o){return s?":not("+o.trim()+")":o}function nS(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!yo(y)&&(o+=CI(p,h),h=""),c=y,p=p||!yo(c);u++}return""!==h&&(o+=CI(p,h)),o}const $t={};function bI(s){um(Jt(),we(),ii()+s,!1)}function um(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Zo(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Rs(o,p,0,u)}xs(u)}function Xa(s,o=null,u=null,c){const h=cm(s,o,u,c);return h.resolveInjectorInitializers(),h}function cm(s,o=null,u=null,c,h=new Set){const p=[u||ze,Gy(s)];return c=c||("object"==typeof s?void 0:fe(s)),new qy(p,o||nm(),c||null,h)}let la=(()=>{class s{static create(u,c){if(Array.isArray(u))return Xa({name:""},c,u,"");{const h=u.name??"";return Xa({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=kn,s.NULL=new gt,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>He(rI)}),s.__NG_ELEMENT_ID__=-1,s})();function jf(s,o=et.Default){const u=we();return null===u?He(s,o):gf(pr(),u,J(s),o)}function pS(){throw new Error("invalid")}function gS(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const p=u[c+1];if(-1!==p){const y=s.data[p];jl(u[c]),y.contentQueries(2,o[p],p)}}}function hs(s,o,u,c,h,p,y,E,b,A,M){const j=o.blueprint.slice();return j[0]=h,j[2]=76|c,(null!==M||s&&1024&s[2])&&(j[2]|=1024),Ll(j),j[3]=j[15]=s,j[8]=u,j[10]=y||s&&s[10],j[11]=E||s&&s[11],j[12]=b||s&&s[12]||null,j[9]=A||s&&s[9]||null,j[6]=p,j[20]=function AE(){return jg++}(),j[21]=M,j[16]=2==o.type?s[16]:j,j}function L(s,o,u,c,h){let p=s.data[o];if(null===p)p=function Os(s,o,u,c,h){const p=Vl(),y=Go(),b=s.data[o]=function _S(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,u,c,h),function Jc(){return kt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const y=function $o(){const s=kt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return $i(p,!0),p}function cc(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function fm(s,o,u){Ou(o);try{const c=s.viewQuery;null!==c&&hv(1,c,u);const h=s.template;null!==h&&li(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&gS(s,o),s.staticViewQueries&&hv(2,s.viewQuery,u);const p=s.components;null!==p&&function Ki(s,o){for(let u=0;u<o.length;u++)TS(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Rg()}}function pm(s,o,u,c){const h=o[2];if(128!=(128&h)){Ou(o);try{Ll(o),function qo(s){return kt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&li(s,o,u,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Zo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Rs(o,A,0,null),ls(o,0)}if(function DS(s){for(let o=Pi(s);null!==o;o=Ys(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c];512&h[2]||lo(h[3],1),h[2]|=512}}}(o),function qf(s){for(let o=Pi(s);null!==o;o=Ys(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];uo(c)&&pm(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&gS(s,o),y){const A=s.contentCheckHooks;null!==A&&Zo(o,A)}else{const A=s.contentHooks;null!==A&&Rs(o,A,1),ls(o,1)}!function yP(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)xs(~h);else{const p=h,y=u[++c],E=u[++c];Bl(y,p),E(2,o[p])}}}finally{xs(-1)}}(s,o);const E=s.components;null!==E&&function ve(s,o){for(let u=0;u<o.length;u++)cv(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&hv(2,b,c),y){const A=s.viewCheckHooks;null!==A&&Zo(o,A)}else{const A=s.viewHooks;null!==A&&Rs(o,A,2),ls(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,lo(o[3],-1))}finally{Rg()}}}function li(s,o,u,c,h){const p=ii(),y=2&c;try{xs(-1),y&&o.length>22&&um(s,o,22,!1),u(c,h)}finally{xs(p)}}function ov(s,o,u){if(Ds(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}function Ud(s,o,u){Yc()&&(function wS(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;Ta(u)&&function bS(s,o,u){const c=Dr(o,s),h=MI(u),p=s[10],y=Zf(s,hs(s,h,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=y}(o,u,s.data[h+u.componentOffset]),s.firstCreatePass||Ws(u,o),wi(c,o);const y=u.initialInputs;for(let E=h;E<p;E++){const b=s.data[E],A=qi(o,s,E,u);wi(A,o),null!==y&&jI(0,E-h,A,b,0,y),br(b)&&(fr(u.index,o)[8]=qi(o,s,E,u))}}(s,o,u,Dr(u,o)),64==(64&u.flags)&&UI(s,o,u))}function Hf(s,o,u=Dr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[h++]=E}}}function MI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=av(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function av(s,o,u,c,h,p,y,E,b,A){const M=22+c,j=M+h,K=function mS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(M,j),ie="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:u,queries:null,viewQuery:E,declTNode:o,data:K.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:ie,incompleteFirstPass:!1}}function PI(s,o,u,c){const h=Kf(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&vm(s).push(c,h.length-1))}function kI(s,o,u,c){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const p=s[h];null===c?OI(u,o,h,p):c.hasOwnProperty(h)&&OI(u,o,c[h],p)}return u}function OI(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function fs(s,o,u,c,h,p,y,E){const b=Dr(o,u);let M,A=o.inputs;!E&&null!=A&&(M=A[c])?(Im(s,u,M,c,h),Ta(o)&&mm(u,o.index)):3&o.type&&(c=function gm(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(b,c,h))}function mm(s,o){const u=fr(o,s);16&u[2]||(u[2]|=32)}function $f(s,o,u,c){let h=!1;if(Yc()){const p=null===c?null:{"":-1},y=function VI(s,o){const u=s.directiveRegistry;let c=null,h=null;if(u)for(let p=0;p<u.length;p++){const y=u[p];if(QT(o,y.selectors,!1))if(c||(c=[]),br(y))if(null!==y.findHostDirectiveDefs){const E=[];h=h||new Map,y.findHostDirectiveDefs(y,E,h),c.unshift(...E,y),Vd(s,o,E.length)}else c.unshift(y),Vd(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(s,u);let E,b;null===y?E=b=null:[E,b]=y,null!==E&&(h=!0,LI(s,o,u,E,p,b)),p&&function BI(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new me(-301,!1);c.push(o[h],p)}}}(u,c,p)}return u.mergedAttrs=Gi(u.mergedAttrs,u.attrs),h}function LI(s,o,u,c,h,p){for(let A=0;A<c.length;A++)ad(Ws(u,o),s,c[A].type);!function IS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const M=c[A];M.providersResolver&&M.providersResolver(M)}let y=!1,E=!1,b=cc(s,o,c.length,null);for(let A=0;A<c.length;A++){const M=c[A];u.mergedAttrs=Gi(u.mergedAttrs,M.hostAttrs),CS(s,u,o,b,M),ES(b,M,h),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const j=M.type.prototype;!y&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),y=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),E=!0),b++}!function Yi(s,o,u){const h=o.directiveEnd,p=s.data,y=o.attrs,E=[];let b=null,A=null;for(let M=o.directiveStart;M<h;M++){const j=p[M],K=u?u.get(j):null,Ce=K?K.outputs:null;b=kI(j.inputs,M,b,K?K.inputs:null),A=kI(j.outputs,M,A,Ce);const je=null===b||null===y||YT(o)?null:uv(b,M,y);E.push(je)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=b,o.outputs=A}(s,u,p)}function UI(s,o,u){const c=u.directiveStart,h=u.directiveEnd,p=u.index,y=function lf(){return kt.lFrame.currentDirectiveIndex}();try{xs(p);for(let E=c;E<h;E++){const b=s.data[E],A=o[E];Gs(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Gf(b,A)}}finally{xs(-1),Gs(y)}}function Gf(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Vd(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function ES(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;br(o)&&(u[""]=s)}}function CS(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=so(h.type)),y=new Fa(p,br(h),jf);s.blueprint[c]=y,u[c]=y,function yS(s,o,u,c,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const E=~o.index;(function vS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=E&&y.push(E),y.push(u,c,p)}}(s,o,c,cc(s,u,h.hostVars,$t),h)}function vo(s,o,u,c,h,p){const y=Dr(s,o);!function zf(s,o,u,c,h,p,y){if(null==p)s.removeAttribute(o,h,u);else{const E=null==y?De(p):y(p,c||"",h);s.setAttribute(o,h,E,u)}}(o[11],y,p,s.value,u,c,h)}function jI(s,o,u,c,h,p){const y=p[o];if(null!==y){const E=c.setInput;for(let b=0;b<y.length;){const A=y[b++],M=y[b++],j=y[b++];null!==E?c.setInput(u,j,A,M):u[M]=j}}}function uv(s,o,u){let c=null,h=0;for(;h<u.length;){const p=u[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const y=s[p];for(let E=0;E<y.length;E+=2)if(y[E]===o){c.push(p,y[E+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function lv(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function cv(s,o){const u=fr(o,s);if(uo(u)){const c=u[1];48&u[2]?pm(c,u,c.template,u[8]):u[5]>0&&Wf(u)}}function Wf(s){for(let c=Pi(s);null!==c;c=Ys(c))for(let h=10;h<c.length;h++){const p=c[h];if(uo(p))if(512&p[2]){const y=p[1];pm(y,p,y.template,p[8])}else p[5]>0&&Wf(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=fr(u[c],s);uo(h)&&h[5]>0&&Wf(h)}}function TS(s,o){const u=fr(o,s),c=u[1];(function dv(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),fm(c,u,u[8])}function Zf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ym(s){for(;s;){s[2]|=32;const o=ot(s);if(Cg(s)&&!o)return s;s=o}return null}function Bd(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{pm(s,o,s.template,u)}catch(y){throw c&&Em(o,y),y}finally{h.end&&h.end()}}function hv(s,o,u){jl(0),o(s,u)}function Kf(s){return s[7]||(s[7]=[])}function vm(s){return s.cleanup||(s.cleanup=[])}function Em(s,o){const u=s[9],c=u?u.get(Uf,null):null;c&&c.handleError(o)}function Im(s,o,u,c,h){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,h,c,E):b[E]=h}}function Ja(s,o,u){const c=Hs(o,s);!function zu(s,o,u){s.setValue(o,u)}(s[11],c,u)}function Yf(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?h=ge(h,E):2==p&&(c=ge(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function eu(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(On(p)),_i(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&eu(b[1],b,A,c)}const y=u.type;if(8&y)eu(s,o,u.child,c);else if(32&y){const E=xe(u,o);let b;for(;b=E();)c.push(b)}else if(16&y){const E=bT(o,u);if(Array.isArray(E))c.push(...E);else{const b=ot(o[16]);eu(b[1],b,E,c,!0)}}u=h?u.projectionNext:u.next}return c}class jd{get rootNodes(){const o=this._lView,u=o[1];return eu(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(_i(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Ad(o,c),za(u,c))}this._attachedToViewContainer=!1}Nf(this._lView[1],this._lView)}onDestroy(o){PI(this._lView[1],this._lView,null,o)}markForCheck(){ym(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Bd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zg(s,o){Rd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=o}}class SS extends jd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Bd(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class HI extends Ya{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=on(o);return new Qf(u,this.ngModule)}}function $I(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class xS{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=yt(c);const h=this.injector.get(o,am,c);return h!==am||u===am?h:this.parentInjector.get(o,u,c)}}class Qf extends Yy{get inputs(){return $I(this.componentDef.inputs)}get outputs(){return $I(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function rS(s){return s.map(nS).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,h){let p=(h=h||this.ngModule)instanceof uc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new xS(o,p):o,E=y.get(WT,null);if(null===E)throw new me(407,!1);const b=y.get(sP,null),A=E.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",j=c?function NI(s,o,u){return s.selectRootElement(o,u===Ee.ShadowDom)}(A,c,this.componentDef.encapsulation):Td(A,M,function AS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),K=this.componentDef.onPush?288:272,ie=av(0,null,null,1,0,null,null,null,null,null),Ce=hs(null,ie,null,K,null,null,E,A,b,y,null);let je,We;Ou(Ce);try{const at=this.componentDef;let At,Fe=null;at.findHostDirectiveDefs?(At=[],Fe=new Map,at.findHostDirectiveDefs(at,At,Fe),At.push(at)):At=[at];const Ft=function MS(s,o){const u=s[1];return s[22]=o,L(u,22,2,"#host",null)}(Ce,j),jn=function Cm(s,o,u,c,h,p,y,E){const b=h[1];!function GI(s,o,u,c){for(const h of s)o.mergedAttrs=Gi(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Yf(o,o.mergedAttrs,!0),null!==u&&ST(c,u,o))}(c,s,o,y);const A=p.createRenderer(o,u),M=hs(h,MI(u),null,u.onPush?32:16,h[s.index],s,p,A,E||null,null,null);return b.firstCreatePass&&Vd(b,s,c.length-1),Zf(h,M),h[s.index]=M}(Ft,j,at,At,Ce,E,A);We=Nu(ie,22),j&&function fv(s,o,u,c){if(c)co(s,u,["ng-version",pI.full]);else{const{attrs:h,classes:p}=function iS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!yo(h))break;h=p}c++}return{attrs:o,classes:u}}(o.selectors[0]);h&&co(s,u,h),p&&p.length>0&&TT(s,u,p.join(" "))}}(A,at,j,c),void 0!==u&&function NS(s,o,u){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=u[h];c.push(null!=p?Array.from(p):null)}}(We,this.ngContentSelectors,u),je=function zI(s,o,u,c,h,p){const y=pr(),E=h[1],b=Dr(y,h);LI(E,h,y,u,null,c);for(let M=0;M<u.length;M++)wi(qi(h,E,y.directiveStart+M,y),h);UI(E,h,y),b&&wi(b,h);const A=qi(h,E,y.directiveStart+y.componentOffset,y);if(s[8]=h[8]=A,null!==p)for(const M of p)M(A,o);return ov(E,y,s),A}(jn,at,At,Fe,Ce,[PS]),fm(ie,Ce,null)}finally{Rg()}return new RS(this.componentType,je,lc(We,Ce),Ce,We)}}class RS extends Ky{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new SS(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;Im(p[1],p,h,o,u),mm(p,this._tNode.index)}}get injector(){return new Zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function PS(){const s=pr();Oa(we()[1],s)}function bm(s){let o=function qI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(br(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new me(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const y=s;y.inputs=Dm(s.inputs),y.declaredInputs=Dm(s.declaredInputs),y.outputs=Dm(s.outputs);const E=h.hostBindings;E&&IP(s,E);const b=h.viewQuery,A=h.contentQueries;if(b&&ZI(s,b),A&&KI(s,A),ye(s.inputs,h.inputs),ye(s.declaredInputs,h.declaredInputs),ye(s.outputs,h.outputs),br(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===bm&&(u=!1)}}o=Object.getPrototypeOf(o)}!function WI(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Gi(h.hostAttrs,u=Gi(u,h.hostAttrs))}}(c)}function Dm(s){return s===Ye?{}:s===ze?[]:s}function ZI(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function KI(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function IP(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Hd=null;function wo(){if(!Hd){const s=xt.Symbol;if(s&&s.iterator)Hd=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Hd=c)}}}return Hd}function $d(s){return!!XI(s)&&(Array.isArray(s)||!(s instanceof Map)&&wo()in s)}function XI(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function da(s,o,u){return s[o]=u}function Qi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function dc(s,o,u,c){const h=Qi(s,o,u);return Qi(s,o+1,c)||h}function JI(s,o,u,c){const h=we();return Qi(h,As(),o)&&(Jt(),vo(pn(),h,s,o,u,c)),JI}function Jf(s,o,u,c){return Qi(s,As(),u)?o+De(u)+c:$t}function tu(s,o,u,c,h,p){const E=dc(s,function qr(){return kt.lFrame.bindingIndex}(),u,h);return $s(2),E?o+De(u)+c+De(h)+p:$t}function rl(s,o,u,c,h,p,y,E){const b=we(),A=Jt(),M=s+22,j=A.firstCreatePass?function US(s,o,u,c,h,p,y,E,b){const A=o.consts,M=L(o,s,4,y||null,Hi(A,E));$f(o,u,M,Hi(A,b)),Oa(o,M);const j=M.tViews=av(2,M,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),j.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,u,c,h,p,y):A.data[M];$i(j,!1);const K=b[11].createComment("");xd(A,b,K,j),wi(K,b),Zf(b,b[M]=lv(K,b,K,j)),kl(j)&&Ud(A,b,j),null!=y&&Hf(b,j,E)}function rC(s){return Ss(function ku(){return kt.lFrame.contextLView}(),22+s)}function iC(s,o,u){const c=we();return Qi(c,As(),o)&&fs(Jt(),pn(),c,s,o,c[11],u,!1),iC}function tp(s,o,u,c,h){const y=h?"class":"style";Im(s,u,o.inputs[y],y,c)}function Xs(s,o,u,c){const h=we(),p=Jt(),y=22+s,E=h[11],b=h[y]=Td(E,o,function Mg(){return kt.lFrame.currentNamespace}()),A=p.firstCreatePass?function VS(s,o,u,c,h,p,y){const E=o.consts,A=L(o,s,2,h,Hi(E,p));return $f(o,u,A,Hi(E,y)),null!==A.attrs&&Yf(A,A.attrs,!1),null!==A.mergedAttrs&&Yf(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,h,0,o,u,c):p.data[y];return $i(A,!0),ST(E,b,A),32!=(32&A.flags)&&xd(p,h,b,A),0===function Na(){return kt.lFrame.elementDepthCount}()&&wi(b,h),function rf(){kt.lFrame.elementDepthCount++}(),kl(A)&&(Ud(p,h,A),ov(p,A,h)),null!==c&&Hf(h,A),Xs}function ct(){let s=pr();Go()?Xc():(s=s.parent,$i(s,!1));const o=s;!function Pa(){kt.lFrame.elementDepthCount--}();const u=Jt();return u.firstCreatePass&&(Oa(u,s),Ds(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ua(s){return 0!=(8&s.flags)}(o)&&tp(u,o,we(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zs(s){return 0!=(16&s.flags)}(o)&&tp(u,o,we(),o.stylesWithoutHost,!1),ct}function np(s,o,u,c){return Xs(s,o,u,c),ct(),np}function hc(s,o,u){const c=we(),h=Jt(),p=s+22,y=h.firstCreatePass?function Ut(s,o,u,c,h){const p=o.consts,y=Hi(p,c),E=L(o,s,8,"ng-container",y);return null!==y&&Yf(E,y,!0),$f(o,u,E,Hi(p,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,h,c,o,u):h.data[p];$i(y,!0);const E=c[p]=c[11].createComment("");return xd(h,c,E,y),wi(E,c),kl(y)&&(Ud(h,c,y),ov(h,y,c)),null!=u&&Hf(c,y),hc}function fc(){let s=pr();const o=Jt();return Go()?Xc():(s=s.parent,$i(s,!1)),o.firstCreatePass&&(Oa(o,s),Ds(s)&&o.queries.elementEnd(s)),fc}function sC(){return we()}function rp(s){return!!s&&"function"==typeof s.then}function oC(s){return!!s&&"function"==typeof s.subscribe}const aC=oC;function yv(s,o,u,c){const h=we(),p=Jt(),y=pr();return function ci(s,o,u,c,h,p,y){const E=kl(c),A=s.firstCreatePass&&vm(s),M=o[8],j=Kf(o);let K=!0;if(3&c.type||y){const je=Dr(c,o),We=y?y(je):je,at=j.length,At=y?Ft=>y(On(Ft[c.index])):c.index;let Fe=null;if(!y&&E&&(Fe=function Mm(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===u&&h[p+1]===c){const E=o[7],b=h[p+2];return E.length>b?E[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=p,Fe.__ngLastListenerFn__=p,K=!1;else{p=uC(c,o,M,p,!1);const Ft=u.listen(We,h,p);j.push(p,Ft),A&&A.push(h,At,at,at+1)}}else p=uC(c,o,M,p,!1);const ie=c.outputs;let Ce;if(K&&null!==ie&&(Ce=ie[h])){const je=Ce.length;if(je)for(let We=0;We<je;We+=2){const jn=o[Ce[We]][Ce[We+1]].subscribe(p),Xn=j.length;j.push(p,jn),A&&A.push(h,c.index,Xn,-(Xn+1))}}}(p,h,h[11],y,s,o,c),yv}function nu(s,o,u,c){try{return!1!==u(c)}catch(h){return Em(s,h),!1}}function uC(s,o,u,c,h){return function p(y){if(y===Function)return c;ym(s.componentOffset>-1?fr(s.index,o):o);let b=nu(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)b=nu(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function vv(s=1){return function dy(s){return(kt.lFrame.contextLView=function nd(s,o){for(;s>0;)o=o[15],s--;return o}(s,kt.lFrame.contextLView))[8]}(s)}function Ev(s,o,u){return Zd(s,"",o,"",u),Ev}function Zd(s,o,u,c,h){const p=we(),y=Jf(p,o,u,c);return y!==$t&&fs(Jt(),pn(),p,s,y,p[11],h,!1),Zd}function sp(s,o){return s<<17|o<<2}function ha(s){return s>>17&32767}function km(s){return 2|s}function fa(s){return(131068&s)>>2}function op(s,o){return-131069&s|o<<2}function ap(s){return 1|s}function pC(s,o,u,c,h){const p=s[u+1],y=null===o;let E=c?ha(p):fa(p),b=!1;for(;0!==E&&(!1===b||y);){const M=s[E+1];up(s[E],o)&&(b=!0,s[E+1]=c?ap(M):km(M)),E=c?ha(M):fa(M)}b&&(s[u+1]=c?km(p):ap(p))}function up(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&yn(s,o)>=0}function Mv(s,o){return function Do(s,o,u,c){const h=we(),p=Jt(),y=$s(2);p.firstUpdatePass&&function Vm(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[ii()],y=function Um(s,o){return o>=s.expandoStartIndex}(s,u);(function Lv(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!y&&(o=!1),o=function di(s,o,u,c){const h=function ka(s){const o=kt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=cp(u=kv(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=kv(h,s,o,u,c),null===p){let b=function Ii(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==fa(c))return s[ha(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=kv(null,s,o,b[1],c),b=cp(b,o.attrs,c),function Bm(s,o,u,c){s[ha(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else p=function Pv(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=cp(c,s[p].hostAttrs,u);return cp(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function bv(s,o,u,c,h,p){let y=p?o.classBindings:o.styleBindings,E=ha(y),b=fa(y);s[c]=u;let M,A=!1;if(Array.isArray(u)?(M=u[1],(null===M||yn(u,M)>0)&&(A=!0)):M=u,h)if(0!==b){const K=ha(s[E+1]);s[c+1]=sp(K,E),0!==K&&(s[K+1]=op(s[K+1],c)),s[E+1]=function BS(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=sp(E,0),0!==E&&(s[E+1]=op(s[E+1],c)),E=c;else s[c+1]=sp(b,0),0===E?E=c:s[b+1]=op(s[b+1],c),b=c;A&&(s[c+1]=km(s[c+1])),pC(s,M,c,!0),pC(s,M,c,!1),function fC(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&yn(p,o)>=0&&(u[c+1]=ap(u[c+1]))}(o,M,s,c,p),y=sp(E,b),p?o.classBindings=y:o.styleBindings=y}(h,p,o,u,y,c)}}(p,s,y,c),o!==$t&&Qi(h,y,o)&&function Ov(s,o,u,c,h,p,y,E){if(!(3&o.type))return;const b=s.data,A=b[E+1],M=function Cv(s){return 1==(1&s)}(A)?jm(b,o,u,h,fa(A),y):void 0;Hm(M)||(Hm(p)||function hC(s){return 2==(2&s)}(A)&&(p=jm(b,null,u,h,E,y)),function DT(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Ps.DashCase;null==h?s.removeStyle(u,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Ps.Important),s.setStyle(u,c,h,p))}}(c,y,Hs(ii(),u),h,p))}(p,p.data[ii()],h,h[11],s,h[y+1]=function Fv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(Qs(s)))),s}(o,u),c,y)}(s,o,null,!0),Mv}function kv(s,o,u,c,h){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=cp(c,p.hostAttrs,h),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function cp(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ai(s,y,!!u||o[++p]))}return void 0===s?null:s}function jm(s,o,u,c,h,p){const y=null===o;let E;for(;h>0;){const b=s[h],A=Array.isArray(b),M=A?b[1]:b,j=null===M;let K=u[h+1];K===$t&&(K=j?ze:void 0);let ie=j?ln(K,c):M===c?K:void 0;if(A&&!Hm(ie)&&(ie=ln(b,c)),Hm(ie)&&(E=ie,y))return E;const Ce=s[h+1];h=y?ha(Ce):fa(Ce)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=ln(b,c))}return E}function Hm(s){return void 0!==s}function yC(s,o=""){const u=we(),c=Jt(),h=s+22,p=c.firstCreatePass?L(c,h,1,o,null):c.data[h],y=u[h]=function Gu(s,o){return s.createText(o)}(u[11],o);xd(c,u,y,p),$i(p,!1)}function Yd(s){return Qd("",s,""),Yd}function Qd(s,o,u){const c=we(),h=Jf(c,s,o,u);return h!==$t&&Ja(c,ii(),h),Qd}function dp(s,o,u,c,h){const p=we(),y=tu(p,s,o,u,c,h);return y!==$t&&Ja(p,ii(),y),dp}const ru=void 0;var AC=["en",[["a","p"],["AM","PM"],ru],[["AM","PM"],ru,ru],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ru,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ru,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ru,"{1} 'at' {0}",ru],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function SC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let _c={};function yc(s){const o=function YS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=nh(o);if(u)return u;const c=o.split("-")[0];if(u=nh(c),u)return u;if("en"===c)return AC;throw new me(701,!1)}function _p(s){return yc(s)[Ct.PluralCase]}function nh(s){return s in _c||(_c[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),_c[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const vc="en-US";let qv=vc;function l0(s,o,u,c,h){if(s=J(s),Array.isArray(s))for(let p=0;p<s.length;p++)l0(s[p],o,u,c,h);else{const p=Jt(),y=we();let E=oc(s)?s:J(s.provide),b=Pd(s);const A=pr(),M=1048575&A.providerIndexes,j=A.directiveStart,K=A.providerIndexes>>20;if(oc(s)||!s.multi){const ie=new Fa(b,h,jf),Ce=hh(E,o,h?M:M+K,j);-1===Ce?(ad(Ws(A,y),p,E),e_(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(ie),y.push(ie)):(u[Ce]=ie,y[Ce]=ie)}else{const ie=hh(E,o,M+K,j),Ce=hh(E,o,M,M+K),We=Ce>=0&&u[Ce];if(h&&!We||!h&&!(ie>=0&&u[ie])){ad(Ws(A,y),p,E);const at=function fh(s,o,u,c,h){const p=new Fa(s,u,jf);return p.multi=[],p.index=o,p.componentProviders=0,JC(p,h,c&&!u),p}(h?eb:fA,u.length,h,c,b);!h&&We&&(u[Ce].providerFactory=at),e_(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(at),y.push(at)}else e_(p,s,ie>-1?ie:Ce,JC(u[h?Ce:ie],b,!h&&c));!h&&c&&We&&u[Ce].componentProviders++}}}function e_(s,o,u,c){const h=oc(o),p=function GT(s){return!!s.useClass}(o);if(h||p){const b=(p?J(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=A.indexOf(u);-1===M?A.push(u,[c,b]):A[M+1].push(c,b)}else A.push(u,b)}}}function JC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function hh(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function fA(s,o,u,c){return Vr(this.multi,[])}function eb(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=qi(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),Vr(h,p);for(let b=y;b<E.length;b++)p.push(E[b])}else p=[],Vr(h,p);return p}function Vr(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function su(s,o=[]){return u=>{u.providersResolver=(c,h)=>function hA(s,o,u){const c=Jt();if(c.firstCreatePass){const h=br(s);l0(u,c.data,c.blueprint,h,!0),l0(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class ol{}class tb{}function Ve(s,o){return new al(s,o??null)}class al extends ol{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new HI(this);const c=Gr(o);this._bootstrapComponents=Qa(c.bootstrap),this._r3Injector=cm(o,u,[{provide:ol,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ap extends tb{constructor(o){super(),this.moduleType=o}create(o){return new al(this.moduleType,o)}}class it extends ol{constructor(o,u,c){super(),this.componentFactoryResolver=new HI(this),this.instance=null;const h=new qy([...o,{provide:ol,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],u||nm(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function mt(s,o,u=null){return new it(s,o,u).injector}let pA=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Za(0,u.type),h=c.length>0?mt([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=wt({token:s,providedIn:"environment",factory:()=>new s(He(uc))}),s})();function Ze(s){s.getStandaloneInjector=o=>o.get(pA).getOrCreateStandaloneInjector(s)}function vt(s,o,u,c){return function Mp(s,o,u,c,h,p){const y=o+u;return Qi(s,y,h)?da(s,y+1,p?c.call(p,h):c(h)):Rp(s,y+1)}(we(),Lr(),s,o,u,c)}function Rp(s,o){const u=s[o];return u===$t?void 0:u}function gs(s,o){const u=Jt();let c;const h=s+22;u.firstCreatePass?(c=function g0(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=so(c.type)),y=nr(jf);try{const E=cs(!1),b=p();return cs(E),function nC(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,we(),h,b),b}finally{nr(y)}}function ou(s,o,u,c){const h=s+22,p=we(),y=Ss(p,h);return function Ji(s,o){return s[1].data[o].pure}(p,h)?function sb(s,o,u,c,h,p,y){const E=o+u;return dc(s,E,h,p)?da(s,E+2,y?c.call(y,h,p):c(h,p)):Rp(s,E+2)}(p,Lr(),o,y.transform,u,c,y):y.transform(u,c)}function Cc(s){return o=>{setTimeout(s,void 0,o)}}const Ci=class CA extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,p=u||(()=>null),y=c;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=Cc(p),h&&(h=Cc(h)),y&&(y=Cc(y)));const E=super.subscribe({next:h,error:p,complete:y});return o instanceof $.w0&&o.add(E),E}};function bA(){return this._results[wo()]()}class au{get changes(){return this._changes||(this._changes=new Ci)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=wo(),c=au.prototype;c[u]||(c[u]=bA)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=function Zr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Xl(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mh=(()=>{class s{}return s.__NG_ELEMENT_ID__=TA,s})();const _0=mh,DA=class extends _0{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=hs(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),fm(c,h,o),new jd(h)}};function TA(){return Oi(pr(),we())}function Oi(s,o){return 4&s.type?new DA(o,s,lc(s,o)):null}let r_=(()=>{class s{}return s.__NG_ELEMENT_ID__=y0,s})();function y0(){return ul(pr(),we())}const SA=r_,ab=class extends SA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return lc(this._hostTNode,this._hostLView)}get injector(){return new Zs(this._hostTNode,this._hostLView)}get parentInjector(){const o=ja(this._hostTNode,this._hostLView);if(Gl(o)){const u=fo(o,this._hostLView),c=Ba(o);return new Zs(u[1].data[c+8],u)}return new Zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=uu(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const y=o.createEmbeddedView(u||{},p);return this.insert(y,h),y}createComponent(o,u,c,h,p){const y=o&&!function Bu(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const j=u||{};E=j.index,c=j.injector,h=j.projectableNodes,p=j.environmentInjector||j.ngModuleRef}const b=y?o:new Qf(on(o)),A=c||this.parentInjector;if(!p&&null==b.ngModule){const K=(y?A:this.parentInjector).get(uc,null);K&&(p=K)}const M=b.create(A,h,void 0,p);return this.insert(M.hostView,E),M}insert(o,u){const c=o._lView,h=c[1];if(function tf(s){return _i(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const j=c[3],K=new ab(j,j[6],j[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function Sd(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Jl(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Wu(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,c,y,p);const E=xy(p,y),b=c[11],A=Wg(b,y[7]);return null!==A&&function Mf(s,o,u,c,h,p){c[0]=h,c[6]=o,Rd(s,c,u,1,h,p)}(h,y[6],b,c,A,E),o.attachToViewContainerRef(),Jl(i_(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=uu(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Ad(this._lContainer,u);c&&(za(i_(this._lContainer),u),Nf(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Ad(this._lContainer,u);return c&&null!=za(i_(this._lContainer),u)?new jd(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function uu(s){return s[8]}function i_(s){return s[8]||(s[8]=[])}function ul(s,o){let u;const c=o[s.index];if(_i(c))u=c;else{let h;if(8&s.type)h=On(c);else{const p=o[11];h=p.createComment("");const y=Dr(s,o);Ku(p,Wg(p,y),h,function Ty(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=u=lv(c,o,h,s),Zf(o,u)}return new ab(u,s,o)}class s_{constructor(o){this.queryList=o,this.matches=null}clone(){return new s_(this.queryList)}setDirty(){this.queryList.setDirty()}}class bc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new bc(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==du(o,u).matches&&this.queries[u].setDirty()}}class _h{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class o_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new o_(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class v0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new v0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,AA(u,p)),this.matchTNodeWithReadOption(o,u,Ha(u,o,p,!1,!1))}else c===mh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ha(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===om||h===r_||h===mh&&4&u.type)this.addMatch(u.index,-2);else{const p=Ha(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function AA(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function xA(s,o,u,c){return-1===u?function Qr(s,o){return 11&s.type?lc(s,o):4&s.type?Oi(s,o):null}(o,s):-2===u?function ll(s,o,u){return u===om?lc(o,s):u===mh?Oi(o,s):u===r_?ul(o,s):void 0}(s,o,c):qi(s,s[1],u,o)}function sr(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=u.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:xA(o,p[A],y[b+1],u.metadata.read))}h.matches=E}return h.matches}function lu(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const y=sr(s,o,h,u);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(y[E/2]);else{const A=p[E+1],M=o[-b];for(let j=10;j<M.length;j++){const K=M[j];K[17]===K[3]&&lu(K[1],K,A,c)}if(null!==M[9]){const j=M[9];for(let K=0;K<j.length;K++){const ie=j[K];lu(ie[1],ie,A,c)}}}}}return c}function a_(s){const o=we(),u=Jt(),c=cf();jl(c+1);const h=du(u,c);if(s.dirty&&function Pu(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?lu(u,o,c,[]):sr(u,o,h,c);s.reset(p,nP),s.notifyOnChanges()}return!0}return!1}function yh(s,o,u,c){const h=Jt();if(h.firstCreatePass){const p=pr();(function To(s,o,u){null===s.queries&&(s.queries=new o_),s.queries.track(new v0(o,u))})(h,new _h(o,u,c),p.index),function Np(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function cl(s,o,u){const c=new au(4==(4&u));PI(s,o,c,c.destroy),null===o[19]&&(o[19]=new bc),o[19].queries.push(new s_(c))}(h,we(),u)}function cu(){return function u_(s,o){return s[19].queries[o].queryList}(we(),cf())}function du(s,o){return s.queries.getByIndex(o)}function Ih(...s){}const f_=new Qt("Application Initializer");let ga=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Ih,this.reject=Ih,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(rp(p))u.push(p);else if(aC(p)){const y=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He(f_,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Fi=new Qt("AppId",{providedIn:"root",factory:function p_(){return`${Ac()}${Ac()}${Ac()}`}});function Ac(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const k0=new Qt("Platform Initializer"),O0=new Qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ch=new Qt("appBootstrapListener");let GA=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Fp=new Qt("LocaleId",{providedIn:"root",factory:()=>Xe(Fp,et.Optional|et.SkipSelf)||function yb(){return typeof $localize<"u"&&$localize.locale||vc}()}),vb=new Qt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let bh=(()=>{class s{compileModuleSync(u){return new Ap(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Qa(Gr(u).declarations).reduce((y,E)=>{const b=on(E);return b&&y.push(new Qf(b)),y},[]);return new wb(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Lp=(()=>Promise.resolve(0))();function U0(s){typeof Zone>"u"?Lp.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ts{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ci(!1),this.onMicrotaskEmpty=new Ci(!1),this.onStable=new Ci(!1),this.onError=new Ci(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function WA(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Up(s){const o=()=>{!function ZA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,V0(s),s.isCheckStableRunning=!0,m_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),V0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,y,E)=>{try{return B0(s),u.invokeTask(h,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Nc(s)}},onInvoke:(u,c,h,p,y,E,b)=>{try{return B0(s),u.invoke(h,p,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Nc(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,V0(s),m_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ts.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(ts.isInAngularZone())throw new me(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,g_,Ih,Ih);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const g_={};function m_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function V0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function B0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Nc(s){s._nesting--,m_(s)}class fu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci,this.onMicrotaskEmpty=new Ci,this.onStable=new Ci,this.onError=new Ci}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const j0=new Qt(""),H0=new Qt("");let G0,Eb=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,G0||(function $0(s){G0=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ts.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(He(ts),He(Pc),He(H0))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),Pc=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return G0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),An=null;const cn=new Qt("AllowMultipleToken"),__=new Qt("PlatformDestroyListeners");class Ib{constructor(o,u){this.name=o,this.token=u}}function Dh(s,o,u=[]){const c=`Platform: ${o}`,h=new Qt(c);return(p=[])=>{let y=z0();if(!y||y.injector.get(cn,!1)){const E=[...u,...p,{provide:h,useValue:!0}];s?s(E):function Vp(s){if(An&&!An.get(cn,!1))throw new me(400,!1);An=s;const o=s.get(Bp);(function So(s){const o=s.get(k0,null);o&&o.forEach(u=>u())})(s)}(function bb(s=[],o){return la.create({name:o,providers:[{provide:tm,useValue:"platform"},{provide:__,useValue:new Set([()=>An=null])},...s]})}(E,c))}return function YA(s){const o=z0();if(!o)throw new me(401,!1);return o}()}}function z0(){return An?.get(Bp)??null}let Bp=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function Sh(s,o){let u;return u="noop"===s?new fu:("zone.js"===s?void 0:s)||new ts(o),u}(c?.ngZone,function Th(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:ts,useValue:h}];return h.run(()=>{const y=la.create({providers:p,parent:this.injector,name:u.moduleType.name}),E=u.create(y),b=E.injector.get(Uf,null);if(!b)throw new me(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:M=>{b.handleError(M)}});E.onDestroy(()=>{$p(this._modules,E),A.unsubscribe()})}),function jp(s,o,u){try{const c=u();return rp(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,h,()=>{const A=E.injector.get(ga);return A.runInitializers(),A.donePromise.then(()=>(function Bn(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(qv=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Fp,vc)||vc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const h=q0({},c);return function gl(s,o,u){const c=new Ap(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(Hp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new me(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(__,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He(la))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function q0(s,o){return Array.isArray(o)?o.reduce(q0,s):{...s,...o}}let Hp=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new k.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ts.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(p,y.pipe((0,ae.B)()))}bootstrap(u,c){const h=u instanceof Yy;if(!this._injector.get(ga).done)throw!h&&Kn(u),new me(405,false);let y;y=h?u:this._injector.get(Ya).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function ms(s){return s.isBoundToModule}(y)?void 0:this._injector.get(ol),A=y.create(la.NULL,[],c||y.selector,E),M=A.location.nativeElement,j=A.injector.get(j0,null);return j?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),$p(this.components,A),j?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;$p(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(Ch,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>$p(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new me(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(He(ts),He(uc),He(Uf))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function $p(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function Sb(){return!1}let Ah=(()=>{class s{}return s.__NG_ELEMENT_ID__=xb,s})();function xb(s){return function QA(s,o,u){if(Ta(s)&&!u){const c=fr(s.index,o);return new jd(c,c)}return 47&s.type?new jd(o[16],o):null}(pr(),we(),16==(16&s))}class Pb{constructor(){}supports(o){return $d(o)}create(o){return new _l(o)}}const tx=(s,o)=>o;class _l{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tx}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<X0(c,h,p)?u:c,E=X0(y,h,p),b=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{p||(p=[]);const A=E-h,M=b-h;if(A!=M){for(let K=0;K<A;K++){const ie=K<p.length?p[K]:p[K]=0,Ce=ie+K;M<=Ce&&Ce<A&&(p[K]=ie+1)}p[y.previousIndex]=M-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!$d(o))throw new me(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else h=0,function FS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[wo()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(h,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,h)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new Rh(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ob),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ob),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Rh{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Ob{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new kb,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function X0(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class Li{constructor(){}supports(o){return o instanceof Map||XI(o)}create(){return new nx}}class nx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||XI(o)))throw new me(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new Fb(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Fb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ao(){return new w_([new Pb])}let w_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ao()),deps:[[s,new T,new ra]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new me(901,!1)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:Ao}),s})();function ew(){return new tw([new Li])}let tw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ew()),deps:[[s,new T,new ra]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new me(901,!1)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:ew}),s})();const sx=Dh(null,"core",[]);let ox=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(Hp))},s.\u0275mod=ko({type:s}),s.\u0275inj=ss({}),s})();function ax(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ht,Se,V)=>{V.d(Se,{Z:()=>Ge});var d=V(2090),$=V(4859),k=V(9681),se=V(1877);class ae{constructor(me,Te){this._delegate=me,this.firebase=Te,(0,k._addComponent)(me,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,Te=k._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(me);return!Pe.isInitialized()&&"EXPLICIT"===(null===(De=Pe.getComponent())||void 0===De?void 0:De.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:Te})}_removeServiceInstance(me,Te=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Te)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function ge(){const rt=function fe(rt){const me={},Te={__esModule:!0,initializeApp:function Oe(ee,ce={}){const Ie=k.initializeApp(ee,ce);if((0,d.r3)(me,Ie.name))return me[Ie.name];const Q=new rt(Ie,Te);return me[Ie.name]=Q,Q},app:Pe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ae(ee){const ce=ee.name,Ie=ce.replace("-compat","");if(k._registerComponent(ee)&&"PUBLIC"===ee.type){const Q=(X=Pe())=>{if("function"!=typeof X[Ie])throw ye.create("invalid-app-argument",{appName:ce});return X[Ie]()};void 0!==ee.serviceProps&&(0,d.ZB)(Q,ee.serviceProps),Te[Ie]=Q,rt.prototype[Ie]=function(...X){return this._getService.bind(this,ce).apply(this,ee.multipleInstances?X:[])}}return"PUBLIC"===ee.type?Te[Ie]:null},removeApp:function De(ee){delete me[ee]},useAsService:function $e(ee,ce){return"serverAuth"===ce?null:ce},modularAPIs:k}};function Pe(ee){if(!(0,d.r3)(me,ee=ee||k._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:ee});return me[ee]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function Me(){return Object.keys(me).map(ee=>me[ee])}}),Pe.App=rt,Te}(ae);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function me(Te){(0,d.ZB)(rt,Te)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),rt}(),Z=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=q;!function Re(rt){(0,k.registerVersion)("@firebase/app-compat","0.2.4",rt)}()},9681:(ht,Se,V)=>{V.r(Se),V.d(Se,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Es,_DEFAULT_ENTRY_NAME:()=>mn,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>cr,_apps:()=>Bt,_clearComponents:()=>ss,_components:()=>Et,_getProvider:()=>wt,_registerComponent:()=>Wt,_removeServiceInstance:()=>ei,deleteApp:()=>Di,getApp:()=>Gn,getApps:()=>hi,initializeApp:()=>ji,onLog:()=>et,registerVersion:()=>yr,setLogLevel:()=>Pr});var d=V(5861),$=V(4859),k=V(1877),se=V(2090),ae=V(8766);class ue{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function ye(He){return"VERSION"===He.getComponent()?.type}(Xe)){const yt=Xe.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Xe=>Xe).join(" ")}}const fe="@firebase/app",q=new k.Yd("@firebase/app"),mn="[DEFAULT]",bt={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,Et=new Map;function Xt(He,be){try{He.container.addComponent(be)}catch(Xe){q.debug(`Component ${be.name} failed to register with FirebaseApp ${He.name}`,Xe)}}function cr(He,be){He.container.addOrOverwriteComponent(be)}function Wt(He){const be=He.name;if(Et.has(be))return q.debug(`There were multiple attempts to register component ${be}.`),!1;Et.set(be,He);for(const Xe of Bt.values())Xt(Xe,He);return!0}function wt(He,be){const Xe=He.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),He.container.getProvider(be)}function ei(He,be,Xe=mn){wt(He,be).clearInstance(Xe)}function ss(){Et.clear()}const xn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class os{constructor(be,Xe,yt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const Es="9.17.2";function ji(He,be={}){let Xe=He;"object"!=typeof be&&(be={name:be});const yt=Object.assign({name:mn,automaticDataCollectionEnabled:!1},be),St=yt.name;if("string"!=typeof St||!St)throw xn.create("bad-app-name",{appName:String(St)});if(Xe||(Xe=(0,se.aH)()),!Xe)throw xn.create("no-options");const Yt=Bt.get(St);if(Yt){if((0,se.vZ)(Xe,Yt.options)&&(0,se.vZ)(yt,Yt.config))return Yt;throw xn.create("duplicate-app",{appName:St})}const Zn=new $.H0(St);for(const z of Et.values())Zn.addComponent(z);const W=new os(Xe,yt,Zn);return Bt.set(St,W),W}function Gn(He=mn){const be=Bt.get(He);if(!be&&He===mn)return ji();if(!be)throw xn.create("no-app",{appName:He});return be}function hi(){return Array.from(Bt.values())}function Di(He){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(He){const be=He.name;Bt.has(be)&&(Bt.delete(be),yield Promise.all(He.container.getProviders().map(Xe=>Xe.delete())),He.isDeleted=!0)})).apply(this,arguments)}function yr(He,be,Xe){var yt;let St=null!==(yt=bt[He])&&void 0!==yt?yt:He;Xe&&(St+=`-${Xe}`);const Yt=St.match(/\s|\//),Zn=be.match(/\s|\//);if(Yt||Zn){const W=[`Unable to register library "${St}" with version "${be}":`];return Yt&&W.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Yt&&Zn&&W.push("and"),Zn&&W.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void q.warn(W.join(" "))}Wt(new $.wA(`${St}-version`,()=>({library:St,version:be}),"VERSION"))}function et(He,be){if(null!==He&&"function"!=typeof He)throw xn.create("invalid-log-argument");(0,k.Am)(He,be)}function Pr(He){(0,k.Ub)(He)}const zn="firebase-heartbeat-store";let ti=null;function xt(){return ti||(ti=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(He,be)=>{0===be&&He.createObjectStore(zn)}}).catch(He=>{throw xn.create("idb-open",{originalErrorMessage:He.message})})),ti}function Rt(){return(Rt=(0,d.Z)(function*(He){try{return(yield xt()).transaction(zn).objectStore(zn).get(qn(He))}catch(be){if(be instanceof se.ZR)q.warn(be.message);else{const Xe=xn.create("idb-get",{originalErrorMessage:be?.message});q.warn(Xe.message)}}})).apply(this,arguments)}function En(He,be){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(He,be){try{const yt=(yield xt()).transaction(zn,"readwrite");return yield yt.objectStore(zn).put(be,qn(He)),yt.done}catch(Xe){if(Xe instanceof se.ZR)q.warn(Xe.message);else{const yt=xn.create("idb-set",{originalErrorMessage:Xe?.message});q.warn(yt.message)}}})).apply(this,arguments)}function qn(He){return`${He.name}!${He.options.appId}`}class Ti{constructor(be){this.container=be,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new jt(Xe),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var be=this;return(0,d.Z)(function*(){const yt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=Ot();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==St&&!be._heartbeatsCache.heartbeats.some(Yt=>Yt.date===St))return be._heartbeatsCache.heartbeats.push({date:St,agent:yt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Yt=>{const Zn=new Date(Yt.date).valueOf();return Date.now()-Zn<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,d.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Xe=Ot(),{heartbeatsToSend:yt,unsentEntries:St}=function Si(He,be=1024){const Xe=[];let yt=He.slice();for(const St of He){const Yt=Xe.find(Zn=>Zn.agent===St.agent);if(Yt){if(Yt.dates.push(St.date),ni(Xe)>be){Yt.dates.pop();break}}else if(Xe.push({agent:St.agent,dates:[St.date]}),ni(Xe)>be){Xe.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:yt}}(be._heartbeatsCache.heartbeats),Yt=(0,se.L)(JSON.stringify({version:2,heartbeats:yt}));return be._heartbeatsCache.lastSentHeartbeatDate=Xe,St.length>0?(be._heartbeatsCache.heartbeats=St,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Yt})()}}function Ot(){return(new Date).toISOString().substring(0,10)}class jt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,d.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ft(He){return Rt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Xe=this;return(0,d.Z)(function*(){var yt;if(yield Xe._canUseIndexedDBPromise){const Yt=yield Xe.read();return En(Xe.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:Yt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Xe=this;return(0,d.Z)(function*(){var yt;if(yield Xe._canUseIndexedDBPromise){const Yt=yield Xe.read();return En(Xe.app,{lastSentHeartbeatDate:null!==(yt=be.lastSentHeartbeatDate)&&void 0!==yt?yt:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...be.heartbeats]})}})()}}function ni(He){return(0,se.L)(JSON.stringify({version:2,heartbeats:He})).length}!function Wn(He){Wt(new $.wA("platform-logger",be=>new ue(be),"PRIVATE")),Wt(new $.wA("heartbeat",be=>new Ti(be),"PRIVATE")),yr(fe,"0.9.4",He),yr(fe,"0.9.4","esm2017"),yr("fire-js","")}("")},4859:(ht,Se,V)=>{V.d(Se,{H0:()=>fe,wA:()=>k,zt:()=>ae});var d=V(5861),$=V(2090);class k{constructor(q,Z,J){this.name=q,this.instanceFactory=Z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const se="[DEFAULT]";class ae{constructor(q,Z){this.name=q,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const Z=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(Z)){const J=new $.BH;if(this.instancesDeferred.set(Z,J),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:Z});Be&&J.resolve(Be)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(q){var Z;const J=this.normalizeInstanceIdentifier(q?.identifier),Be=null!==(Z=q?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Re){if(Be)return null;throw Re}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ye(ge){return"EAGER"===ge.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[Z,J]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(Z);try{const Re=this.getOrInitializeService({instanceIdentifier:Be});J.resolve(Re)}catch{}}}}clearInstance(q=se){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,d.Z)(function*(){const Z=Array.from(q.instances.values());yield Promise.all([...Z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...Z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=se){return this.instances.has(q)}getOptions(q=se){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:Z={}}=q,J=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:J,options:Z});for(const[Re,Ge]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Re)&&Ge.resolve(Be);return Be}onInit(q,Z){var J;const Be=this.normalizeInstanceIdentifier(Z),Re=null!==(J=this.onInitCallbacks.get(Be))&&void 0!==J?J:new Set;Re.add(q),this.onInitCallbacks.set(Be,Re);const Ge=this.instances.get(Be);return Ge&&q(Ge,Be),()=>{Re.delete(q)}}invokeOnInitCallbacks(q,Z){const J=this.onInitCallbacks.get(Z);if(J)for(const Be of J)try{Be(q,Z)}catch{}}getOrInitializeService({instanceIdentifier:q,options:Z={}}){let J=this.instances.get(q);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=q,ge===se?void 0:ge),options:Z}),this.instances.set(q,J),this.instancesOptions.set(q,Z),this.invokeOnInitCallbacks(J,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,J)}catch{}var ge;return J||null}normalizeInstanceIdentifier(q=se){return this.component?this.component.multipleInstances?q:se:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const Z=this.getProvider(q.name);if(Z.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);Z.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const Z=new ae(q,this);return this.providers.set(q,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Se,V)=>{V.d(Se,{Am:()=>ge,Ub:()=>fe,Yd:()=>ye,in:()=>$});const d=[];var $=(()=>{return(q=$||($={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",$;var q})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ae={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ue=(q,Z,...J)=>{if(Z<q.logLevel)return;const Be=(new Date).toISOString(),Re=ae[Z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Re](`[${Be}]  ${q.name}:`,...J)};class ye{constructor(Z){this.name=Z,this._logLevel=se,this._logHandler=ue,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in $))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?k[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...Z),this._logHandler(this,$.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...Z),this._logHandler(this,$.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...Z),this._logHandler(this,$.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...Z),this._logHandler(this,$.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...Z),this._logHandler(this,$.ERROR,...Z)}}function fe(q){d.forEach(Z=>{Z.setLogLevel(q)})}function ge(q,Z){for(const J of d){let Be=null;Z&&Z.level&&(Be=k[Z.level]),J.userLogHandler=null===q?null:(Re,Ge,...rt)=>{const me=rt.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Ge>=(Be??Re.logLevel)&&q({level:$[Ge].toLowerCase(),message:me,args:rt,type:Re.name})}}}},259:(ht,Se,V)=>{V.d(Se,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=V(9681);(0,d.registerVersion)("firebase","9.17.2","app")},9260:(ht,Se,V)=>{V.d(Se,{Z:()=>d.Z});var d=V(3942);d.Z.registerVersion("firebase","9.17.2","app-compat")},9568:(ht,Se,V)=>{V.r(Se);var d=V(5861),$=V(3942),k=V(8401),se=V(2090),ye=(V(9681),V(1877),V(4859));function fe(){return window}function Z(){return(Z=(0,d.Z)(function*(O,F,P){var te;const{BuildInfo:Ee}=fe();(0,k.ap)(F.sessionId,"AuthEvent did not contain a session ID");const Ye=yield Te(F.sessionId),ze={};return(0,k.aq)()?ze.ibi=Ee.packageName:(0,k.ar)()?ze.apn=Ee.packageName:(0,k.as)(O,"operation-not-supported-in-this-environment"),Ee.displayName&&(ze.appDisplayName=Ee.displayName),ze.sessionId=Ye,(0,k.at)(O,P,F.type,void 0,null!==(te=F.eventId)&&void 0!==te?te:void 0,ze)})).apply(this,arguments)}function Be(){return(Be=(0,d.Z)(function*(O){const{BuildInfo:F}=fe(),P={};(0,k.aq)()?P.iosBundleId=F.packageName:(0,k.ar)()?P.androidPackageName=F.packageName:(0,k.as)(O,"operation-not-supported-in-this-environment"),yield(0,k.au)(O,P)})).apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(O,F,P){const{cordova:te}=fe();let Ee=()=>{};try{yield new Promise((Ye,ze)=>{let Dt=null;function zt(){var Tt;Ye();const wr=null===(Tt=te.plugins.browsertab)||void 0===Tt?void 0:Tt.close;"function"==typeof wr&&wr(),"function"==typeof P?.close&&P.close()}function Nt(){Dt||(Dt=window.setTimeout(()=>{ze((0,k.aw)(O,"redirect-cancelled-by-user"))},2e3))}function Rn(){"visible"===document?.visibilityState&&Nt()}F.addPassiveListener(zt),document.addEventListener("resume",Nt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",Rn,!1),Ee=()=>{F.removePassiveListener(zt),document.removeEventListener("resume",Nt,!1),document.removeEventListener("visibilitychange",Rn,!1),Dt&&window.clearTimeout(Dt)}})}finally{Ee()}})).apply(this,arguments)}function Te(O){return De.apply(this,arguments)}function De(){return(De=(0,d.Z)(function*(O){const F=Pe(O),P=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(P)).map(Ee=>Ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pe(O){if((0,k.ap)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const F=new ArrayBuffer(O.length),P=new Uint8Array(F);for(let te=0;te<O.length;te++)P[te]=O.charCodeAt(te);return P}class Me extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(F)),super.onEvent(F)}initialized(){var F=this;return(0,d.Z)(function*(){yield F.initPromise})()}}function ee(O){return ce.apply(this,arguments)}function ce(){return(ce=(0,d.Z)(function*(O){const F=yield X()._get(he(O));return F&&(yield X()._remove(he(O))),F})).apply(this,arguments)}function Q(){const O=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<20;P++){const te=Math.floor(Math.random()*F.length);O.push(F.charAt(te))}return O.join("")}function X(){return(0,k.az)(k.b)}function he(O){return(0,k.aA)("authEvent",O.config.apiKey,O.name)}function Ue(O){if(!O?.includes("?"))return{};const[F,...P]=O.split("?");return(0,se.zd)(P.join("?"))}const mn=class sn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(F){var P=this;return(0,d.Z)(function*(){const te=F._key();let Ee=P.eventManagers.get(te);return Ee||(Ee=new Me(F),P.eventManagers.set(te,Ee),P.attachCallbackListeners(F,Ee)),Ee})()}_openPopup(F){(0,k.as)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,P,te,Ee){var Ye=this;return(0,d.Z)(function*(){!function me(O){var F,P,te,Ee,Ye,ze,Dt,zt,Nt,Rn;const Tt=fe();(0,k.ax)("function"==typeof(null===(F=Tt?.universalLinks)||void 0===F?void 0:F.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(P=Tt?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(Ye=null===(Ee=null===(te=Tt?.cordova)||void 0===te?void 0:te.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===Ye?void 0:Ye.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(zt=null===(Dt=null===(ze=Tt?.cordova)||void 0===ze?void 0:ze.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===zt?void 0:zt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Rn=null===(Nt=Tt?.cordova)||void 0===Nt?void 0:Nt.InAppBrowser)||void 0===Rn?void 0:Rn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const ze=yield Ye._initialize(F);yield ze.initialized(),ze.resetRedirect(),(0,k.aD)(),yield Ye._originValidation(F);const Dt=function Ae(O,F,P=null){return{type:F,eventId:P,urlResponse:null,sessionId:Q(),postBody:null,tenantId:O.tenantId,error:(0,k.aw)(O,"no-auth-event")}}(F,te,Ee);yield function $e(O,F){return X()._set(he(O),F)}(F,Dt);const zt=yield function q(O,F,P){return Z.apply(this,arguments)}(F,Dt,P),Nt=yield function Re(O){const{cordova:F}=fe();return new Promise(P=>{F.plugins.browsertab.isAvailable(te=>{let Ee=null;te?F.plugins.browsertab.openUrl(O):Ee=F.InAppBrowser.open(O,(0,k.av)()?"_blank":"_system","location=yes"),P(Ee)})})}(zt);return function Ge(O,F,P){return rt.apply(this,arguments)}(F,ze,Nt)})()}_isIframeWebStorageSupported(F,P){throw new Error("Method not implemented.")}_originValidation(F){const P=F._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function J(O){return Be.apply(this,arguments)}(F)),this.originValidationPromises[P]}attachCallbackListeners(F,P){const{universalLinks:te,handleOpenURL:Ee,BuildInfo:Ye}=fe(),ze=setTimeout((0,d.Z)(function*(){yield ee(F),P.onEvent(bt())}),500),Dt=function(){var Rn=(0,d.Z)(function*(Tt){clearTimeout(ze);const wr=yield ee(F);let Al=null;wr&&Tt?.url&&(Al=function Ie(O,F){var P,te;const Ee=function Le(O){const F=Ue(O),P=F.link?decodeURIComponent(F.link):void 0,te=Ue(P).link,Ee=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return Ue(Ee).link||Ee||te||P||O}(F);if(Ee.includes("/__/auth/callback")){const Ye=Ue(Ee),ze=Ye.firebaseError?function oe(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Ye.firebaseError)):null,Dt=null===(te=null===(P=ze?.code)||void 0===P?void 0:P.split("auth/"))||void 0===te?void 0:te[1],zt=Dt?(0,k.aw)(Dt):null;return zt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:Ee,postBody:null}}return null}(wr,Tt.url)),P.onEvent(Al||bt())});return function(wr){return Rn.apply(this,arguments)}}();typeof te<"u"&&"function"==typeof te.subscribe&&te.subscribe(null,Dt);const zt=Ee,Nt=`${Ye.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var Rn=(0,d.Z)(function*(Tt){if(Tt.toLowerCase().startsWith(Nt)&&Dt({url:Tt}),"function"==typeof zt)try{zt(Tt)}catch(wr){console.error(wr)}});return function(Tt){return Rn.apply(this,arguments)}}()}};function bt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function Wt(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function ei(O=(0,se.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Es(){try{const O=self.localStorage,F=k.aI();if(O)return O.setItem(F,"1"),O.removeItem(F),!function os(O=(0,se.z$)()){return function $n(){return(0,se.w1)()&&11===document?.documentMode}()||function xn(O=(0,se.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,se.hl)()}catch{return ji()&&(0,se.hl)()}return!1}function ji(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function wt(){return"http:"===Wt()||"https:"===Wt()}()||(0,se.ru)()||ei())&&!function ss(){return(0,se.b$)()||(0,se.UG)()}()&&Es()&&!ji()}function hi(){return ei()&&typeof document<"u"}function _n(){return(_n=(0,d.Z)(function*(){return!!hi()&&new Promise(O=>{const F=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),O(!0)})})})).apply(this,arguments)}const et={LOCAL:"local",NONE:"none",SESSION:"session"},Pr=k.ax,kr="persistence";function zn(O){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(O){yield O._initializationPromise;const F=ft(),P=k.aA(kr,O.config.apiKey,O.name);F&&F.setItem(P,O._getPersistence())})).apply(this,arguments)}function ft(){var O;try{return(null===(O=function yr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Rt=k.ax;class En{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(mn),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(F){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,P,te,Ee){var Ye=this;return(0,d.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openPopup(F,P,te,Ee)})()}_openRedirect(F,P,te,Ee){var Ye=this;return(0,d.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openRedirect(F,P,te,Ee)})()}_isIframeWebStorageSupported(F,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,P)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return hi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,d.Z)(function*(){if(F.underlyingResolver)return;const P=yield function Di(){return _n.apply(this,arguments)}();F.underlyingResolver=P?F.cordovaResolver:F.browserResolver})()}}function kn(O){return O.unwrap()}function vr(O){return Ti(O)}function Ti(O){const{_tokenResponse:F}=O instanceof se.ZR?O.customData:O;if(!F)return null;if(!(O instanceof se.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return k.P.credentialFromResult(O);const P=F.providerId;if(!P||P===k.o.PASSWORD)return null;let te;switch(P){case k.o.GOOGLE:te=k.Q;break;case k.o.FACEBOOK:te=k.N;break;case k.o.GITHUB:te=k.T;break;case k.o.TWITTER:te=k.W;break;default:const{oauthIdToken:Ee,oauthAccessToken:Ye,oauthTokenSecret:ze,pendingToken:Dt,nonce:zt}=F;return Ye||ze||Ee||Dt?Dt?P.startsWith("saml.")?k.aL._create(P,Dt):k.J._fromParams({providerId:P,signInMethod:P,pendingToken:Dt,idToken:Ee,accessToken:Ye}):new k.U(P).credential({idToken:Ee,accessToken:Ye,rawNonce:zt}):null}return O instanceof se.ZR?te.credentialFromError(O):te.credentialFromResult(O)}function Ot(O,F){return F.catch(P=>{throw P instanceof se.ZR&&function dr(O,F){var P;const te=null===(P=F.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new ni(O,k.an(O,F));else if(te){const Ee=Ti(F),Ye=F;Ee&&(Ye.credential=Ee,Ye.tenantId=te.tenantId||void 0,Ye.email=te.email||void 0,Ye.phoneNumber=te.phoneNumber||void 0)}}(O,P),P}).then(P=>{const Ee=P.user;return{operationType:P.operationType,credential:vr(P),additionalUserInfo:k.al(P),user:Wn.getOrCreate(Ee)}})}function Si(O,F){return jt.apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(O,F){const P=yield F;return{verificationId:P.verificationId,confirm:te=>Ot(O,P.confirm(te))}})).apply(this,arguments)}class ni{constructor(F,P){this.resolver=P,this.auth=function qn(O){return O.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return Ot(kn(this.auth),this.resolver.resolveSignIn(F))}}class Wn{constructor(F){this._delegate=F,this.multiFactor=k.ao(F)}static getOrCreate(F){return Wn.USER_MAP.has(F)||Wn.USER_MAP.set(F,new Wn(F)),Wn.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var P=this;return(0,d.Z)(function*(){return Ot(P.auth,k.Z(P._delegate,F))})()}linkWithPhoneNumber(F,P){var te=this;return(0,d.Z)(function*(){return Si(te.auth,k.l(te._delegate,F,P))})()}linkWithPopup(F){var P=this;return(0,d.Z)(function*(){return Ot(P.auth,k.d(P._delegate,F,En))})()}linkWithRedirect(F){var P=this;return(0,d.Z)(function*(){return yield zn(k.aE(P.auth)),k.g(P._delegate,F,En)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var P=this;return(0,d.Z)(function*(){return Ot(P.auth,k._(P._delegate,F))})()}reauthenticateWithPhoneNumber(F,P){return Si(this.auth,k.r(this._delegate,F,P))}reauthenticateWithPopup(F){return Ot(this.auth,k.e(this._delegate,F,En))}reauthenticateWithRedirect(F){var P=this;return(0,d.Z)(function*(){return yield zn(k.aE(P.auth)),k.h(P._delegate,F,En)})()}sendEmailVerification(F){return k.ab(this._delegate,F)}unlink(F){var P=this;return(0,d.Z)(function*(){return yield k.ak(P._delegate,F),P})()}updateEmail(F){return k.ag(this._delegate,F)}updatePassword(F){return k.ah(this._delegate,F)}updatePhoneNumber(F){return k.u(this._delegate,F)}updateProfile(F){return k.af(this._delegate,F)}verifyBeforeUpdateEmail(F,P){return k.ac(this._delegate,F,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wn.USER_MAP=new WeakMap;const He=k.ax;let be=(()=>{class O{constructor(P,te){if(this.app=P,te.isInitialized())return this._delegate=te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ee}=P.options;He(Ee,"invalid-api-key",{appName:P.name}),He(Ee,"invalid-api-key",{appName:P.name});const Ye=typeof window<"u"?En:void 0;this._delegate=te.initialize({options:{persistence:yt(Ee,P.name),popupRedirectResolver:Ye}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,te){k.G(this._delegate,P,te)}applyActionCode(P){return k.a2(this._delegate,P)}checkActionCode(P){return k.a3(this._delegate,P)}confirmPasswordReset(P,te){return k.a1(this._delegate,P,te)}createUserWithEmailAndPassword(P,te){var Ee=this;return(0,d.Z)(function*(){return Ot(Ee._delegate,k.a5(Ee._delegate,P,te))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return k.aa(this._delegate,P)}isSignInWithEmailLink(P){return k.a8(this._delegate,P)}getRedirectResult(){var P=this;return(0,d.Z)(function*(){He(Gn(),P._delegate,"operation-not-supported-in-this-environment");const te=yield k.j(P._delegate,En);return te?Ot(P._delegate,Promise.resolve(te)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function Bt(O,F){(0,k.aE)(O)._logFramework(F)}(this._delegate,P)}onAuthStateChanged(P,te,Ee){const{next:Ye,error:ze,complete:Dt}=Xe(P,te,Ee);return this._delegate.onAuthStateChanged(Ye,ze,Dt)}onIdTokenChanged(P,te,Ee){const{next:Ye,error:ze,complete:Dt}=Xe(P,te,Ee);return this._delegate.onIdTokenChanged(Ye,ze,Dt)}sendSignInLinkToEmail(P,te){return k.a7(this._delegate,P,te)}sendPasswordResetEmail(P,te){return k.a0(this._delegate,P,te||void 0)}setPersistence(P){var te=this;return(0,d.Z)(function*(){let Ee;switch(function nr(O,F){Pr(Object.values(et).includes(F),O,"invalid-persistence-type"),(0,se.b$)()?Pr(F!==et.SESSION,O,"unsupported-persistence-type"):(0,se.UG)()?Pr(F===et.NONE,O,"unsupported-persistence-type"):ji()?Pr(F===et.NONE||F===et.LOCAL&&(0,se.hl)(),O,"unsupported-persistence-type"):Pr(F===et.NONE||Es(),O,"unsupported-persistence-type")}(te._delegate,P),P){case et.SESSION:Ee=k.a;break;case et.LOCAL:Ee=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case et.NONE:Ee=k.L;break;default:return k.as("argument-error",{appName:te._delegate.name})}return te._delegate.setPersistence(Ee)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return Ot(this._delegate,k.X(this._delegate))}signInWithCredential(P){return Ot(this._delegate,k.Y(this._delegate,P))}signInWithCustomToken(P){return Ot(this._delegate,k.$(this._delegate,P))}signInWithEmailAndPassword(P,te){return Ot(this._delegate,k.a6(this._delegate,P,te))}signInWithEmailLink(P,te){return Ot(this._delegate,k.a9(this._delegate,P,te))}signInWithPhoneNumber(P,te){return Si(this._delegate,k.s(this._delegate,P,te))}signInWithPopup(P){var te=this;return(0,d.Z)(function*(){return He(Gn(),te._delegate,"operation-not-supported-in-this-environment"),Ot(te._delegate,k.c(te._delegate,P,En))})()}signInWithRedirect(P){var te=this;return(0,d.Z)(function*(){return He(Gn(),te._delegate,"operation-not-supported-in-this-environment"),yield zn(te._delegate),k.f(te._delegate,P,En)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return k.a4(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=et,O})();function Xe(O,F,P){let te=O;"function"!=typeof O&&({next:te,error:F,complete:P}=O);const Ee=te;return{next:ze=>Ee(ze&&Wn.getOrCreate(ze)),error:F,complete:P}}function yt(O,F){const P=function xt(O,F){const P=ft();if(!P)return[];const te=k.aA(kr,O,F);switch(P.getItem(te)){case et.NONE:return[k.L];case et.LOCAL:return[k.i,k.a];case et.SESSION:return[k.a];default:return[]}}(O,F);if(typeof self<"u"&&!P.includes(k.i)&&P.push(k.i),typeof window<"u")for(const te of[k.b,k.a])P.includes(te)||P.push(te);return P.includes(k.L)||P.push(k.L),P}class St{constructor(){this.providerId="phone",this._delegate=new k.P(kn($.Z.auth()))}static credential(F,P){return k.P.credential(F,P)}verifyPhoneNumber(F,P){return this._delegate.verifyPhoneNumber(F,P)}unwrap(){return this._delegate}}St.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,St.PROVIDER_ID=k.P.PROVIDER_ID;const Yt=k.ax;class Zn{constructor(F,P,te=$.Z.app()){var Ee;Yt(null===(Ee=te.options)||void 0===Ee?void 0:Ee.apiKey,"invalid-api-key",{appName:te.name}),this._delegate=new k.R(F,P,te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function z(O){O.INTERNAL.registerComponent(new ye.wA("auth-compat",F=>{const P=F.getProvider("app-compat").getImmediate(),te=F.getProvider("auth");return new be(P,te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:St,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Zn,TwitterAuthProvider:k.W,Auth:be,AuthCredential:k.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.3.4")}($.Z)},8766:(ht,Se,V)=>{V.d(Se,{Lj:()=>Oe,X3:()=>Pe});var d=V(5861);let k,se;const ye=new WeakMap,fe=new WeakMap,ge=new WeakMap,q=new WeakMap,Z=new WeakMap;let Re={get(ce,Ie,Q){if(ce instanceof IDBTransaction){if("done"===Ie)return fe.get(ce);if("objectStoreNames"===Ie)return ce.objectStoreNames||ge.get(ce);if("store"===Ie)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Te(ce[Ie])},set:(ce,Ie,Q)=>(ce[Ie]=Q,!0),has:(ce,Ie)=>ce instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in ce};function me(ce){return"function"==typeof ce?function rt(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...Ie){return ce.apply(De(this),Ie),Te(ye.get(this))}:function(...Ie){return Te(ce.apply(De(this),Ie))}:function(Ie,...Q){const X=ce.call(De(this),Ie,...Q);return ge.set(X,Ie.sort?Ie.sort():[Ie]),Te(X)}}(ce):(ce instanceof IDBTransaction&&function Be(ce){if(fe.has(ce))return;const Ie=new Promise((Q,X)=>{const he=()=>{ce.removeEventListener("complete",oe),ce.removeEventListener("error",Le),ce.removeEventListener("abort",Le)},oe=()=>{Q(),he()},Le=()=>{X(ce.error||new DOMException("AbortError","AbortError")),he()};ce.addEventListener("complete",oe),ce.addEventListener("error",Le),ce.addEventListener("abort",Le)});fe.set(ce,Ie)}(ce),((ce,Ie)=>Ie.some(Q=>ce instanceof Q))(ce,function ae(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Re):ce)}function Te(ce){if(ce instanceof IDBRequest)return function J(ce){const Ie=new Promise((Q,X)=>{const he=()=>{ce.removeEventListener("success",oe),ce.removeEventListener("error",Le)},oe=()=>{Q(Te(ce.result)),he()},Le=()=>{X(ce.error),he()};ce.addEventListener("success",oe),ce.addEventListener("error",Le)});return Ie.then(Q=>{Q instanceof IDBCursor&&ye.set(Q,ce)}).catch(()=>{}),Z.set(Ie,ce),Ie}(ce);if(q.has(ce))return q.get(ce);const Ie=me(ce);return Ie!==ce&&(q.set(ce,Ie),Z.set(Ie,ce)),Ie}const De=ce=>Z.get(ce);function Pe(ce,Ie,{blocked:Q,upgrade:X,blocking:he,terminated:oe}={}){const Le=indexedDB.open(ce,Ie),Ue=Te(Le);return X&&Le.addEventListener("upgradeneeded",_t=>{X(Te(Le.result),_t.oldVersion,_t.newVersion,Te(Le.transaction))}),Q&&Le.addEventListener("blocked",()=>Q()),Ue.then(_t=>{oe&&_t.addEventListener("close",()=>oe()),he&&_t.addEventListener("versionchange",()=>he())}).catch(()=>{}),Ue}function Oe(ce,{blocked:Ie}={}){const Q=indexedDB.deleteDatabase(ce);return Ie&&Q.addEventListener("blocked",()=>Ie()),Te(Q).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],$e=new Map;function ee(ce,Ie){if(!(ce instanceof IDBDatabase)||Ie in ce||"string"!=typeof Ie)return;if($e.get(Ie))return $e.get(Ie);const Q=Ie.replace(/FromIndex$/,""),X=Ie!==Q,he=Ae.includes(Q);if(!(Q in(X?IDBIndex:IDBObjectStore).prototype)||!he&&!Me.includes(Q))return;const oe=function(){var Le=(0,d.Z)(function*(Ue,..._t){const sn=this.transaction(Ue,he?"readwrite":"readonly");let mn=sn.store;return X&&(mn=mn.index(_t.shift())),(yield Promise.all([mn[Q](..._t),he&&sn.done]))[0]});return function(_t){return Le.apply(this,arguments)}}();return $e.set(Ie,oe),oe}!function Ge(ce){Re=ce(Re)}(ce=>({...ce,get:(Ie,Q,X)=>ee(Ie,Q)||ce.get(Ie,Q,X),has:(Ie,Q)=>!!ee(Ie,Q)||ce.has(Ie,Q)}))},5861:(ht,Se,V)=>{function d(k,se,ae,ue,ye,fe,ge){try{var q=k[fe](ge),Z=q.value}catch(J){return void ae(J)}q.done?se(Z):Promise.resolve(Z).then(ue,ye)}function $(k){return function(){var se=this,ae=arguments;return new Promise(function(ue,ye){var fe=k.apply(se,ae);function ge(Z){d(fe,ue,ye,ge,q,"next",Z)}function q(Z){d(fe,ue,ye,ge,q,"throw",Z)}ge(void 0)})}}V.d(Se,{Z:()=>$})}},ht=>{ht(ht.s=8126)}]);